<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>JAMBrite - Shine Brighter, Score Higher</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bricolage+Grotesque:opsz,wght@12..96,300;12..96,400;12..96,500;12..96,600;12..96,700;12..96,800&family=Playfair+Display:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Bricolage Grotesque', 'sans-serif'],
                        display: ['Playfair Display', 'serif'],
                    },
                    colors: {
                        // Nigerian-inspired palette with Material Design 3 tonal approach
                        palm: {
                            50: '#f0fdf4',
                            100: '#dcfce7',
                            200: '#bbf7d0',
                            300: '#86efac',
                            400: '#4ade80',
                            500: '#16a34a',
                            600: '#15803d',
                            700: '#166534',
                            800: '#14532d',
                            900: '#052e16',
                        },
                        earth: {
                            50: '#fefce8',
                            100: '#fef9c3',
                            200: '#fef08a',
                            300: '#fde047',
                            400: '#facc15',
                            500: '#eab308',
                            600: '#ca8a04',
                            700: '#a16207',
                            800: '#854d0e',
                            900: '#713f12',
                        },
                        coral: {
                            50: '#fff1f2',
                            100: '#ffe4e6',
                            200: '#fecdd3',
                            300: '#fda4af',
                            400: '#fb7185',
                            500: '#f43f5e',
                            600: '#e11d48',
                            700: '#be123c',
                            800: '#9f1239',
                            900: '#881337',
                        },
                        indigo: {
                            50: '#eef2ff',
                            100: '#e0e7ff',
                            200: '#c7d2fe',
                            300: '#a5b4fc',
                            400: '#818cf8',
                            500: '#6366f1',
                            600: '#4f46e5',
                            700: '#4338ca',
                            800: '#3730a3',
                            900: '#312e81',
                        },
                        surface: {
                            light: '#FFFBF5',
                            dark: '#1a1a1a',
                        }
                    },
                    animation: {
                        'float': 'float 6s ease-in-out infinite',
                        'pulse-soft': 'pulseSoft 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'slide-up': 'slideUp 0.5s cubic-bezier(0.16, 1, 0.3, 1)',
                        'slide-down': 'slideDown 0.4s cubic-bezier(0.16, 1, 0.3, 1)',
                        'fade-in': 'fadeIn 0.4s ease-out',
                        'scale-in': 'scaleIn 0.4s cubic-bezier(0.16, 1, 0.3, 1)',
                        'bounce-in': 'bounceIn 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55)',
                        'swipe-right': 'swipeRight 0.5s cubic-bezier(0.16, 1, 0.3, 1) forwards',
                        'swipe-left': 'swipeLeft 0.5s cubic-bezier(0.16, 1, 0.3, 1) forwards',
                        'swipe-up': 'swipeUp 0.5s cubic-bezier(0.16, 1, 0.3, 1) forwards',
                        'shimmer': 'shimmer 2s linear infinite',
                        'ripple': 'ripple 0.6s linear',
                        'celebrate': 'celebrate 0.8s ease-out forwards',
                    }
                }
            }
        }
    </script>
    <style>
        * {
            -webkit-tap-highlight-color: transparent;
            box-sizing: border-box;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-15px) rotate(2deg); }
        }

        @keyframes pulseSoft {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.8; transform: scale(1.02); }
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(40px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes scaleIn {
            from { opacity: 0; transform: scale(0.85); }
            to { opacity: 1; transform: scale(1); }
        }

        @keyframes bounceIn {
            0% { opacity: 0; transform: scale(0.3); }
            50% { transform: scale(1.08); }
            70% { transform: scale(0.92); }
            100% { opacity: 1; transform: scale(1); }
        }

        @keyframes swipeRight {
            to { opacity: 0; transform: translateX(150%) rotate(25deg); }
        }

        @keyframes swipeLeft {
            to { opacity: 0; transform: translateX(-150%) rotate(-25deg); }
        }

        @keyframes swipeUp {
            to { opacity: 0; transform: translateY(-150%) scale(0.85); }
        }

        @keyframes shimmer {
            0% { background-position: -200% 0; }
            100% { background-position: 200% 0; }
        }

        @keyframes ripple {
            0% { transform: scale(0); opacity: 1; }
            100% { transform: scale(4); opacity: 0; }
        }

        @keyframes celebrate {
            0% { transform: scale(0) rotate(-45deg); opacity: 0; }
            50% { transform: scale(1.2) rotate(10deg); opacity: 1; }
            100% { transform: scale(1) rotate(0deg); opacity: 1; }
        }

        /* Material Design 3 Surface Tones */
        .surface-container {
            background: linear-gradient(180deg, #FFFBF5 0%, #FFF8EE 100%);
        }

        .dark .surface-container {
            background: linear-gradient(180deg, #1a1a1a 0%, #121212 100%);
        }

        /* Nigerian Pattern Background */
        .naija-pattern {
            background-image:
                radial-gradient(circle at 20% 30%, rgba(22, 163, 74, 0.08) 0%, transparent 40%),
                radial-gradient(circle at 80% 70%, rgba(234, 179, 8, 0.06) 0%, transparent 35%),
                radial-gradient(circle at 50% 50%, rgba(99, 102, 241, 0.04) 0%, transparent 50%);
        }

        .dark .naija-pattern {
            background-image:
                radial-gradient(circle at 20% 30%, rgba(22, 163, 74, 0.12) 0%, transparent 40%),
                radial-gradient(circle at 80% 70%, rgba(234, 179, 8, 0.08) 0%, transparent 35%),
                radial-gradient(circle at 50% 50%, rgba(99, 102, 241, 0.06) 0%, transparent 50%);
        }

        /* Adire-inspired decorative pattern */
        .adire-accent {
            background: repeating-linear-gradient(
                45deg,
                transparent,
                transparent 4px,
                currentColor 4px,
                currentColor 5px
            );
            opacity: 0.1;
        }

        /* M3 Elevated surfaces */
        .m3-surface-1 {
            background: rgba(255, 255, 255, 0.95);
            box-shadow: 0 1px 3px 1px rgba(0,0,0,0.08), 0 1px 2px rgba(0,0,0,0.04);
        }

        .dark .m3-surface-1 {
            background: rgba(40, 40, 40, 0.95);
        }

        .m3-surface-2 {
            background: rgba(255, 255, 255, 0.98);
            box-shadow: 0 2px 6px 2px rgba(0,0,0,0.08), 0 1px 2px rgba(0,0,0,0.04);
        }

        .dark .m3-surface-2 {
            background: rgba(45, 45, 45, 0.98);
        }

        .m3-surface-3 {
            background: #ffffff;
            box-shadow: 0 4px 8px 3px rgba(0,0,0,0.08), 0 1px 3px rgba(0,0,0,0.06);
        }

        .dark .m3-surface-3 {
            background: rgba(50, 50, 50, 1);
        }

        /* Glass morphism for modals */
        .glass-surface {
            background: rgba(255, 251, 245, 0.85);
            backdrop-filter: blur(24px);
            -webkit-backdrop-filter: blur(24px);
        }

        .dark .glass-surface {
            background: rgba(26, 26, 26, 0.9);
        }

        /* Primary gradient */
        .gradient-primary {
            background: linear-gradient(135deg, #16a34a 0%, #15803d 50%, #166534 100%);
        }

        /* Accent gradient */
        .gradient-accent {
            background: linear-gradient(135deg, #eab308 0%, #ca8a04 100%);
        }

        /* Nigerian flag inspired gradient */
        .gradient-naija {
            background: linear-gradient(90deg, #16a34a 0%, #16a34a 33%, #ffffff 33%, #ffffff 66%, #16a34a 66%, #16a34a 100%);
        }

        /* Score badge gradients by range */
        .score-low { background: linear-gradient(135deg, #f43f5e, #e11d48); }
        .score-mid { background: linear-gradient(135deg, #eab308, #ca8a04); }
        .score-high { background: linear-gradient(135deg, #16a34a, #15803d); }
        .score-excellent { background: linear-gradient(135deg, #6366f1, #4f46e5); }

        /* Subject category colors */
        .subject-science { --subject-color: #16a34a; --subject-bg: rgba(22, 163, 74, 0.12); }
        .subject-arts { --subject-color: #6366f1; --subject-bg: rgba(99, 102, 241, 0.12); }
        .subject-commercial { --subject-color: #eab308; --subject-bg: rgba(234, 179, 8, 0.12); }

        /* M3 FAB styling */
        .m3-fab {
            box-shadow: 0 3px 5px -1px rgba(0,0,0,0.2), 0 6px 10px 0 rgba(0,0,0,0.14), 0 1px 18px 0 rgba(0,0,0,0.12);
            transition: box-shadow 0.3s, transform 0.2s;
        }

        .m3-fab:hover {
            box-shadow: 0 5px 5px -3px rgba(0,0,0,0.2), 0 8px 10px 1px rgba(0,0,0,0.14), 0 3px 14px 2px rgba(0,0,0,0.12);
            transform: translateY(-2px);
        }

        .m3-fab:active {
            transform: scale(0.96);
        }

        /* Swipe card styling */
        .swipe-card {
            touch-action: none;
            user-select: none;
            transition: transform 0.12s ease-out;
            transform-style: preserve-3d;
        }

        .swipe-card.dragging {
            transition: none;
        }

        /* Input styling */
        input, select, textarea {
            font-size: 16px !important;
        }

        /* Custom scrollbar */
        .scrollbar-hide::-webkit-scrollbar { display: none; }
        .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }

        /* Chip styling */
        .m3-chip {
            transition: all 0.2s ease;
        }

        .m3-chip:hover {
            transform: translateY(-1px);
        }

        .m3-chip.selected {
            box-shadow: 0 2px 8px rgba(22, 163, 74, 0.3);
        }

        /* Navigation rail */
        .nav-rail-item {
            position: relative;
            transition: all 0.2s ease;
        }

        .nav-rail-item.active::before {
            content: '';
            position: absolute;
            inset: 4px 8px;
            background: rgba(22, 163, 74, 0.15);
            border-radius: 16px;
            z-index: -1;
        }

        .dark .nav-rail-item.active::before {
            background: rgba(22, 163, 74, 0.25);
        }

        /* State avatars */
        .state-avatar {
            background: linear-gradient(135deg, var(--avatar-from), var(--avatar-to));
        }

        /* Loading shimmer */
        .shimmer-bg {
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            background-size: 200% 100%;
            animation: shimmer 1.5s infinite;
        }

        /* Safe area for mobile */
        .safe-bottom {
            padding-bottom: env(safe-area-inset-bottom, 16px);
        }

        /* Ripple effect container */
        .ripple-container {
            position: relative;
            overflow: hidden;
        }

        .ripple-effect {
            position: absolute;
            border-radius: 50%;
            background: rgba(255,255,255,0.4);
            animation: ripple 0.6s linear;
            pointer-events: none;
        }

        /* Typography enhancements */
        .text-balance {
            text-wrap: balance;
        }

        /* Status indicators */
        .status-online {
            box-shadow: 0 0 0 2px currentColor, 0 0 0 4px rgba(22, 163, 74, 0.3);
        }
    </style>
</head>
<body class="font-sans bg-surface-light dark:bg-surface-dark text-slate-900 dark:text-white min-h-screen overflow-x-hidden">
    <div id="app" class="surface-container naija-pattern min-h-screen">
        <!-- Loading Screen -->
        <div id="loading-screen" class="fixed inset-0 z-50 flex items-center justify-center surface-container naija-pattern">
            <div class="text-center animate-fade-in">
                <div class="relative mb-8">
                    <div class="w-24 h-24 mx-auto rounded-3xl gradient-primary flex items-center justify-center shadow-lg animate-pulse-soft">
                        <span class="text-4xl">üìö</span>
                    </div>
                    <div class="absolute -bottom-2 -right-2 w-10 h-10 rounded-xl gradient-accent flex items-center justify-center shadow-md animate-bounce-in" style="animation-delay: 0.3s">
                        <span class="text-lg">‚ú®</span>
                    </div>
                </div>
                <h1 class="text-3xl font-bold font-display text-palm-700 dark:text-palm-400 mb-2">JAMBrite</h1>
                <p class="text-slate-500 dark:text-slate-400 text-sm tracking-wide">Shine Brighter, Score Higher</p>
                <div class="mt-6 flex justify-center gap-1">
                    <div class="w-2 h-2 rounded-full bg-palm-500 animate-bounce" style="animation-delay: 0s"></div>
                    <div class="w-2 h-2 rounded-full bg-earth-500 animate-bounce" style="animation-delay: 0.1s"></div>
                    <div class="w-2 h-2 rounded-full bg-palm-500 animate-bounce" style="animation-delay: 0.2s"></div>
                </div>
            </div>
        </div>

        <!-- Onboarding Screen -->
        <div id="onboarding-screen" class="fixed inset-0 z-40 surface-container naija-pattern hidden overflow-y-auto">
            <div class="min-h-screen flex flex-col items-center justify-center p-6 py-12">
                <div class="max-w-md w-full animate-slide-up">
                    <!-- Logo & Welcome -->
                    <div class="text-center mb-8">
                        <div class="relative inline-block mb-6">
                            <div class="w-20 h-20 mx-auto rounded-2xl gradient-primary flex items-center justify-center shadow-lg animate-float">
                                <span class="text-3xl">üìö</span>
                            </div>
                            <div class="absolute -top-1 -right-1 w-8 h-8 rounded-lg gradient-accent flex items-center justify-center shadow-md">
                                <span class="text-sm">üá≥üá¨</span>
                            </div>
                        </div>
                        <h1 class="text-3xl font-bold font-display text-palm-700 dark:text-palm-400 mb-2">Welcome to JAMBrite</h1>
                        <p class="text-slate-600 dark:text-slate-400">Connect with fellow JAMB candidates across Nigeria</p>
                    </div>

                    <!-- D-School Framework Badge -->
                    <div class="mb-6 p-4 rounded-2xl bg-indigo-50 dark:bg-indigo-900/20 border border-indigo-100 dark:border-indigo-800/30">
                        <div class="flex items-center gap-3">
                            <div class="w-10 h-10 rounded-xl bg-indigo-500 flex items-center justify-center flex-shrink-0">
                                <i class="fas fa-lightbulb text-white"></i>
                            </div>
                            <div class="flex-1">
                                <p class="text-sm font-medium text-indigo-700 dark:text-indigo-300">Designed with You in Mind</p>
                                <p class="text-xs text-indigo-600/70 dark:text-indigo-400/70">Empathize ‚Üí Define ‚Üí Ideate ‚Üí Prototype ‚Üí Test</p>
                            </div>
                        </div>
                    </div>

                    <!-- Goal Selection -->
                    <div class="mb-6">
                        <label class="block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-3">What's your goal?</label>
                        <div class="grid grid-cols-2 gap-3">
                            <button onclick="selectGoal('find-partner')" id="goal-find-partner" class="goal-btn group p-4 rounded-2xl border-2 border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800/50 hover:border-palm-400 transition-all duration-300">
                                <div class="w-12 h-12 bg-palm-100 dark:bg-palm-900/30 rounded-xl flex items-center justify-center mx-auto mb-3 group-hover:scale-110 transition-transform">
                                    <i class="fas fa-user-friends text-palm-600 dark:text-palm-400 text-lg"></i>
                                </div>
                                <h3 class="font-semibold text-slate-900 dark:text-white text-sm">Find Study Partner</h3>
                                <p class="text-xs text-slate-500 dark:text-slate-400 mt-1">Learn together</p>
                            </button>

                            <button onclick="selectGoal('help-others')" id="goal-help-others" class="goal-btn group p-4 rounded-2xl border-2 border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800/50 hover:border-earth-400 transition-all duration-300">
                                <div class="w-12 h-12 bg-earth-100 dark:bg-earth-900/30 rounded-xl flex items-center justify-center mx-auto mb-3 group-hover:scale-110 transition-transform">
                                    <i class="fas fa-hands-helping text-earth-600 dark:text-earth-400 text-lg"></i>
                                </div>
                                <h3 class="font-semibold text-slate-900 dark:text-white text-sm">Help Others</h3>
                                <p class="text-xs text-slate-500 dark:text-slate-400 mt-1">Share knowledge</p>
                            </button>
                        </div>
                    </div>

                    <!-- Form Fields -->
                    <div class="space-y-4 mb-6">
                        <div class="grid grid-cols-2 gap-3">
                            <div class="relative group">
                                <label class="block text-xs font-medium text-slate-500 dark:text-slate-400 mb-1.5 ml-1">First Name</label>
                                <input type="text" id="first-name-input" placeholder="Ayoola"
                                    class="w-full p-3.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800/50 focus:outline-none focus:ring-2 focus:ring-palm-500 focus:border-transparent transition-all text-sm">
                            </div>
                            <div class="relative group">
                                <label class="block text-xs font-medium text-slate-500 dark:text-slate-400 mb-1.5 ml-1">Last Name</label>
                                <input type="text" id="last-name-input" placeholder="Samuel"
                                    class="w-full p-3.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800/50 focus:outline-none focus:ring-2 focus:ring-palm-500 focus:border-transparent transition-all text-sm">
                            </div>
                        </div>

                        <div class="relative group">
                            <label class="block text-xs font-medium text-slate-500 dark:text-slate-400 mb-1.5 ml-1">WhatsApp Number</label>
                            <div class="relative">
                                <span class="absolute left-3.5 top-1/2 -translate-y-1/2 text-slate-400 text-sm">+234</span>
                                <input type="tel" id="phone-input" placeholder="8167284092"
                                    class="w-full p-3.5 pl-14 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800/50 focus:outline-none focus:ring-2 focus:ring-palm-500 focus:border-transparent transition-all text-sm">
                            </div>
                        </div>

                        <div class="grid grid-cols-2 gap-3">
                            <div class="relative group">
                                <label class="block text-xs font-medium text-slate-500 dark:text-slate-400 mb-1.5 ml-1">State</label>
                                <select id="state-select" class="w-full p-3.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800/50 focus:outline-none focus:ring-2 focus:ring-palm-500 focus:border-transparent transition-all appearance-none cursor-pointer text-sm">
                                    <option value="">Select state</option>
                                    <option value="Lagos">Lagos</option>
                                    <option value="Ogun">Ogun</option>
                                    <option value="Oyo">Oyo</option>
                                    <option value="Kogi">Kogi</option>
                                    <option value="Kwara">Kwara</option>
                                    <option value="Osun">Osun</option>
                                    <option value="Ekiti">Ekiti</option>
                                    <option value="Enugu">Enugu</option>
                                    <option value="Abia">Abia</option>
                                    <option value="Edo">Edo</option>
                                    <option value="Delta">Delta</option>
                                    <option value="Akwa-Ibom">Akwa-Ibom</option>
                                    <option value="FCT">FCT Abuja</option>
                                    <option value="Adamawa">Adamawa</option>
                                    <option value="Ebonyi">Ebonyi</option>
                                    <option value="Imo">Imo</option>
                                </select>
                                <i class="fas fa-chevron-down absolute right-3.5 top-[calc(50%+10px)] -translate-y-1/2 text-slate-400 pointer-events-none text-xs"></i>
                            </div>
                            <div class="relative group">
                                <label class="block text-xs font-medium text-slate-500 dark:text-slate-400 mb-1.5 ml-1">Category</label>
                                <select id="category-select" class="w-full p-3.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800/50 focus:outline-none focus:ring-2 focus:ring-palm-500 focus:border-transparent transition-all appearance-none cursor-pointer text-sm">
                                    <option value="">Select</option>
                                    <option value="Science">Science</option>
                                    <option value="Arts">Arts</option>
                                    <option value="Commercial">Commercial</option>
                                </select>
                                <i class="fas fa-chevron-down absolute right-3.5 top-[calc(50%+10px)] -translate-y-1/2 text-slate-400 pointer-events-none text-xs"></i>
                            </div>
                        </div>

                        <div class="relative group">
                            <label class="block text-xs font-medium text-slate-500 dark:text-slate-400 mb-1.5 ml-1">Target JAMB Score</label>
                            <div class="flex items-center gap-3">
                                <input type="range" id="score-slider" min="200" max="400" value="300" class="flex-1 h-2 bg-slate-200 dark:bg-slate-700 rounded-lg appearance-none cursor-pointer accent-palm-500">
                                <span id="score-display" class="w-16 text-center py-2 px-3 rounded-lg bg-palm-100 dark:bg-palm-900/30 text-palm-700 dark:text-palm-300 font-bold text-sm">300</span>
                            </div>
                        </div>

                        <div class="relative group">
                            <label class="block text-xs font-medium text-slate-500 dark:text-slate-400 mb-1.5 ml-1">Your JAMB Subjects (Select 4)</label>
                            <div id="subject-chips" class="flex flex-wrap gap-2">
                                <!-- Chips will be populated by JS -->
                            </div>
                        </div>

                        <div class="relative group">
                            <label class="block text-xs font-medium text-slate-500 dark:text-slate-400 mb-1.5 ml-1">Target Institution</label>
                            <input type="text" id="institution-input" placeholder="e.g. University of Lagos"
                                class="w-full p-3.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800/50 focus:outline-none focus:ring-2 focus:ring-palm-500 focus:border-transparent transition-all text-sm">
                        </div>

                        <div class="relative group">
                            <label class="block text-xs font-medium text-slate-500 dark:text-slate-400 mb-1.5 ml-1">Intended Course</label>
                            <input type="text" id="course-input" placeholder="e.g. Medicine and Surgery"
                                class="w-full p-3.5 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800/50 focus:outline-none focus:ring-2 focus:ring-palm-500 focus:border-transparent transition-all text-sm">
                        </div>
                    </div>

                    <button onclick="completeOnboarding()" class="w-full py-4 gradient-primary text-white font-semibold rounded-2xl transition-all duration-300 flex items-center justify-center gap-2 shadow-lg hover:shadow-xl m3-fab">
                        <span>Start Finding Study Partners</span>
                        <i class="fas fa-arrow-right"></i>
                    </button>

                    <p class="text-center text-xs text-slate-500 dark:text-slate-400 mt-6">
                        By joining, you agree to study hard and support your peers! üí™
                    </p>
                </div>
            </div>
        </div>

        <!-- Main App Container -->
        <div id="main-app" class="hidden">
            <!-- Header -->
            <header id="main-header" class="fixed top-0 left-0 right-0 z-30 glass-surface border-b border-slate-200/50 dark:border-slate-700/50">
                <div class="max-w-lg mx-auto px-4 py-3">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center gap-3">
                            <div class="w-10 h-10 rounded-xl gradient-primary flex items-center justify-center shadow-md">
                                <span class="text-lg">üìö</span>
                            </div>
                            <div>
                                <h2 class="font-semibold text-slate-900 dark:text-white" id="header-title">Discover</h2>
                                <p class="text-xs text-slate-500 dark:text-slate-400" id="header-subtitle">Find your study squad</p>
                            </div>
                        </div>

                        <div class="flex items-center gap-2">
                            <button onclick="showFilters()" class="p-2.5 rounded-xl bg-slate-100 dark:bg-slate-800 hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors">
                                <i class="fas fa-sliders text-slate-600 dark:text-slate-300"></i>
                            </button>
                            <button onclick="showNotifications()" class="p-2.5 rounded-xl bg-slate-100 dark:bg-slate-800 hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors relative">
                                <i class="fas fa-bell text-slate-600 dark:text-slate-300"></i>
                                <span class="absolute -top-1 -right-1 w-5 h-5 bg-coral-500 text-white text-xs font-bold rounded-full flex items-center justify-center">5</span>
                            </button>
                        </div>
                    </div>

                    <!-- Subject Filter Tabs -->
                    <div id="subject-tabs" class="mt-3 -mx-4 px-4 overflow-x-auto scrollbar-hide">
                        <div class="flex gap-2 pb-1">
                            <button class="subject-tab active px-4 py-2 gradient-primary text-white rounded-full text-sm font-medium whitespace-nowrap shadow-sm" data-subject="all">
                                All Candidates
                            </button>
                            <button class="subject-tab px-4 py-2 bg-white dark:bg-slate-800 text-slate-700 dark:text-slate-300 rounded-full text-sm font-medium whitespace-nowrap hover:bg-slate-50 dark:hover:bg-slate-700 border border-slate-200 dark:border-slate-700" data-subject="science">
                                üî¨ Science
                            </button>
                            <button class="subject-tab px-4 py-2 bg-white dark:bg-slate-800 text-slate-700 dark:text-slate-300 rounded-full text-sm font-medium whitespace-nowrap hover:bg-slate-50 dark:hover:bg-slate-700 border border-slate-200 dark:border-slate-700" data-subject="arts">
                                üìñ Arts
                            </button>
                            <button class="subject-tab px-4 py-2 bg-white dark:bg-slate-800 text-slate-700 dark:text-slate-300 rounded-full text-sm font-medium whitespace-nowrap hover:bg-slate-50 dark:hover:bg-slate-700 border border-slate-200 dark:border-slate-700" data-subject="commercial">
                                üíº Commercial
                            </button>
                        </div>
                    </div>
                </div>
            </header>

            <!-- Discovery View -->
            <div id="discovery-view" class="pt-36 pb-32 px-4 min-h-screen">
                <div class="max-w-md mx-auto relative h-[520px] flex items-center justify-center">
                    <div id="card-container" class="relative w-full h-full"></div>

                    <!-- Empty State -->
                    <div id="empty-state" class="hidden absolute inset-0 flex items-center justify-center">
                        <div class="text-center p-8 animate-fade-in">
                            <div class="w-24 h-24 mx-auto mb-6 rounded-full bg-slate-100 dark:bg-slate-800 flex items-center justify-center">
                                <span class="text-4xl">üéì</span>
                            </div>
                            <h3 class="text-xl font-semibold text-slate-900 dark:text-white mb-2 font-display">No more candidates</h3>
                            <p class="text-slate-500 dark:text-slate-400 mb-6">Check back later for more study partners!</p>
                            <button onclick="resetCards()" class="px-6 py-3 gradient-primary text-white font-medium rounded-xl shadow-lg m3-fab">
                                <i class="fas fa-redo mr-2"></i>Refresh
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Swipe Action Buttons -->
                <div id="swipe-buttons" class="fixed bottom-24 left-0 right-0 px-6">
                    <div class="max-w-md mx-auto">
                        <div class="flex items-center justify-center gap-5">
                            <button onclick="swipeCard('left')" class="w-14 h-14 rounded-full m3-surface-3 flex items-center justify-center transition-all duration-300 hover:scale-110 group">
                                <div class="w-11 h-11 rounded-full bg-coral-50 dark:bg-coral-900/30 flex items-center justify-center group-hover:bg-coral-100 dark:group-hover:bg-coral-900/50 transition-colors">
                                    <i class="fas fa-times text-lg text-coral-500"></i>
                                </div>
                            </button>

                            <button onclick="swipeCard('up')" class="w-16 h-16 rounded-full gradient-accent shadow-lg flex items-center justify-center transition-all duration-300 hover:scale-110 relative m3-fab">
                                <i class="fas fa-bolt text-xl text-white"></i>
                                <span class="absolute -top-1 -right-1 w-5 h-5 bg-white dark:bg-slate-800 text-earth-600 text-xs font-bold rounded-full flex items-center justify-center shadow">‚ö°</span>
                            </button>

                            <button onclick="swipeCard('right')" class="w-14 h-14 rounded-full m3-surface-3 flex items-center justify-center transition-all duration-300 hover:scale-110 group">
                                <div class="w-11 h-11 rounded-full bg-palm-50 dark:bg-palm-900/30 flex items-center justify-center group-hover:bg-palm-100 dark:group-hover:bg-palm-900/50 transition-colors">
                                    <i class="fas fa-check text-lg text-palm-600"></i>
                                </div>
                            </button>
                        </div>

                        <p class="text-center mt-4 text-slate-500 dark:text-slate-400 text-xs">
                            <span class="text-coral-500 font-medium">‚Üê Skip</span> ¬∑
                            <span class="text-earth-500 font-medium">‚Üë Super Match</span> ¬∑
                            <span class="text-palm-500 font-medium">Connect ‚Üí</span>
                        </p>
                    </div>
                </div>
            </div>

            <!-- Matches View -->
            <div id="matches-view" class="pt-24 pb-24 px-4 min-h-screen hidden">
                <div class="max-w-lg mx-auto">
                    <h2 class="text-2xl font-bold font-display text-slate-900 dark:text-white mb-6">Your Study Squad</h2>

                    <!-- New Matches -->
                    <div class="mb-8">
                        <h3 class="text-sm font-medium text-slate-500 dark:text-slate-400 mb-3 uppercase tracking-wider flex items-center gap-2">
                            <span class="w-2 h-2 bg-palm-500 rounded-full animate-pulse"></span>
                            New Connections
                        </h3>
                        <div class="flex gap-4 overflow-x-auto scrollbar-hide pb-2">
                            <div id="new-matches-container" class="flex gap-4"></div>
                        </div>
                    </div>

                    <!-- Active Conversations -->
                    <div>
                        <h3 class="text-sm font-medium text-slate-500 dark:text-slate-400 mb-3 uppercase tracking-wider">Study Chats</h3>
                        <div id="conversations-container" class="space-y-3"></div>
                    </div>
                </div>
            </div>

            <!-- Resources View -->
            <div id="resources-view" class="pt-24 pb-24 px-4 min-h-screen hidden">
                <div class="max-w-lg mx-auto">
                    <h2 class="text-2xl font-bold font-display text-slate-900 dark:text-white mb-2">JAMB Resources</h2>
                    <p class="text-slate-500 dark:text-slate-400 mb-6 text-sm">Everything you need to score 300+</p>

                    <!-- Quick Stats -->
                    <div class="grid grid-cols-3 gap-3 mb-6">
                        <div class="p-4 rounded-2xl bg-palm-50 dark:bg-palm-900/20 text-center">
                            <div class="text-2xl font-bold text-palm-600 dark:text-palm-400">15</div>
                            <div class="text-xs text-palm-700/70 dark:text-palm-300/70">Days to JAMB</div>
                        </div>
                        <div class="p-4 rounded-2xl bg-earth-50 dark:bg-earth-900/20 text-center">
                            <div class="text-2xl font-bold text-earth-600 dark:text-earth-400">4</div>
                            <div class="text-xs text-earth-700/70 dark:text-earth-300/70">Subjects</div>
                        </div>
                        <div class="p-4 rounded-2xl bg-indigo-50 dark:bg-indigo-900/20 text-center">
                            <div class="text-2xl font-bold text-indigo-600 dark:text-indigo-400">85%</div>
                            <div class="text-xs text-indigo-700/70 dark:text-indigo-300/70">Readiness</div>
                        </div>
                    </div>

                    <!-- Resource Categories -->
                    <div class="space-y-4" id="resources-list">
                        <!-- Will be populated by JS -->
                    </div>
                </div>
            </div>

            <!-- Profile View -->
            <div id="profile-view" class="pb-24 min-h-screen hidden">
                <div class="max-w-lg mx-auto">
                    <!-- Cover with Nigerian Pattern -->
                    <div class="h-44 gradient-primary rounded-b-3xl relative overflow-hidden">
                        <div class="adire-accent absolute inset-0"></div>
                        <button onclick="editProfile()" class="absolute top-4 right-4 p-2.5 rounded-xl bg-white/20 backdrop-blur-sm text-white hover:bg-white/30 transition-colors">
                            <i class="fas fa-pen"></i>
                        </button>
                        <div class="absolute -bottom-12 left-6">
                            <div class="w-28 h-28 rounded-2xl border-4 border-white dark:border-slate-900 overflow-hidden shadow-lg" id="profile-avatar-container">
                                <div class="w-full h-full gradient-accent flex items-center justify-center">
                                    <span class="text-4xl text-white font-bold" id="profile-initial">A</span>
                                </div>
                            </div>
                            <div class="absolute -bottom-1 -right-1 w-8 h-8 rounded-lg bg-palm-500 flex items-center justify-center border-2 border-white dark:border-slate-900">
                                <i class="fas fa-check text-white text-xs"></i>
                            </div>
                        </div>
                    </div>

                    <div class="pt-16 px-6">
                        <!-- Name & Status -->
                        <div class="flex items-start justify-between mb-6">
                            <div>
                                <h1 class="text-2xl font-bold text-slate-900 dark:text-white font-display" id="profile-name">Ayoola Samuel</h1>
                                <div class="flex items-center text-slate-600 dark:text-slate-400 gap-2 mt-1">
                                    <i class="fas fa-map-marker-alt text-sm text-palm-500"></i>
                                    <span id="profile-location">Ogun State</span>
                                </div>
                            </div>
                            <div class="px-3 py-1.5 bg-palm-100 dark:bg-palm-900/30 rounded-full">
                                <div class="flex items-center gap-1.5">
                                    <span class="w-2 h-2 bg-palm-500 rounded-full animate-pulse"></span>
                                    <span class="text-sm font-medium text-palm-700 dark:text-palm-400">Active</span>
                                </div>
                            </div>
                        </div>

                        <!-- JAMB Target Card -->
                        <div class="p-5 rounded-2xl gradient-primary text-white mb-6 relative overflow-hidden">
                            <div class="adire-accent absolute inset-0 opacity-20"></div>
                            <div class="relative flex items-center justify-between">
                                <div>
                                    <p class="text-white/80 text-sm mb-1">Target Score</p>
                                    <p class="text-3xl font-bold font-display" id="profile-target">300</p>
                                </div>
                                <div class="text-right">
                                    <p class="text-white/80 text-sm mb-1">Category</p>
                                    <p class="text-lg font-semibold" id="profile-category">Science</p>
                                </div>
                                <div class="w-16 h-16 rounded-full bg-white/20 flex items-center justify-center">
                                    <span class="text-2xl">üéØ</span>
                                </div>
                            </div>
                        </div>

                        <!-- Stats Grid -->
                        <div class="grid grid-cols-3 gap-3 mb-6">
                            <div class="m3-surface-2 rounded-2xl p-4 text-center">
                                <div class="text-2xl font-bold text-palm-600 dark:text-palm-400">12</div>
                                <div class="text-xs text-slate-500 dark:text-slate-400 mt-1">Connections</div>
                            </div>
                            <div class="m3-surface-2 rounded-2xl p-4 text-center">
                                <div class="text-2xl font-bold text-earth-600 dark:text-earth-400">28</div>
                                <div class="text-xs text-slate-500 dark:text-slate-400 mt-1">Study Hours</div>
                            </div>
                            <div class="m3-surface-2 rounded-2xl p-4 text-center">
                                <div class="text-2xl font-bold text-indigo-600 dark:text-indigo-400">4.8</div>
                                <div class="text-xs text-slate-500 dark:text-slate-400 mt-1">Rating</div>
                            </div>
                        </div>

                        <!-- Institution & Course -->
                        <div class="m3-surface-2 rounded-2xl p-5 mb-6">
                            <h3 class="font-semibold text-slate-900 dark:text-white mb-4 flex items-center gap-2">
                                <i class="fas fa-university text-palm-500"></i>
                                Target Institution
                            </h3>
                            <div class="space-y-3">
                                <div class="flex items-center gap-3">
                                    <div class="w-10 h-10 rounded-xl bg-indigo-100 dark:bg-indigo-900/30 flex items-center justify-center">
                                        <i class="fas fa-building-columns text-indigo-600 dark:text-indigo-400"></i>
                                    </div>
                                    <div>
                                        <p class="font-medium text-slate-900 dark:text-white" id="profile-institution">University of Lagos</p>
                                        <p class="text-sm text-slate-500 dark:text-slate-400">First Choice</p>
                                    </div>
                                </div>
                                <div class="flex items-center gap-3">
                                    <div class="w-10 h-10 rounded-xl bg-earth-100 dark:bg-earth-900/30 flex items-center justify-center">
                                        <i class="fas fa-graduation-cap text-earth-600 dark:text-earth-400"></i>
                                    </div>
                                    <div>
                                        <p class="font-medium text-slate-900 dark:text-white" id="profile-course">Medicine and Surgery</p>
                                        <p class="text-sm text-slate-500 dark:text-slate-400">Intended Course</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Subjects -->
                        <div class="mb-6">
                            <h3 class="font-semibold text-slate-900 dark:text-white mb-3 flex items-center gap-2">
                                <i class="fas fa-book text-palm-500"></i>
                                My JAMB Subjects
                            </h3>
                            <div class="flex flex-wrap gap-2" id="profile-subjects">
                                <!-- Populated by JS -->
                            </div>
                        </div>

                        <!-- Settings -->
                        <div class="space-y-3">
                            <button class="w-full flex items-center justify-between p-4 m3-surface-2 rounded-xl transition-all hover:shadow-md">
                                <div class="flex items-center gap-3">
                                    <div class="w-10 h-10 rounded-lg bg-slate-100 dark:bg-slate-700 flex items-center justify-center">
                                        <i class="fas fa-cog text-slate-600 dark:text-slate-400"></i>
                                    </div>
                                    <span class="font-medium text-slate-900 dark:text-white">Settings</span>
                                </div>
                                <i class="fas fa-chevron-right text-slate-400"></i>
                            </button>
                            <button class="w-full flex items-center justify-between p-4 m3-surface-2 rounded-xl transition-all hover:shadow-md">
                                <div class="flex items-center gap-3">
                                    <div class="w-10 h-10 rounded-lg bg-slate-100 dark:bg-slate-700 flex items-center justify-center">
                                        <i class="fas fa-headset text-slate-600 dark:text-slate-400"></i>
                                    </div>
                                    <span class="font-medium text-slate-900 dark:text-white">Get Help</span>
                                </div>
                                <i class="fas fa-chevron-right text-slate-400"></i>
                            </button>
                            <button class="w-full flex items-center justify-between p-4 m3-surface-2 rounded-xl transition-all hover:shadow-md">
                                <div class="flex items-center gap-3">
                                    <div class="w-10 h-10 rounded-lg bg-coral-100 dark:bg-coral-900/30 flex items-center justify-center">
                                        <i class="fas fa-sign-out-alt text-coral-600 dark:text-coral-400"></i>
                                    </div>
                                    <span class="font-medium text-coral-600 dark:text-coral-400">Logout</span>
                                </div>
                                <i class="fas fa-chevron-right text-slate-400"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Bottom Navigation -->
            <nav class="fixed bottom-0 left-0 right-0 z-30 glass-surface border-t border-slate-200/50 dark:border-slate-700/50 safe-bottom">
                <div class="max-w-lg mx-auto px-4 py-2">
                    <div class="flex items-center justify-around">
                        <button onclick="showView('discovery')" class="nav-rail-item active flex flex-col items-center gap-1 px-5 py-2 text-palm-600 dark:text-palm-400">
                            <i class="fas fa-layer-group text-lg"></i>
                            <span class="text-xs font-medium">Discover</span>
                        </button>
                        <button onclick="showView('matches')" class="nav-rail-item flex flex-col items-center gap-1 px-5 py-2 text-slate-500 dark:text-slate-400 relative">
                            <i class="fas fa-users text-lg"></i>
                            <span class="text-xs font-medium">Squad</span>
                            <span class="absolute top-0 right-2 w-4 h-4 bg-coral-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center">3</span>
                        </button>
                        <button onclick="showView('resources')" class="nav-rail-item flex flex-col items-center gap-1 px-5 py-2 text-slate-500 dark:text-slate-400">
                            <i class="fas fa-book-open text-lg"></i>
                            <span class="text-xs font-medium">Resources</span>
                        </button>
                        <button onclick="showView('profile')" class="nav-rail-item flex flex-col items-center gap-1 px-5 py-2 text-slate-500 dark:text-slate-400">
                            <i class="fas fa-user text-lg"></i>
                            <span class="text-xs font-medium">Profile</span>
                        </button>
                    </div>
                </div>
            </nav>
        </div>

        <!-- Modals Container -->
        <div id="modals-container"></div>
    </div>

    <script>
        // App State
        const state = {
            currentView: 'discovery',
            user: {
                firstName: '',
                lastName: '',
                phone: '',
                state: '',
                category: '',
                targetScore: 300,
                subjects: [],
                institution: '',
                course: '',
                goal: ''
            },
            currentCardIndex: 0,
            profiles: [],
            matches: [],
            conversations: [],
            selectedSubjects: []
        };

        // All JAMB subjects
        const allSubjects = [
            'English', 'Mathematics', 'Physics', 'Chemistry', 'Biology',
            'Government', 'Economics', 'Lit-in-English', 'CRS', 'IRK',
            'Geography', 'Accounting', 'Commerce', 'Agricultural Science',
            'History', 'Yoruba', 'Home Economics', 'Computer'
        ];

        // Sample profiles from real data
        const sampleProfiles = [
            {
                id: 1,
                firstName: 'Ayoola',
                lastName: 'Samuel',
                state: 'Ogun',
                city: 'Sango Otta',
                category: 'Arts',
                subjects: ['CRS', 'Government', 'History'],
                targetScore: 300,
                institution: 'NDA',
                course: 'History',
                isRepeating: false,
                confidence: 'Very Confident',
                studyTime: 'Weekends',
                challenge: 'Nothing to say',
                gradient: 'from-indigo-500 to-purple-600',
                emoji: 'üìñ'
            },
            {
                id: 2,
                firstName: 'Chi',
                lastName: 'Nazaa',
                state: 'Lagos',
                city: 'Ketu',
                category: 'Arts',
                subjects: ['CRS', 'Government', 'Lit-in-English'],
                targetScore: 300,
                institution: 'LASU',
                course: 'Law',
                isRepeating: true,
                confidence: 'Very Confident',
                studyTime: 'Evening',
                challenge: '',
                gradient: 'from-palm-500 to-teal-600',
                emoji: '‚öñÔ∏è'
            },
            {
                id: 3,
                firstName: 'Ugochukwu',
                lastName: 'Ikennazor',
                state: 'Lagos',
                city: 'Lagos',
                category: 'Science',
                subjects: ['Physics', 'Chemistry', 'Biology'],
                targetScore: 370,
                institution: 'UNIZIK',
                course: 'MBBS',
                isRepeating: true,
                confidence: 'Very Confident',
                studyTime: 'Afternoon',
                challenge: 'Am struggling physics but am getting better by the day',
                gradient: 'from-palm-500 to-emerald-600',
                emoji: 'ü©∫'
            },
            {
                id: 4,
                firstName: 'Ruth',
                lastName: 'Folaranmi',
                state: 'Oyo',
                city: 'Iseyin',
                category: 'Commercial',
                subjects: ['Mathematics', 'Accounting', 'Economics'],
                targetScore: 380,
                institution: 'University of Ibadan',
                course: 'Accounting',
                isRepeating: true,
                confidence: 'Somewhat Confident',
                studyTime: 'Weekends',
                challenge: 'University of Ibadan post utme and one particular subject (economics)',
                gradient: 'from-earth-500 to-orange-600',
                emoji: 'üí∞'
            },
            {
                id: 5,
                firstName: 'Adepoju',
                lastName: 'Abdullah',
                state: 'Lagos',
                city: 'Lagos',
                category: 'Science',
                subjects: ['Physics', 'Chemistry', 'Biology'],
                targetScore: 340,
                institution: 'UNILAG',
                course: 'Radiography',
                isRepeating: true,
                confidence: 'Somewhat Confident',
                studyTime: 'Evening',
                challenge: 'I have not been able to focus',
                gradient: 'from-blue-500 to-cyan-600',
                emoji: 'üì∏'
            },
            {
                id: 6,
                firstName: 'Sophia',
                lastName: 'Mmesoma',
                state: 'Lagos',
                city: 'Lagos',
                category: 'Arts',
                subjects: ['CRS', 'Government', 'Lit-in-English'],
                targetScore: 360,
                institution: 'UNILAG',
                course: 'Law',
                isRepeating: true,
                confidence: 'Very Confident',
                studyTime: 'Afternoon',
                challenge: '',
                gradient: 'from-pink-500 to-rose-600',
                emoji: '‚öñÔ∏è'
            },
            {
                id: 7,
                firstName: 'Williams',
                lastName: 'Triumph',
                state: 'Edo',
                city: 'Benin City',
                category: 'Science',
                subjects: ['Mathematics', 'Physics', 'Biology'],
                targetScore: 300,
                institution: 'UNIBEN',
                course: 'Engineering',
                isRepeating: false,
                confidence: 'Very Confident',
                studyTime: 'Evening',
                challenge: 'None',
                gradient: 'from-amber-500 to-yellow-600',
                emoji: '‚öôÔ∏è'
            },
            {
                id: 8,
                firstName: 'Rukaiya',
                lastName: 'Yahya',
                state: 'Adamawa',
                city: 'Yola',
                category: 'Science',
                subjects: ['Physics', 'Chemistry', 'Biology'],
                targetScore: 350,
                institution: 'Bayero University Kano',
                course: 'Pharmacy',
                isRepeating: false,
                confidence: 'Somewhat Confident',
                studyTime: 'Evening',
                challenge: 'Lack of resources',
                gradient: 'from-violet-500 to-purple-600',
                emoji: 'üíä'
            },
            {
                id: 9,
                firstName: 'Michael',
                lastName: 'Esiemokhai',
                state: 'Lagos',
                city: 'Surulere',
                category: 'Commercial',
                subjects: ['Mathematics', 'Accounting', 'Economics'],
                targetScore: 330,
                institution: 'UNILAG',
                course: 'Accounting',
                isRepeating: true,
                confidence: 'Very Confident',
                studyTime: 'Evening',
                challenge: 'Lack of phone for online studying',
                gradient: 'from-cyan-500 to-blue-600',
                emoji: 'üìä'
            },
            {
                id: 10,
                firstName: 'Favour',
                lastName: 'Chidiogo',
                state: 'Enugu',
                city: 'Nsukka',
                category: 'Arts',
                subjects: ['CRS', 'Government', 'Lit-in-English'],
                targetScore: 360,
                institution: 'UNN',
                course: 'Law',
                isRepeating: false,
                confidence: 'Very Confident',
                studyTime: 'Evening',
                challenge: 'Not getting what I\'m reading sometimes',
                gradient: 'from-rose-500 to-pink-600',
                emoji: '‚öñÔ∏è'
            }
        ];

        const sampleMatches = [
            { id: 1, firstName: 'Chi', lastName: 'Nazaa', subjects: ['Government', 'Law'], new: true, gradient: 'from-palm-500 to-teal-600' },
            { id: 2, firstName: 'Ugochukwu', lastName: 'Ikennazor', subjects: ['Physics', 'Biology'], new: true, gradient: 'from-palm-500 to-emerald-600' },
            { id: 3, firstName: 'Ruth', lastName: 'Folaranmi', subjects: ['Economics'], new: false, gradient: 'from-earth-500 to-orange-600' }
        ];

        const sampleConversations = [
            {
                id: 1,
                firstName: 'Chi',
                lastName: 'Nazaa',
                lastMessage: 'Have you covered the JAMB Literature texts? üìö',
                time: '5m ago',
                unread: 2,
                gradient: 'from-palm-500 to-teal-600'
            },
            {
                id: 2,
                firstName: 'Ugochukwu',
                lastName: 'Ikennazor',
                lastMessage: 'The Physics calculations are clearer now!',
                time: '2h ago',
                unread: 0,
                gradient: 'from-palm-500 to-emerald-600'
            },
            {
                id: 3,
                firstName: 'Ruth',
                lastName: 'Folaranmi',
                lastMessage: 'Economics diagrams session tomorrow? üìà',
                time: '5h ago',
                unread: 1,
                gradient: 'from-earth-500 to-orange-600'
            }
        ];

        const resources = [
            { icon: 'üìù', title: 'Past Questions', desc: '10 years of JAMB CBT questions', color: 'palm' },
            { icon: 'üéØ', title: 'Mock Tests', desc: 'Timed practice exams', color: 'earth' },
            { icon: 'üìñ', title: 'Study Notes', desc: 'Condensed topic summaries', color: 'indigo' },
            { icon: 'üé¨', title: 'Video Lessons', desc: 'Expert explanations', color: 'coral' },
            { icon: 'üí°', title: 'Tips & Tricks', desc: 'Score-boosting strategies', color: 'palm' },
        ];

        // Initialize App
        function init() {
            // Dark mode detection
            if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                document.documentElement.classList.add('dark');
            }
            window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
                document.documentElement.classList.toggle('dark', event.matches);
            });

            // Initialize data
            state.profiles = [...sampleProfiles];
            state.matches = [...sampleMatches];
            state.conversations = [...sampleConversations];

            // Populate subject chips
            populateSubjectChips();

            // Score slider
            const scoreSlider = document.getElementById('score-slider');
            const scoreDisplay = document.getElementById('score-display');
            if (scoreSlider) {
                scoreSlider.addEventListener('input', (e) => {
                    scoreDisplay.textContent = e.target.value;
                    state.user.targetScore = parseInt(e.target.value);
                });
            }

            // Show loading then onboarding
            setTimeout(() => {
                document.getElementById('loading-screen').classList.add('hidden');
                document.getElementById('onboarding-screen').classList.remove('hidden');
            }, 2000);
        }

        function populateSubjectChips() {
            const container = document.getElementById('subject-chips');
            if (!container) return;

            container.innerHTML = allSubjects.map(subject => `
                <button type="button" onclick="toggleSubject('${subject}')"
                    class="m3-chip px-3 py-1.5 rounded-full text-xs font-medium border transition-all
                    ${state.selectedSubjects.includes(subject)
                        ? 'bg-palm-500 text-white border-palm-500 selected'
                        : 'bg-white dark:bg-slate-800 text-slate-700 dark:text-slate-300 border-slate-200 dark:border-slate-700 hover:border-palm-300'}"
                    data-subject="${subject}">
                    ${subject}
                </button>
            `).join('');
        }

        function toggleSubject(subject) {
            const idx = state.selectedSubjects.indexOf(subject);
            if (idx > -1) {
                state.selectedSubjects.splice(idx, 1);
            } else if (state.selectedSubjects.length < 4) {
                state.selectedSubjects.push(subject);
            } else {
                showToast('You can only select 4 subjects');
                return;
            }
            populateSubjectChips();
        }

        function selectGoal(goal) {
            state.user.goal = goal;
            document.querySelectorAll('.goal-btn').forEach(btn => {
                btn.classList.remove('border-palm-500', 'border-earth-500', 'bg-palm-50', 'bg-earth-50', 'dark:bg-palm-900/20', 'dark:bg-earth-900/20');
                btn.classList.add('border-slate-200', 'dark:border-slate-700');
            });

            const selectedBtn = document.getElementById(`goal-${goal}`);
            if (goal === 'find-partner') {
                selectedBtn.classList.remove('border-slate-200', 'dark:border-slate-700');
                selectedBtn.classList.add('border-palm-500', 'bg-palm-50', 'dark:bg-palm-900/20');
            } else {
                selectedBtn.classList.remove('border-slate-200', 'dark:border-slate-700');
                selectedBtn.classList.add('border-earth-500', 'bg-earth-50', 'dark:bg-earth-900/20');
            }
        }

        function completeOnboarding() {
            const firstName = document.getElementById('first-name-input').value.trim();
            const lastName = document.getElementById('last-name-input').value.trim();
            const phone = document.getElementById('phone-input').value.trim();
            const selectedState = document.getElementById('state-select').value;
            const category = document.getElementById('category-select').value;
            const institution = document.getElementById('institution-input').value.trim();
            const course = document.getElementById('course-input').value.trim();

            if (!firstName || !lastName || !phone || !selectedState || !category) {
                showToast('Please fill in all required fields');
                return;
            }

            if (state.selectedSubjects.length !== 4) {
                showToast('Please select exactly 4 JAMB subjects');
                return;
            }

            // Save user data
            state.user = {
                ...state.user,
                firstName,
                lastName,
                phone,
                state: selectedState,
                category,
                subjects: [...state.selectedSubjects],
                institution: institution || 'Not specified',
                course: course || 'Not specified'
            };

            document.getElementById('onboarding-screen').classList.add('hidden');
            document.getElementById('main-app').classList.remove('hidden');

            renderCards();
            renderMatches();
            renderConversations();
            renderResources();
            updateProfile();
        }

        // Render Profile Cards
        function renderCards() {
            const container = document.getElementById('card-container');
            container.innerHTML = '';

            if (state.currentCardIndex >= state.profiles.length) {
                document.getElementById('empty-state').classList.remove('hidden');
                document.getElementById('swipe-buttons').classList.add('hidden');
                return;
            }

            document.getElementById('empty-state').classList.add('hidden');
            document.getElementById('swipe-buttons').classList.remove('hidden');

            const cardsToRender = Math.min(3, state.profiles.length - state.currentCardIndex);

            for (let i = cardsToRender - 1; i >= 0; i--) {
                const profile = state.profiles[state.currentCardIndex + i];
                const card = createCard(profile, i);
                container.appendChild(card);
            }

            const topCard = container.querySelector('.swipe-card:last-child');
            if (topCard) {
                setupSwipe(topCard);
            }
        }

        function createCard(profile, stackIndex) {
            const card = document.createElement('div');
            card.className = 'swipe-card absolute w-full m3-surface-3 rounded-3xl overflow-hidden';
            card.style.zIndex = 10 - stackIndex;
            card.style.transform = `translateY(${stackIndex * 10}px) scale(${1 - stackIndex * 0.03})`;
            card.style.opacity = stackIndex === 0 ? 1 : 0.6 - stackIndex * 0.15;

            const scoreClass = profile.targetScore >= 350 ? 'score-excellent' :
                              profile.targetScore >= 300 ? 'score-high' :
                              profile.targetScore >= 250 ? 'score-mid' : 'score-low';

            const categoryColors = {
                'Science': { bg: 'bg-palm-100 dark:bg-palm-900/30', text: 'text-palm-700 dark:text-palm-300', icon: 'üî¨' },
                'Arts': { bg: 'bg-indigo-100 dark:bg-indigo-900/30', text: 'text-indigo-700 dark:text-indigo-300', icon: 'üìñ' },
                'Commercial': { bg: 'bg-earth-100 dark:bg-earth-900/30', text: 'text-earth-700 dark:text-earth-300', icon: 'üíº' }
            };

            const catStyle = categoryColors[profile.category] || categoryColors['Science'];

            card.innerHTML = `
                <!-- Swipe Indicators -->
                <div class="swipe-indicator-left absolute top-6 left-6 z-20 opacity-0 transition-opacity">
                    <div class="px-4 py-2 bg-coral-500 text-white font-bold rounded-xl rotate-[-15deg] text-sm shadow-lg">
                        SKIP
                    </div>
                </div>
                <div class="swipe-indicator-right absolute top-6 right-6 z-20 opacity-0 transition-opacity">
                    <div class="px-4 py-2 bg-palm-500 text-white font-bold rounded-xl rotate-[15deg] text-sm shadow-lg">
                        CONNECT
                    </div>
                </div>
                <div class="swipe-indicator-up absolute top-6 left-1/2 -translate-x-1/2 z-20 opacity-0 transition-opacity">
                    <div class="px-4 py-2 bg-earth-500 text-white font-bold rounded-xl text-sm shadow-lg flex items-center gap-2">
                        <i class="fas fa-bolt"></i> SUPER MATCH
                    </div>
                </div>

                <!-- Header -->
                <div class="h-36 bg-gradient-to-br ${profile.gradient} relative">
                    <div class="absolute inset-0 bg-gradient-to-t from-black/50 via-transparent to-transparent"></div>

                    <!-- Category Badge -->
                    <div class="absolute top-4 left-4">
                        <span class="px-3 py-1.5 ${catStyle.bg} ${catStyle.text} rounded-full text-xs font-semibold backdrop-blur-sm">
                            ${catStyle.icon} ${profile.category}
                        </span>
                    </div>

                    <!-- Score Badge -->
                    <div class="absolute top-4 right-4">
                        <div class="px-3 py-1.5 ${scoreClass} text-white rounded-full text-xs font-bold flex items-center gap-1.5 shadow-lg">
                            üéØ ${profile.targetScore}
                        </div>
                    </div>

                    <!-- Avatar & Name -->
                    <div class="absolute bottom-4 left-5 flex items-end gap-4">
                        <div class="w-16 h-16 rounded-2xl bg-white/20 backdrop-blur-sm flex items-center justify-center text-3xl shadow-lg border-2 border-white/30">
                            ${profile.emoji}
                        </div>
                        <div class="pb-1">
                            <h3 class="text-xl font-bold text-white mb-0.5">${profile.firstName} ${profile.lastName.charAt(0)}.</h3>
                            <div class="flex items-center text-white/90 text-xs gap-1.5">
                                <i class="fas fa-map-marker-alt"></i>
                                <span>${profile.city}, ${profile.state}</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Card Body -->
                <div class="p-5">
                    <!-- Institution & Course -->
                    <div class="mb-4">
                        <div class="flex items-center gap-2 text-sm text-slate-700 dark:text-slate-300 mb-1">
                            <i class="fas fa-university text-palm-500 text-xs"></i>
                            <span class="font-medium">${profile.institution}</span>
                        </div>
                        <div class="flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400">
                            <i class="fas fa-graduation-cap text-earth-500 text-xs"></i>
                            <span>${profile.course}</span>
                        </div>
                    </div>

                    <!-- Subjects -->
                    <div class="mb-4">
                        <p class="text-xs text-slate-500 dark:text-slate-400 mb-2 font-medium uppercase tracking-wide">JAMB Subjects</p>
                        <div class="flex flex-wrap gap-1.5">
                            <span class="px-2.5 py-1 bg-slate-100 dark:bg-slate-700 rounded-lg text-xs text-slate-700 dark:text-slate-300 font-medium">English</span>
                            ${profile.subjects.map(s => `
                                <span class="px-2.5 py-1 bg-slate-100 dark:bg-slate-700 rounded-lg text-xs text-slate-700 dark:text-slate-300 font-medium">${s}</span>
                            `).join('')}
                        </div>
                    </div>

                    <!-- Status Tags -->
                    <div class="flex flex-wrap gap-2 mb-4">
                        ${profile.isRepeating ? `
                            <span class="px-2.5 py-1 bg-coral-50 dark:bg-coral-900/20 text-coral-600 dark:text-coral-400 rounded-lg text-xs font-medium">
                                üîÑ Repeating
                            </span>
                        ` : `
                            <span class="px-2.5 py-1 bg-palm-50 dark:bg-palm-900/20 text-palm-600 dark:text-palm-400 rounded-lg text-xs font-medium">
                                ‚ú® First Timer
                            </span>
                        `}
                        <span class="px-2.5 py-1 bg-indigo-50 dark:bg-indigo-900/20 text-indigo-600 dark:text-indigo-400 rounded-lg text-xs font-medium">
                            ${profile.confidence === 'Very Confident' ? 'üí™ Confident' : 'ü§î Preparing'}
                        </span>
                        <span class="px-2.5 py-1 bg-earth-50 dark:bg-earth-900/20 text-earth-600 dark:text-earth-400 rounded-lg text-xs font-medium">
                            üïê ${profile.studyTime}
                        </span>
                    </div>

                    <!-- Challenge -->
                    ${profile.challenge ? `
                        <div class="p-3 rounded-xl bg-slate-50 dark:bg-slate-800/50 border border-slate-100 dark:border-slate-700">
                            <p class="text-xs text-slate-500 dark:text-slate-400 mb-1 font-medium">Current Challenge:</p>
                            <p class="text-sm text-slate-700 dark:text-slate-300 italic">"${profile.challenge}"</p>
                        </div>
                    ` : ''}

                    <!-- Quick Connect -->
                    <button onclick="event.stopPropagation(); quickMatch(${profile.id})"
                        class="mt-4 w-full py-3 gradient-primary text-white font-semibold rounded-xl text-sm flex items-center justify-center gap-2 shadow-md m3-fab">
                        <i class="fas fa-bolt"></i>
                        <span>Connect Now</span>
                    </button>
                </div>
            `;

            return card;
        }

        // Swipe functionality
        function setupSwipe(card) {
            let startX = 0, startY = 0, currentX = 0, currentY = 0, isDragging = false;

            const onStart = (e) => {
                isDragging = true;
                card.classList.add('dragging');
                const point = e.touches ? e.touches[0] : e;
                startX = point.clientX;
                startY = point.clientY;
            };

            const onMove = (e) => {
                if (!isDragging) return;
                e.preventDefault();

                const point = e.touches ? e.touches[0] : e;
                currentX = point.clientX - startX;
                currentY = point.clientY - startY;

                const rotation = currentX * 0.04;
                card.style.transform = `translate(${currentX}px, ${currentY}px) rotate(${rotation}deg)`;

                const leftIndicator = card.querySelector('.swipe-indicator-left');
                const rightIndicator = card.querySelector('.swipe-indicator-right');
                const upIndicator = card.querySelector('.swipe-indicator-up');

                if (currentX < -50) {
                    leftIndicator.style.opacity = Math.min(1, (-currentX - 50) / 80);
                    rightIndicator.style.opacity = 0;
                    upIndicator.style.opacity = 0;
                } else if (currentX > 50) {
                    rightIndicator.style.opacity = Math.min(1, (currentX - 50) / 80);
                    leftIndicator.style.opacity = 0;
                    upIndicator.style.opacity = 0;
                } else if (currentY < -50) {
                    upIndicator.style.opacity = Math.min(1, (-currentY - 50) / 80);
                    leftIndicator.style.opacity = 0;
                    rightIndicator.style.opacity = 0;
                } else {
                    leftIndicator.style.opacity = 0;
                    rightIndicator.style.opacity = 0;
                    upIndicator.style.opacity = 0;
                }
            };

            const onEnd = () => {
                if (!isDragging) return;
                isDragging = false;
                card.classList.remove('dragging');

                const threshold = 100;

                if (currentX < -threshold) {
                    animateSwipe(card, 'left');
                } else if (currentX > threshold) {
                    animateSwipe(card, 'right');
                } else if (currentY < -threshold) {
                    animateSwipe(card, 'up');
                } else {
                    card.style.transition = 'transform 0.3s ease';
                    card.style.transform = '';
                    card.querySelector('.swipe-indicator-left').style.opacity = 0;
                    card.querySelector('.swipe-indicator-right').style.opacity = 0;
                    card.querySelector('.swipe-indicator-up').style.opacity = 0;
                    setTimeout(() => card.style.transition = '', 300);
                }

                currentX = 0;
                currentY = 0;
            };

            card.addEventListener('mousedown', onStart);
            card.addEventListener('mousemove', onMove);
            card.addEventListener('mouseup', onEnd);
            card.addEventListener('mouseleave', onEnd);
            card.addEventListener('touchstart', onStart, { passive: true });
            card.addEventListener('touchmove', onMove, { passive: false });
            card.addEventListener('touchend', onEnd);
        }

        function animateSwipe(card, direction) {
            const animations = { left: 'swipe-left', right: 'swipe-right', up: 'swipe-up' };
            card.style.animation = `${animations[direction]} 0.5s cubic-bezier(0.16, 1, 0.3, 1) forwards`;

            setTimeout(() => {
                if (direction === 'right' || direction === 'up') {
                    showMatchModal(state.profiles[state.currentCardIndex]);
                }
                state.currentCardIndex++;
                renderCards();
            }, 450);
        }

        function swipeCard(direction) {
            const container = document.getElementById('card-container');
            const topCard = container.querySelector('.swipe-card:last-child');
            if (topCard) animateSwipe(topCard, direction);
        }

        function resetCards() {
            state.currentCardIndex = 0;
            renderCards();
        }

        function quickMatch(profileId) {
            const profile = state.profiles.find(p => p.id === profileId);
            if (profile) {
                showMatchModal(profile);
                state.currentCardIndex++;
                setTimeout(() => renderCards(), 500);
            }
        }

        // Match Modal
        function showMatchModal(profile) {
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 z-50 flex items-center justify-center p-4 animate-fade-in';
            modal.id = 'match-modal';
            modal.innerHTML = `
                <div class="absolute inset-0 bg-black/60 backdrop-blur-sm" onclick="closeModal('match-modal')"></div>
                <div class="relative bg-white dark:bg-slate-800 rounded-3xl shadow-2xl max-w-sm w-full overflow-hidden animate-scale-in">
                    <!-- Celebration Header -->
                    <div class="h-32 bg-gradient-to-br ${profile.gradient} relative flex items-center justify-center overflow-hidden">
                        <div class="text-center animate-celebrate">
                            <div class="text-5xl mb-2">üéâ</div>
                            <h3 class="text-xl font-bold text-white font-display">Study Match!</h3>
                        </div>
                        <!-- Confetti effect -->
                        <div class="absolute inset-0 pointer-events-none">
                            ${Array(12).fill(0).map((_, i) => `
                                <div class="absolute w-2 h-2 rounded-full" style="
                                    left: ${Math.random() * 100}%;
                                    top: ${Math.random() * 100}%;
                                    background: ${['#16a34a', '#eab308', '#f43f5e', '#6366f1', '#ffffff'][Math.floor(Math.random() * 5)]};
                                    animation: celebrate 1s ease-out ${Math.random() * 0.5}s forwards;
                                "></div>
                            `).join('')}
                        </div>
                    </div>

                    <div class="p-6 text-center">
                        <!-- Profiles -->
                        <div class="flex items-center justify-center -space-x-3 mb-4">
                            <div class="w-16 h-16 rounded-2xl border-3 border-white dark:border-slate-800 gradient-primary flex items-center justify-center shadow-lg">
                                <span class="text-2xl text-white font-bold">${state.user.firstName.charAt(0)}</span>
                            </div>
                            <div class="w-8 h-8 rounded-full bg-white dark:bg-slate-700 flex items-center justify-center shadow-md z-10">
                                <i class="fas fa-handshake text-palm-500 text-sm"></i>
                            </div>
                            <div class="w-16 h-16 rounded-2xl border-3 border-white dark:border-slate-800 bg-gradient-to-br ${profile.gradient} flex items-center justify-center shadow-lg">
                                <span class="text-2xl">${profile.emoji}</span>
                            </div>
                        </div>

                        <h2 class="text-xl font-bold text-slate-900 dark:text-white mb-1">
                            You & ${profile.firstName} matched!
                        </h2>
                        <p class="text-slate-500 dark:text-slate-400 text-sm mb-6">
                            Both targeting ${profile.category} subjects
                        </p>

                        <!-- Common Ground -->
                        <div class="p-4 rounded-xl bg-palm-50 dark:bg-palm-900/20 mb-6">
                            <p class="text-sm font-medium text-palm-700 dark:text-palm-300 mb-2">üéØ Common Goals</p>
                            <div class="flex flex-wrap gap-1.5 justify-center">
                                ${profile.subjects.slice(0, 2).map(s => `
                                    <span class="px-2.5 py-1 bg-white dark:bg-slate-800 rounded-lg text-xs text-palm-700 dark:text-palm-300 font-medium">${s}</span>
                                `).join('')}
                            </div>
                        </div>

                        <!-- Actions -->
                        <div class="space-y-3">
                            <button onclick="startChat(${profile.id})" class="w-full py-3.5 gradient-primary text-white font-semibold rounded-xl flex items-center justify-center gap-2 shadow-lg m3-fab">
                                <i class="fab fa-whatsapp"></i>
                                <span>Start Study Chat</span>
                            </button>

                            <button onclick="closeModal('match-modal')" class="text-palm-600 dark:text-palm-400 font-medium py-2 hover:underline text-sm">
                                Continue Discovering
                            </button>
                        </div>
                    </div>
                </div>
            `;

            document.getElementById('modals-container').appendChild(modal);
        }

        function startChat(profileId) {
            closeModal('match-modal');
            showToast('Opening WhatsApp chat...');
        }

        // Render functions
        function renderMatches() {
            const container = document.getElementById('new-matches-container');
            container.innerHTML = state.matches.filter(m => m.new).map(match => `
                <button onclick="showToast('Opening chat with ${match.firstName}...')" class="flex-shrink-0 text-center group">
                    <div class="w-14 h-14 rounded-xl bg-gradient-to-br ${match.gradient} flex items-center justify-center mb-2 group-hover:scale-110 transition-transform shadow-md border-2 border-white dark:border-slate-800">
                        <span class="text-lg font-bold text-white">${match.firstName.charAt(0)}</span>
                    </div>
                    <p class="text-xs font-medium text-slate-900 dark:text-white truncate w-14">${match.firstName}</p>
                </button>
            `).join('');
        }

        function renderConversations() {
            const container = document.getElementById('conversations-container');
            container.innerHTML = state.conversations.map(conv => `
                <button class="w-full flex items-center gap-4 p-4 m3-surface-2 rounded-2xl hover:shadow-md transition-all text-left">
                    <div class="w-12 h-12 rounded-xl bg-gradient-to-br ${conv.gradient} flex items-center justify-center flex-shrink-0 shadow-md">
                        <span class="text-lg font-bold text-white">${conv.firstName.charAt(0)}</span>
                    </div>
                    <div class="flex-1 min-w-0">
                        <div class="flex items-center justify-between mb-1">
                            <h4 class="font-semibold text-slate-900 dark:text-white">${conv.firstName} ${conv.lastName.charAt(0)}.</h4>
                            <span class="text-xs text-slate-500 dark:text-slate-400">${conv.time}</span>
                        </div>
                        <p class="text-sm text-slate-600 dark:text-slate-400 truncate">${conv.lastMessage}</p>
                    </div>
                    ${conv.unread > 0 ? `
                        <div class="w-5 h-5 bg-palm-500 text-white text-xs font-bold rounded-full flex items-center justify-center flex-shrink-0">
                            ${conv.unread}
                        </div>
                    ` : ''}
                </button>
            `).join('');
        }

        function renderResources() {
            const container = document.getElementById('resources-list');
            container.innerHTML = resources.map(res => `
                <button class="w-full flex items-center gap-4 p-4 m3-surface-2 rounded-2xl hover:shadow-md transition-all text-left">
                    <div class="w-12 h-12 rounded-xl bg-${res.color}-100 dark:bg-${res.color}-900/30 flex items-center justify-center flex-shrink-0">
                        <span class="text-2xl">${res.icon}</span>
                    </div>
                    <div class="flex-1">
                        <h4 class="font-semibold text-slate-900 dark:text-white">${res.title}</h4>
                        <p class="text-sm text-slate-500 dark:text-slate-400">${res.desc}</p>
                    </div>
                    <i class="fas fa-chevron-right text-slate-400"></i>
                </button>
            `).join('');
        }

        function updateProfile() {
            document.getElementById('profile-name').textContent = `${state.user.firstName} ${state.user.lastName}`;
            document.getElementById('profile-location').textContent = `${state.user.state} State`;
            document.getElementById('profile-initial').textContent = state.user.firstName.charAt(0);
            document.getElementById('profile-target').textContent = state.user.targetScore;
            document.getElementById('profile-category').textContent = state.user.category;
            document.getElementById('profile-institution').textContent = state.user.institution;
            document.getElementById('profile-course').textContent = state.user.course;

            const subjectsContainer = document.getElementById('profile-subjects');
            subjectsContainer.innerHTML = state.user.subjects.map((s, i) => `
                <span class="px-3 py-1.5 ${i === 0 ? 'gradient-primary text-white' : 'bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300'} rounded-full text-sm font-medium">
                    ${s}
                </span>
            `).join('');
        }

        // View navigation
        function showView(viewName) {
            state.currentView = viewName;

            ['discovery-view', 'matches-view', 'resources-view', 'profile-view'].forEach(v => {
                document.getElementById(v).classList.add('hidden');
            });

            const header = document.getElementById('main-header');
            const subjectTabs = document.getElementById('subject-tabs');
            const swipeButtons = document.getElementById('swipe-buttons');

            document.querySelectorAll('.nav-rail-item').forEach(item => {
                item.classList.remove('active', 'text-palm-600', 'dark:text-palm-400');
                item.classList.add('text-slate-500', 'dark:text-slate-400');
            });

            const titles = {
                'discovery': { title: 'Discover', subtitle: 'Find your study squad' },
                'matches': { title: 'Study Squad', subtitle: 'Your connections' },
                'resources': { title: 'Resources', subtitle: 'JAMB prep materials' },
                'profile': { title: 'Profile', subtitle: 'Your account' }
            };

            switch(viewName) {
                case 'discovery':
                    document.getElementById('discovery-view').classList.remove('hidden');
                    subjectTabs.classList.remove('hidden');
                    swipeButtons.classList.remove('hidden');
                    header.classList.remove('hidden');
                    break;
                case 'matches':
                    document.getElementById('matches-view').classList.remove('hidden');
                    subjectTabs.classList.add('hidden');
                    swipeButtons.classList.add('hidden');
                    header.classList.remove('hidden');
                    break;
                case 'resources':
                    document.getElementById('resources-view').classList.remove('hidden');
                    subjectTabs.classList.add('hidden');
                    swipeButtons.classList.add('hidden');
                    header.classList.remove('hidden');
                    break;
                case 'profile':
                    document.getElementById('profile-view').classList.remove('hidden');
                    header.classList.add('hidden');
                    swipeButtons.classList.add('hidden');
                    break;
            }

            document.getElementById('header-title').textContent = titles[viewName].title;
            document.getElementById('header-subtitle').textContent = titles[viewName].subtitle;

            const navItems = document.querySelectorAll('.nav-rail-item');
            const viewIndex = ['discovery', 'matches', 'resources', 'profile'].indexOf(viewName);
            if (viewIndex >= 0 && navItems[viewIndex]) {
                navItems[viewIndex].classList.add('active', 'text-palm-600', 'dark:text-palm-400');
                navItems[viewIndex].classList.remove('text-slate-500', 'dark:text-slate-400');
            }
        }

        // Utility functions
        function showToast(message) {
            const toast = document.createElement('div');
            toast.className = 'fixed bottom-28 left-1/2 -translate-x-1/2 px-5 py-3 bg-slate-900 dark:bg-white text-white dark:text-slate-900 rounded-xl shadow-lg z-50 animate-slide-up text-sm font-medium';
            toast.textContent = message;
            document.body.appendChild(toast);
            setTimeout(() => {
                toast.style.opacity = '0';
                toast.style.transform = 'translateX(-50%) translateY(20px)';
                toast.style.transition = 'all 0.3s ease';
                setTimeout(() => toast.remove(), 300);
            }, 2500);
        }

        function closeModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.style.opacity = '0';
                modal.style.transition = 'opacity 0.2s ease';
                setTimeout(() => modal.remove(), 200);
            }
        }

        function showFilters() {
            showToast('Filters coming soon!');
        }

        function showNotifications() {
            showToast('5 new study partner requests!');
        }

        function editProfile() {
            showToast('Profile editing coming soon!');
        }

        // Subject tab filtering
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('subject-tab')) {
                document.querySelectorAll('.subject-tab').forEach(tab => {
                    tab.classList.remove('gradient-primary', 'text-white', 'shadow-sm');
                    tab.classList.add('bg-white', 'dark:bg-slate-800', 'text-slate-700', 'dark:text-slate-300', 'border', 'border-slate-200', 'dark:border-slate-700');
                });
                e.target.classList.remove('bg-white', 'dark:bg-slate-800', 'text-slate-700', 'dark:text-slate-300', 'border', 'border-slate-200', 'dark:border-slate-700');
                e.target.classList.add('gradient-primary', 'text-white', 'shadow-sm');
            }
        });

        // Initialize
        init();
    </script>
</body>
</html>

