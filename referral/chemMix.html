<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ChemLab Quest - Interactive Chemistry Game</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        'poppins': ['Poppins', 'sans-serif']
                    }
                }
            }
        }
    </script>
    <style>
        * {
            font-family: 'Poppins', sans-serif;
        }

        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            overflow-x: hidden;
        }

        body.dark {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
        }

        .game-container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
        }

        .dark .game-container {
            background: rgba(30, 30, 46, 0.95);
        }

        .element-card {
            cursor: grab;
            transition: all 0.3s ease;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            user-select: none;
        }

        .element-card:active {
            cursor: grabbing;
        }

        .element-card:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.5);
        }

        .beaker {
            position: relative;
            background: linear-gradient(180deg, transparent 0%, transparent 20%, rgba(255,255,255,0.2) 20%, rgba(255,255,255,0.3) 100%);
            border: 4px solid #333;
            border-radius: 0 0 20px 20px;
            transition: all 0.5s ease;
        }

        .beaker-liquid {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(180deg, rgba(100, 200, 255, 0.6) 0%, rgba(50, 150, 255, 0.8) 100%);
            border-radius: 0 0 16px 16px;
            transition: all 0.5s ease;
        }

        .bubble {
            position: absolute;
            background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.8), rgba(255,255,255,0.3));
            border-radius: 50%;
            animation: rise 2s infinite ease-in;
        }

        @keyframes rise {
            0% {
                bottom: 0;
                opacity: 0;
            }
            50% {
                opacity: 1;
            }
            100% {
                bottom: 100%;
                opacity: 0;
            }
        }

        .reaction-flash {
            animation: flash 0.5s ease;
        }

        @keyframes flash {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; transform: scale(1.1); }
        }

        .particle {
            position: absolute;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            pointer-events: none;
            animation: explode 1s ease-out forwards;
        }

        @keyframes explode {
            0% {
                transform: translate(0, 0) scale(1);
                opacity: 1;
            }
            100% {
                transform: translate(var(--tx), var(--ty)) scale(0);
                opacity: 0;
            }
        }

        .mission-card {
            transition: all 0.3s ease;
            border-left: 4px solid #667eea;
        }

        .mission-card:hover {
            transform: translateX(5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .mission-complete {
            border-left-color: #10b981;
            opacity: 0.7;
        }

        .score-popup {
            animation: scoreFloat 1s ease-out forwards;
        }

        @keyframes scoreFloat {
            0% {
                transform: translateY(0) scale(1);
                opacity: 1;
            }
            100% {
                transform: translateY(-50px) scale(1.5);
                opacity: 0;
            }
        }

        .shake {
            animation: shake 0.5s ease;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .compound-visual {
            display: inline-flex;
            align-items: center;
            gap: 5px;
        }

        .atom-sphere {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
        }

        .bond {
            width: 20px;
            height: 3px;
            background: #666;
        }

        .modal-overlay {
            backdrop-filter: blur(10px);
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .drop-zone {
            border: 3px dashed #667eea;
            background: rgba(102, 126, 234, 0.1);
        }

        .drop-zone.drag-over {
            border-color: #10b981;
            background: rgba(16, 185, 129, 0.2);
        }
    </style>
</head>
<body class="min-h-screen">
    <!-- Game Header -->
    <div class="bg-gradient-to-r from-purple-600 to-indigo-600 text-white py-4 px-6 shadow-lg">
        <div class="max-w-7xl mx-auto flex justify-between items-center">
            <div class="flex items-center gap-4">
                <div class="text-4xl">üß™</div>
                <div>
                    <h1 class="text-2xl font-bold">ChemLab Quest</h1>
                    <p class="text-sm opacity-90">Mix, React, Discover!</p>
                </div>
            </div>
            <div class="flex items-center gap-6">
                <div class="text-center">
                    <div class="text-2xl font-bold" id="score">0</div>
                    <div class="text-xs opacity-90">Score</div>
                </div>
                <div class="text-center">
                    <div class="text-2xl font-bold" id="level">1</div>
                    <div class="text-xs opacity-90">Level</div>
                </div>
                <div class="text-center">
                    <div class="text-2xl font-bold"><span id="missionsComplete">0</span>/<span id="missionsTotal">5</span></div>
                    <div class="text-xs opacity-90">Missions</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Game Area -->
    <div class="max-w-7xl mx-auto p-4 md:p-6">
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            <!-- Left Panel: Elements Shelf -->
            <div class="lg:col-span-1">
                <div class="game-container rounded-xl shadow-2xl p-6">
                    <h2 class="text-xl font-bold text-gray-800 dark:text-white mb-4 flex items-center gap-2">
                        <span>üß¨</span> Element Shelf
                    </h2>
                    <p class="text-sm text-gray-600 dark:text-gray-400 mb-4">Click elements to add to beaker!</p>
                    <div id="elementShelf" class="grid grid-cols-3 gap-3">
                        <!-- Elements will be generated here -->
                    </div>
                </div>

                <!-- Missions Panel -->
                <div class="game-container rounded-xl shadow-2xl p-6 mt-6">
                    <h2 class="text-xl font-bold text-gray-800 dark:text-white mb-4 flex items-center gap-2">
                        <span>üéØ</span> Missions
                    </h2>
                    <div id="missionsList" class="space-y-3">
                        <!-- Missions will be generated here -->
                    </div>
                </div>
            </div>

            <!-- Center Panel: Lab Station -->
            <div class="lg:col-span-2">
                <div class="game-container rounded-xl shadow-2xl p-6">
                    <h2 class="text-xl font-bold text-gray-800 dark:text-white mb-6 text-center flex items-center justify-center gap-2">
                        <span>‚öóÔ∏è</span> Your Lab Station
                    </h2>

                    <!-- Beaker Area -->
                    <div class="relative mb-6">
                        <div class="beaker drop-zone w-64 h-80 mx-auto relative" id="beaker">
                            <div class="beaker-liquid" id="beakerLiquid" style="height: 0%;">
                                <!-- Bubbles will be added here -->
                            </div>
                            <div class="absolute top-4 left-0 right-0 text-center text-white font-bold text-sm opacity-80">
                                Mix Elements Here!
                            </div>
                        </div>
                        <div class="text-center mt-4">
                            <div class="text-lg font-semibold text-gray-700 dark:text-gray-300">Current Formula:</div>
                            <div id="currentFormula" class="text-3xl font-bold text-purple-600 dark:text-purple-400 mt-2">Empty</div>
                        </div>
                    </div>

                    <!-- Elements in Beaker -->
                    <div class="mb-6">
                        <h3 class="text-sm font-semibold text-gray-600 dark:text-gray-400 mb-2">Elements in Beaker:</h3>
                        <div id="elementsInBeaker" class="flex flex-wrap gap-2 min-h-[40px] p-3 bg-gray-100 dark:bg-gray-700 rounded-lg">
                            <span class="text-gray-400 dark:text-gray-500 text-sm">No elements yet...</span>
                        </div>
                    </div>

                    <!-- Action Buttons -->
                    <div class="flex gap-3">
                        <button onclick="reactElements()" class="flex-1 bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 text-white py-4 px-6 rounded-xl font-bold text-lg shadow-lg transform transition hover:scale-105">
                            ‚ö° React!
                        </button>
                        <button onclick="clearBeaker()" class="flex-1 bg-gradient-to-r from-red-500 to-pink-500 hover:from-red-600 hover:to-pink-600 text-white py-4 px-6 rounded-xl font-bold text-lg shadow-lg transform transition hover:scale-105">
                            üóëÔ∏è Clear
                        </button>
                    </div>

                    <!-- Result Display -->
                    <div id="resultDisplay" class="mt-6 hidden">
                        <!-- Results will appear here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Success Modal -->
    <div id="successModal" class="hidden fixed inset-0 bg-black bg-opacity-50 modal-overlay flex items-center justify-center p-4 z-50">
        <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-md w-full p-8 text-center transform transition">
            <div class="text-6xl mb-4">üéâ</div>
            <h2 class="text-3xl font-bold text-gray-800 dark:text-white mb-2" id="modalTitle">Success!</h2>
            <p class="text-gray-600 dark:text-gray-400 mb-6" id="modalMessage"></p>
            <div class="text-5xl font-bold text-purple-600 dark:text-purple-400 mb-6" id="modalPoints"></div>
            <button onclick="closeSuccessModal()" class="bg-gradient-to-r from-purple-500 to-indigo-500 text-white py-3 px-8 rounded-xl font-bold text-lg shadow-lg hover:shadow-xl transform transition hover:scale-105">
                Continue
            </button>
        </div>
    </div>

    <script>
        // Dark mode
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            document.documentElement.classList.add('dark');
        }
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
            if (event.matches) {
                document.documentElement.classList.add('dark');
            } else {
                document.documentElement.classList.remove('dark');
            }
        });

        // Game State
        let gameState = {
            score: 0,
            level: 1,
            elementsInBeaker: {},
            missions: [
                { id: 1, name: "Create Water (H‚ÇÇO)", formula: "H2O", reward: 100, complete: false },
                { id: 2, name: "Create Carbon Dioxide (CO‚ÇÇ)", formula: "CO2", reward: 150, complete: false },
                { id: 3, name: "Create Methane (CH‚ÇÑ)", formula: "CH4", reward: 200, complete: false },
                { id: 4, name: "Create Ammonia (NH‚ÇÉ)", formula: "NH3", reward: 150, complete: false },
                { id: 5, name: "Create Sulfuric Acid (H‚ÇÇSO‚ÇÑ)", formula: "H2SO4", reward: 300, complete: false }
            ]
        };

        // Element Data
        const elements = [
            { symbol: 'H', name: 'Hydrogen', color: '#ff6b6b' },
            { symbol: 'C', name: 'Carbon', color: '#4ecdc4' },
            { symbol: 'N', name: 'Nitrogen', color: '#45b7d1' },
            { symbol: 'O', name: 'Oxygen', color: '#f7b731' },
            { symbol: 'S', name: 'Sulfur', color: '#fed330' },
            { symbol: 'Cl', name: 'Chlorine', color: '#26de81' },
            { symbol: 'Na', name: 'Sodium', color: '#fc5c65' },
            { symbol: 'Ca', name: 'Calcium', color: '#fd9644' },
            { symbol: 'Fe', name: 'Iron', color: '#a55eea' }
        ];

        // Compound Database
        const compounds = {
            'H2O': { name: 'Water', color: '#4facfe', points: 100, emoji: 'üíß' },
            'CO2': { name: 'Carbon Dioxide', color: '#b8b8b8', points: 150, emoji: 'üí®' },
            'CH4': { name: 'Methane', color: '#fff3cd', points: 200, emoji: 'üî•' },
            'NH3': { name: 'Ammonia', color: '#d4edda', points: 150, emoji: 'üß™' },
            'H2SO4': { name: 'Sulfuric Acid', color: '#f8d7da', points: 300, emoji: '‚öóÔ∏è' },
            'NaCl': { name: 'Salt', color: '#ffffff', points: 100, emoji: 'üßÇ' },
            'CaCO3': { name: 'Calcium Carbonate', color: '#f0f0f0', points: 200, emoji: 'ü™®' },
            'HCl': { name: 'Hydrochloric Acid', color: '#fff9e6', points: 120, emoji: 'üß™' },
            'H2': { name: 'Hydrogen Gas', color: '#ffe6e6', points: 50, emoji: 'üí®' },
            'O2': { name: 'Oxygen Gas', color: '#e6f3ff', points: 50, emoji: 'üí®' },
            'N2': { name: 'Nitrogen Gas', color: '#e6f9ff', points: 50, emoji: 'üí®' }
        };

        // Initialize Game
        function initGame() {
            renderElementShelf();
            renderMissions();
            updateDisplay();
        }

        // Render Element Shelf
        function renderElementShelf() {
            const shelf = document.getElementById('elementShelf');
            shelf.innerHTML = elements.map(elem => `
                <div class="element-card text-white rounded-lg p-3 shadow-lg text-center"
                     style="background: ${elem.color};"
                     onclick="addElement('${elem.symbol}')">
                    <div class="text-2xl font-bold">${elem.symbol}</div>
                    <div class="text-xs opacity-90 mt-1">${elem.name}</div>
                </div>
            `).join('');
        }

        // Render Missions
        function renderMissions() {
            const list = document.getElementById('missionsList');
            list.innerHTML = gameState.missions.map(mission => `
                <div class="mission-card ${mission.complete ? 'mission-complete' : ''} bg-white dark:bg-gray-700 p-4 rounded-lg shadow">
                    <div class="flex justify-between items-center">
                        <div class="flex-1">
                            <div class="font-semibold text-gray-800 dark:text-white">${mission.name}</div>
                            <div class="text-sm text-purple-600 dark:text-purple-400 mt-1">+${mission.reward} points</div>
                        </div>
                        <div class="text-2xl">${mission.complete ? '‚úÖ' : '‚≠ï'}</div>
                    </div>
                </div>
            `).join('');

            const complete = gameState.missions.filter(m => m.complete).length;
            document.getElementById('missionsComplete').textContent = complete;
            document.getElementById('missionsTotal').textContent = gameState.missions.length;
        }

        // Add Element to Beaker
        function addElement(symbol) {
            gameState.elementsInBeaker[symbol] = (gameState.elementsInBeaker[symbol] || 0) + 1;
            updateBeakerDisplay();
            playAddAnimation(symbol);
            updateLiquidLevel();
        }

        // Update Beaker Display
        function updateBeakerDisplay() {
            const container = document.getElementById('elementsInBeaker');
            const elements = Object.entries(gameState.elementsInBeaker);

            if (elements.length === 0) {
                container.innerHTML = '<span class="text-gray-400 dark:text-gray-500 text-sm">No elements yet...</span>';
            } else {
                container.innerHTML = elements.map(([symbol, count]) => {
                    const elem = getElement(symbol);
                    return `
                        <div class="inline-flex items-center gap-2 px-3 py-2 rounded-lg text-white font-bold shadow"
                             style="background: ${elem.color};">
                            <span class="text-lg">${symbol}</span>
                            ${count > 1 ? `<span class="text-sm">√ó${count}</span>` : ''}
                            <button onclick="removeElement('${symbol}')"
                                    class="ml-1 hover:bg-white hover:bg-opacity-20 rounded px-2 py-1 text-sm">√ó</button>
                        </div>
                    `;
                }).join('');
            }

            updateCurrentFormula();
        }

        // Update Current Formula Display
        function updateCurrentFormula() {
            const formula = getFormulaFromElements();
            document.getElementById('currentFormula').textContent = formula || 'Empty';
        }

        // Get Formula from Elements
        function getFormulaFromElements() {
            const entries = Object.entries(gameState.elementsInBeaker).sort();
            if (entries.length === 0) return '';

            return entries.map(([symbol, count]) =>
                symbol + (count > 1 ? count : '')
            ).join('');
        }

        // Remove Element
        function removeElement(symbol) {
            if (gameState.elementsInBeaker[symbol] > 1) {
                gameState.elementsInBeaker[symbol]--;
            } else {
                delete gameState.elementsInBeaker[symbol];
            }
            updateBeakerDisplay();
            updateLiquidLevel();
        }

        // Clear Beaker
        function clearBeaker() {
            gameState.elementsInBeaker = {};
            updateBeakerDisplay();
            updateLiquidLevel();
            document.getElementById('resultDisplay').classList.add('hidden');

            const beaker = document.getElementById('beaker');
            beaker.classList.add('shake');
            setTimeout(() => beaker.classList.remove('shake'), 500);
        }

        // React Elements
        function reactElements() {
            const formula = getFormulaFromElements();

            if (!formula) {
                showError('Add some elements first!');
                return;
            }

            const compound = compounds[formula];

            if (compound) {
                showReaction(compound, formula);
                checkMissions(formula);
                addScore(compound.points);
            } else {
                showError('No known compound! Try a different combination.');
                createExplosion();
            }
        }

        // Show Reaction
        function showReaction(compound, formula) {
            const resultDisplay = document.getElementById('resultDisplay');
            const liquid = document.getElementById('beakerLiquid');

            // Flash effect
            liquid.style.background = `linear-gradient(180deg, ${compound.color}aa 0%, ${compound.color} 100%)`;

            const beaker = document.getElementById('beaker');
            beaker.classList.add('reaction-flash');
            setTimeout(() => beaker.classList.remove('reaction-flash'), 500);

            // Create bubbles
            createBubbles();

            // Show result
            resultDisplay.innerHTML = `
                <div class="bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900 dark:to-emerald-900 p-6 rounded-xl shadow-lg border-2 border-green-300 dark:border-green-700">
                    <div class="text-center">
                        <div class="text-6xl mb-3">${compound.emoji}</div>
                        <h3 class="text-2xl font-bold text-gray-800 dark:text-white mb-2">${compound.name}</h3>
                        <div class="text-lg text-gray-600 dark:text-gray-300 mb-3">Formula: ${formula}</div>
                        <div class="text-3xl font-bold text-green-600 dark:text-green-400">+${compound.points} points! üéâ</div>
                    </div>
                </div>
            `;
            resultDisplay.classList.remove('hidden');

            // Visual compound representation
            setTimeout(() => {
                resultDisplay.innerHTML += `
                    <div class="mt-4 text-center">
                        <div class="text-sm font-semibold text-gray-600 dark:text-gray-400 mb-2">Molecular Structure:</div>
                        ${renderMolecularStructure(formula)}
                    </div>
                `;
            }, 300);
        }

        // Render Molecular Structure
        function renderMolecularStructure(formula) {
            const parsed = parseFormula(formula);
            let html = '<div class="compound-visual flex items-center justify-center flex-wrap gap-2">';

            for (let [symbol, count] of Object.entries(parsed)) {
                const elem = getElement(symbol);
                for (let i = 0; i < Math.min(count, 6); i++) {
                    html += `
                        <div class="atom-sphere" style="background: ${elem.color}; color: white;">
                            ${symbol}
                        </div>
                    `;
                    if (i < count - 1 && i < 5) {
                        html += '<div class="bond"></div>';
                    }
                }
                if (count > 6) {
                    html += '<span class="text-gray-600">...</span>';
                }
            }

            html += '</div>';
            return html;
        }

        // Parse Formula
        function parseFormula(formula) {
            const result = {};
            const regex = /([A-Z][a-z]?)(\d*)/g;
            let match;

            while ((match = regex.exec(formula)) !== null) {
                if (match[1]) {
                    const element = match[1];
                    const count = match[2] === '' ? 1 : parseInt(match[2]);
                    result[element] = (result[element] || 0) + count;
                }
            }

            return result;
        }

        // Show Error
        function showError(message) {
            const resultDisplay = document.getElementById('resultDisplay');
            resultDisplay.innerHTML = `
                <div class="bg-gradient-to-r from-red-50 to-pink-50 dark:from-red-900 dark:to-pink-900 p-6 rounded-xl shadow-lg border-2 border-red-300 dark:border-red-700">
                    <div class="text-center">
                        <div class="text-4xl mb-3">‚ö†Ô∏è</div>
                        <h3 class="text-xl font-bold text-gray-800 dark:text-white">${message}</h3>
                    </div>
                </div>
            `;
            resultDisplay.classList.remove('hidden');

            const beaker = document.getElementById('beaker');
            beaker.classList.add('shake');
            setTimeout(() => beaker.classList.remove('shake'), 500);
        }

        // Check Missions
        function checkMissions(formula) {
            gameState.missions.forEach(mission => {
                if (!mission.complete && mission.formula === formula) {
                    mission.complete = true;
                    showSuccessModal(mission);
                    renderMissions();
                }
            });
        }

        // Show Success Modal
        function showSuccessModal(mission) {
            document.getElementById('modalTitle').textContent = 'Mission Complete! üéâ';
            document.getElementById('modalMessage').textContent = mission.name;
            document.getElementById('modalPoints').textContent = `+${mission.reward} Bonus Points!`;
            document.getElementById('successModal').classList.remove('hidden');

            addScore(mission.reward);
        }

        // Close Success Modal
        function closeSuccessModal() {
            document.getElementById('successModal').classList.add('hidden');
        }

        // Add Score
        function addScore(points) {
            gameState.score += points;
            updateDisplay();
            showScorePopup(points);
        }

        // Show Score Popup
        function showScorePopup(points) {
            const popup = document.createElement('div');
            popup.className = 'score-popup fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-6xl font-bold text-yellow-400 pointer-events-none z-50';
            popup.style.textShadow = '0 0 10px rgba(0,0,0,0.5)';
            popup.textContent = `+${points}`;
            document.body.appendChild(popup);

            setTimeout(() => popup.remove(), 1000);
        }

        // Create Bubbles
        function createBubbles() {
            const liquid = document.getElementById('beakerLiquid');

            for (let i = 0; i < 10; i++) {
                setTimeout(() => {
                    const bubble = document.createElement('div');
                    bubble.className = 'bubble';
                    const size = Math.random() * 20 + 10;
                    bubble.style.width = `${size}px`;
                    bubble.style.height = `${size}px`;
                    bubble.style.left = `${Math.random() * 80 + 10}%`;
                    bubble.style.animationDuration = `${Math.random() * 1 + 1}s`;
                    liquid.appendChild(bubble);

                    setTimeout(() => bubble.remove(), 2000);
                }, i * 100);
            }
        }

        // Create Explosion Effect
        function createExplosion() {
            const beaker = document.getElementById('beaker');
            const rect = beaker.getBoundingClientRect();
            const centerX = rect.left + rect.width / 2;
            const centerY = rect.top + rect.height / 2;

            const colors = ['#ff6b6b', '#4ecdc4', '#45b7d1', '#f7b731', '#fed330'];

            for (let i = 0; i < 20; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = `${centerX}px`;
                particle.style.top = `${centerY}px`;
                particle.style.background = colors[Math.floor(Math.random() * colors.length)];

                const angle = (Math.PI * 2 * i) / 20;
                const distance = Math.random() * 100 + 50;
                particle.style.setProperty('--tx', `${Math.cos(angle) * distance}px`);
                particle.style.setProperty('--ty', `${Math.sin(angle) * distance}px`);

                document.body.appendChild(particle);
                setTimeout(() => particle.remove(), 1000);
            }
        }

        // Play Add Animation
        function playAddAnimation(symbol) {
            const elem = getElement(symbol);
            const beaker = document.getElementById('beaker');
            beaker.style.transform = 'scale(1.05)';
            setTimeout(() => beaker.style.transform = 'scale(1)', 200);
        }

        // Update Liquid Level
        function updateLiquidLevel() {
            const count = Object.values(gameState.elementsInBeaker).reduce((a, b) => a + b, 0);
            const level = Math.min(count * 15, 80);
            document.getElementById('beakerLiquid').style.height = `${level}%`;
        }

        // Get Element
        function getElement(symbol) {
            return elements.find(e => e.symbol === symbol) || { symbol, name: 'Unknown', color: '#999' };
        }

        // Update Display
        function updateDisplay() {
            document.getElementById('score').textContent = gameState.score;
            document.getElementById('level').textContent = gameState.level;
        }

        // Initialize on load
        initGame();
    </script>
</body>
</html>

