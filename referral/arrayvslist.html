<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Structures: Interactive Visual Guide</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root {
            --primary-color: #5D5CDE;
            --bg-light: #FFFFFF;
            --bg-dark: #181818;
        }

        .memory-cell {
            transition: all 0.3s ease;
        }

        .memory-cell.highlight {
            animation: pulse 0.5s ease-in-out;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        @keyframes slideIn {
            from { transform: translateX(-20px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        @keyframes slideOut {
            from { transform: translateX(0); opacity: 1; }
            to { transform: translateX(20px); opacity: 0; }
        }

        .slide-in {
            animation: slideIn 0.3s ease-out;
        }

        .slide-out {
            animation: slideOut 0.3s ease-out;
        }

        .pointer-arrow {
            stroke-dasharray: 5, 5;
            animation: dash 1s linear infinite;
        }

        @keyframes dash {
            to { stroke-dashoffset: -10; }
        }

        .tab-button {
            transition: all 0.2s ease;
        }

        .tab-button.active {
            background-color: var(--primary-color);
            color: white;
        }

        /* Dark mode styles */
        .dark {
            background-color: var(--bg-dark);
            color: #f5f5f5;
        }

        .dark .bg-white {
            background-color: #2a2a2a;
        }

        .dark .border-gray-300 {
            border-color: #444;
        }

        .dark .text-gray-700 {
            color: #e0e0e0;
        }

        .dark .text-gray-600 {
            color: #b0b0b0;
        }

        .dark .text-gray-800 {
            color: #f0f0f0;
        }

        .dark .bg-gray-50 {
            background-color: #222;
        }

        .dark .bg-gray-100 {
            background-color: #2a2a2a;
        }

        .dark .bg-gray-200 {
            background-color: #333;
        }

        .dark input, .dark select {
            background-color: #2a2a2a;
            color: #f5f5f5;
            border-color: #444;
        }

        .complexity-badge {
            font-family: 'Courier New', monospace;
            font-size: 0.875rem;
            padding: 0.25rem 0.5rem;
            border-radius: 0.25rem;
            font-weight: 600;
        }

        .code-block {
            background-color: #f5f5f5;
            border-radius: 0.5rem;
            padding: 1rem;
            font-family: 'Courier New', monospace;
            font-size: 0.875rem;
            overflow-x: auto;
        }

        .dark .code-block {
            background-color: #1a1a1a;
        }
    </style>
</head>
<body class="bg-gray-50 dark:bg-gray-900 transition-colors min-h-screen">
    <!-- Header -->
    <header class="bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
            <h1 class="text-2xl sm:text-3xl font-bold text-gray-900 dark:text-gray-100">
                üìö Data Structures: Interactive Visual Guide
            </h1>
            <p class="text-sm sm:text-base text-gray-600 dark:text-gray-400 mt-1">
                Explore how Arrays, Lists, and Maps work under the hood
            </p>
        </div>
    </header>

    <!-- Tab Navigation -->
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mt-6">
        <div class="flex flex-wrap gap-2 sm:gap-3 border-b border-gray-200 dark:border-gray-700">
            <button class="tab-button active px-4 sm:px-6 py-2 sm:py-3 font-medium rounded-t-lg text-sm sm:text-base" data-tab="arrays">
                Arrays
            </button>
            <button class="tab-button px-4 sm:px-6 py-2 sm:py-3 font-medium rounded-t-lg text-gray-600 dark:text-gray-400 text-sm sm:text-base" data-tab="lists">
                Linked Lists
            </button>
            <button class="tab-button px-4 sm:px-6 py-2 sm:py-3 font-medium rounded-t-lg text-gray-600 dark:text-gray-400 text-sm sm:text-base" data-tab="maps">
                Hash Maps
            </button>
            <button class="tab-button px-4 sm:px-6 py-2 sm:py-3 font-medium rounded-t-lg text-gray-600 dark:text-gray-400 text-sm sm:text-base" data-tab="edtech">
                EdTech Examples
            </button>
        </div>
    </div>

    <!-- Content Sections -->
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">

        <!-- Arrays Section -->
        <div id="arrays-section" class="tab-content">
            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4 sm:p-6 mb-6">
                <h2 class="text-xl sm:text-2xl font-bold text-gray-900 dark:text-gray-100 mb-4">Arrays: Contiguous Memory</h2>

                <!-- Explanation -->
                <div class="mb-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800">
                    <h3 class="font-bold text-gray-800 dark:text-gray-200 mb-2">How Arrays Work:</h3>
                    <p class="text-sm sm:text-base text-gray-700 dark:text-gray-300 mb-2">
                        Arrays store elements in <strong>contiguous memory locations</strong>. Each element occupies a fixed amount of space,
                        and the memory address of any element can be calculated using: <code class="bg-white dark:bg-gray-700 px-2 py-1 rounded">base_address + (index √ó element_size)</code>
                    </p>
                    <div class="mt-3 space-y-1 text-sm">
                        <div><span class="complexity-badge bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200">O(1)</span> Access by index</div>
                        <div><span class="complexity-badge bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-200">O(n)</span> Insert/Delete (requires shifting)</div>
                        <div><span class="complexity-badge bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200">O(n)</span> Search (unsorted)</div>
                    </div>
                </div>

                <!-- Interactive Controls -->
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 mb-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Value</label>
                        <input type="text" id="array-value" placeholder="Enter value"
                            class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-base focus:ring-2 focus:ring-purple-500">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Index</label>
                        <input type="number" id="array-index" placeholder="Position" min="0"
                            class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-base focus:ring-2 focus:ring-purple-500">
                    </div>
                    <div class="sm:col-span-2">
                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Actions</label>
                        <div class="flex gap-2 flex-wrap">
                            <button onclick="arrayPush()" class="px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition text-sm sm:text-base">
                                Push
                            </button>
                            <button onclick="arrayInsert()" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition text-sm sm:text-base">
                                Insert
                            </button>
                            <button onclick="arrayDelete()" class="px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition text-sm sm:text-base">
                                Delete
                            </button>
                            <button onclick="arrayAccess()" class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition text-sm sm:text-base">
                                Access
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Memory Visualization -->
                <div class="mb-4">
                    <h3 class="font-bold text-gray-800 dark:text-gray-200 mb-3">Memory Layout:</h3>
                    <div id="array-visualization" class="overflow-x-auto pb-4">
                        <!-- Dynamic content -->
                    </div>
                </div>

                <!-- Operation Log -->
                <div>
                    <h3 class="font-bold text-gray-800 dark:text-gray-200 mb-2">Operation Log:</h3>
                    <div id="array-log" class="bg-gray-100 dark:bg-gray-700 rounded-lg p-3 h-32 overflow-y-auto text-xs sm:text-sm font-mono">
                        Ready for operations...
                    </div>
                </div>
            </div>
        </div>

        <!-- Linked Lists Section -->
        <div id="lists-section" class="tab-content hidden">
            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4 sm:p-6 mb-6">
                <h2 class="text-xl sm:text-2xl font-bold text-gray-900 dark:text-gray-100 mb-4">Linked Lists: Node-Based Structure</h2>

                <!-- Explanation -->
                <div class="mb-6 p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800">
                    <h3 class="font-bold text-gray-800 dark:text-gray-200 mb-2">How Linked Lists Work:</h3>
                    <p class="text-sm sm:text-base text-gray-700 dark:text-gray-300 mb-2">
                        Linked lists store elements in <strong>nodes scattered in memory</strong>. Each node contains data and a pointer/reference
                        to the next node. This allows efficient insertions/deletions but requires traversal for access.
                    </p>
                    <div class="mt-3 space-y-1 text-sm">
                        <div><span class="complexity-badge bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200">O(1)</span> Insert/Delete at head</div>
                        <div><span class="complexity-badge bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-200">O(n)</span> Access by index</div>
                        <div><span class="complexity-badge bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200">O(n)</span> Search</div>
                    </div>
                </div>

                <!-- Interactive Controls -->
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 mb-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Value</label>
                        <input type="text" id="list-value" placeholder="Enter value"
                            class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-base focus:ring-2 focus:ring-purple-500">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Position</label>
                        <input type="number" id="list-position" placeholder="Position" min="0"
                            class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-base focus:ring-2 focus:ring-purple-500">
                    </div>
                    <div class="sm:col-span-2">
                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Actions</label>
                        <div class="flex gap-2 flex-wrap">
                            <button onclick="listPrepend()" class="px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition text-sm sm:text-base">
                                Prepend
                            </button>
                            <button onclick="listAppend()" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition text-sm sm:text-base">
                                Append
                            </button>
                            <button onclick="listInsert()" class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition text-sm sm:text-base">
                                Insert
                            </button>
                            <button onclick="listDelete()" class="px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition text-sm sm:text-base">
                                Delete
                            </button>
                        </div>
                    </div>
                </div>

                <!-- List Visualization -->
                <div class="mb-4">
                    <h3 class="font-bold text-gray-800 dark:text-gray-200 mb-3">Node Structure:</h3>
                    <div id="list-visualization" class="overflow-x-auto pb-4">
                        <!-- Dynamic content -->
                    </div>
                </div>

                <!-- Operation Log -->
                <div>
                    <h3 class="font-bold text-gray-800 dark:text-gray-200 mb-2">Operation Log:</h3>
                    <div id="list-log" class="bg-gray-100 dark:bg-gray-700 rounded-lg p-3 h-32 overflow-y-auto text-xs sm:text-sm font-mono">
                        Ready for operations...
                    </div>
                </div>
            </div>
        </div>

        <!-- Hash Maps Section -->
        <div id="maps-section" class="tab-content hidden">
            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4 sm:p-6 mb-6">
                <h2 class="text-xl sm:text-2xl font-bold text-gray-900 dark:text-gray-100 mb-4">Hash Maps: Key-Value Storage</h2>

                <!-- Explanation -->
                <div class="mb-6 p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg border border-purple-200 dark:border-purple-800">
                    <h3 class="font-bold text-gray-800 dark:text-gray-200 mb-2">How Hash Maps Work:</h3>
                    <p class="text-sm sm:text-base text-gray-700 dark:text-gray-300 mb-2">
                        Hash maps use a <strong>hash function</strong> to convert keys into array indices. The key is hashed,
                        and the value is stored at that bucket. Collisions are handled via chaining (linked lists) or open addressing.
                    </p>
                    <div class="mt-3 space-y-1 text-sm">
                        <div><span class="complexity-badge bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200">O(1)</span> Insert/Delete/Search (average)</div>
                        <div><span class="complexity-badge bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-200">O(n)</span> Worst case (all collisions)</div>
                        <div><span class="complexity-badge bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200">O(n)</span> Space complexity</div>
                    </div>
                </div>

                <!-- Interactive Controls -->
                <div class="grid grid-cols-1 sm:grid-cols-3 gap-3 mb-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Key</label>
                        <input type="text" id="map-key" placeholder="Enter key"
                            class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-base focus:ring-2 focus:ring-purple-500">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Value</label>
                        <input type="text" id="map-value" placeholder="Enter value"
                            class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-base focus:ring-2 focus:ring-purple-500">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Actions</label>
                        <div class="flex gap-2 flex-wrap">
                            <button onclick="mapSet()" class="px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition text-sm sm:text-base">
                                Set
                            </button>
                            <button onclick="mapGet()" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition text-sm sm:text-base">
                                Get
                            </button>
                            <button onclick="mapDelete()" class="px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition text-sm sm:text-base">
                                Delete
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Hash Function Visualization -->
                <div class="mb-4">
                    <h3 class="font-bold text-gray-800 dark:text-gray-200 mb-3">Hash Table (8 buckets):</h3>
                    <div id="map-visualization" class="overflow-x-auto pb-4">
                        <!-- Dynamic content -->
                    </div>
                </div>

                <!-- Operation Log -->
                <div>
                    <h3 class="font-bold text-gray-800 dark:text-gray-200 mb-2">Operation Log:</h3>
                    <div id="map-log" class="bg-gray-100 dark:bg-gray-700 rounded-lg p-3 h-32 overflow-y-auto text-xs sm:text-sm font-mono">
                        Ready for operations...
                    </div>
                </div>
            </div>
        </div>

        <!-- EdTech Examples Section -->
        <div id="edtech-section" class="tab-content hidden">
            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4 sm:p-6 mb-6">
                <h2 class="text-xl sm:text-2xl font-bold text-gray-900 dark:text-gray-100 mb-4">EdTech Applications</h2>

                <!-- Arrays in EdTech -->
                <div class="mb-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800">
                    <h3 class="font-bold text-gray-800 dark:text-gray-200 mb-3 flex items-center gap-2">
                        <span class="text-2xl">üìä</span> Arrays in EdTech
                    </h3>
                    <ul class="space-y-2 text-sm sm:text-base text-gray-700 dark:text-gray-300">
                        <li><strong>Student Rosters:</strong> Quick access to student info by ID/index</li>
                        <li><strong>Grade Books:</strong> Store grades in order (student[i].grades[j])</li>
                        <li><strong>Question Banks:</strong> Random access to questions by index</li>
                        <li><strong>Time-Series Data:</strong> Daily attendance, test scores over time</li>
                    </ul>
                    <div class="code-block mt-3">
// Student grades - O(1) access
const grades = [95, 88, 92, 78, 85];
const thirdStudentGrade = grades[2]; // 92

// Lesson schedule
const schedule = ["Math", "Science", "English", "History"];
                    </div>
                </div>

                <!-- Lists in EdTech -->
                <div class="mb-6 p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800">
                    <h3 class="font-bold text-gray-800 dark:text-gray-200 mb-3 flex items-center gap-2">
                        <span class="text-2xl">üîó</span> Linked Lists in EdTech
                    </h3>
                    <ul class="space-y-2 text-sm sm:text-base text-gray-700 dark:text-gray-300">
                        <li><strong>Course Prerequisites:</strong> Chain of courses (Calc I ‚Üí Calc II ‚Üí Calc III)</li>
                        <li><strong>Learning Paths:</strong> Sequential modules that unlock progressively</li>
                        <li><strong>Undo/Redo History:</strong> Student's editing history in assignments</li>
                        <li><strong>Playlist Management:</strong> Educational video sequences</li>
                    </ul>
                    <div class="code-block mt-3">
// Course prerequisite chain
class Course {
    constructor(name, next = null) {
        this.name = name;
        this.next = next; // Next course in sequence
    }
}

const calc1 = new Course("Calculus I");
const calc2 = new Course("Calculus II");
calc1.next = calc2; // Prerequisites linked
                    </div>
                </div>

                <!-- Maps in EdTech -->
                <div class="mb-6 p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg border border-purple-200 dark:border-purple-800">
                    <h3 class="font-bold text-gray-800 dark:text-gray-200 mb-3 flex items-center gap-2">
                        <span class="text-2xl">üó∫Ô∏è</span> Hash Maps in EdTech
                    </h3>
                    <ul class="space-y-2 text-sm sm:text-base text-gray-700 dark:text-gray-300">
                        <li><strong>Student Records:</strong> Fast lookup by student ID</li>
                        <li><strong>User Sessions:</strong> Track logged-in users by session token</li>
                        <li><strong>Course Catalog:</strong> Quick course lookup by code (CS101 ‚Üí course details)</li>
                        <li><strong>Skill Tracking:</strong> Map skills to proficiency levels</li>
                        <li><strong>Answer Keys:</strong> Question ID ‚Üí Correct answer mapping</li>
                    </ul>
                    <div class="code-block mt-3">
// Student lookup by ID - O(1) average
const students = new Map();
students.set("S12345", {
    name: "Alice Johnson",
    grade: 10,
    gpa: 3.8
});

// Fast retrieval
const student = students.get("S12345");

// Skill proficiency tracking
const skills = new Map([
    ["algebra", 85],
    ["geometry", 92],
    ["statistics", 78]
]);
                    </div>
                </div>

                <!-- Real-World Example -->
                <div class="p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg border border-yellow-200 dark:border-yellow-800">
                    <h3 class="font-bold text-gray-800 dark:text-gray-200 mb-3 flex items-center gap-2">
                        <span class="text-2xl">üí°</span> Combined Example: Quiz System
                    </h3>
                    <div class="code-block">
// Quiz system using all three structures
class QuizSystem {
    constructor() {
        // Array: Questions in order
        this.questions = [
            {id: 1, text: "What is 2+2?", answer: "4"},
            {id: 2, text: "Capital of France?", answer: "Paris"}
        ];

        // Map: Student responses (studentId ‚Üí answers map)
        this.responses = new Map();

        // Map: Answer key for O(1) grading
        this.answerKey = new Map([
            [1, "4"],
            [2, "Paris"]
        ]);
    }

    // Submit answer - O(1) storage
    submitAnswer(studentId, questionId, answer) {
        if (!this.responses.has(studentId)) {
            this.responses.set(studentId, new Map());
        }
        this.responses.get(studentId).set(questionId, answer);
    }

    // Grade student - O(n) where n = number of questions
    gradeStudent(studentId) {
        const studentAnswers = this.responses.get(studentId);
        let score = 0;

        for (let [qId, answer] of studentAnswers) {
            if (this.answerKey.get(qId) === answer) {
                score++;
            }
        }

        return (score / this.questions.length) * 100;
    }
}
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Dark mode detection
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            document.documentElement.classList.add('dark');
        }
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
            if (event.matches) {
                document.documentElement.classList.add('dark');
            } else {
                document.documentElement.classList.remove('dark');
            }
        });

        // Tab switching
        const tabButtons = document.querySelectorAll('.tab-button');
        const tabContents = document.querySelectorAll('.tab-content');

        tabButtons.forEach(button => {
            button.addEventListener('click', () => {
                const targetTab = button.dataset.tab;

                // Update button states
                tabButtons.forEach(btn => {
                    btn.classList.remove('active');
                    btn.classList.add('text-gray-600', 'dark:text-gray-400');
                });
                button.classList.add('active');
                button.classList.remove('text-gray-600', 'dark:text-gray-400');

                // Update content visibility
                tabContents.forEach(content => {
                    content.classList.add('hidden');
                });
                document.getElementById(`${targetTab}-section`).classList.remove('hidden');
            });
        });

        // ==============================
        // ARRAY IMPLEMENTATION
        // ==============================
        let arrayData = [10, 20, 30, 40, 50];
        const BASE_ADDRESS = 1000;
        const ELEMENT_SIZE = 4; // bytes

        function renderArray() {
            const container = document.getElementById('array-visualization');
            container.innerHTML = '';

            const wrapper = document.createElement('div');
            wrapper.className = 'flex flex-wrap gap-2';

            arrayData.forEach((value, index) => {
                const address = BASE_ADDRESS + (index * ELEMENT_SIZE);
                const cell = document.createElement('div');
                cell.className = 'memory-cell bg-purple-100 dark:bg-purple-900 border-2 border-purple-400 dark:border-purple-600 rounded-lg p-3 min-w-[100px]';
                cell.innerHTML = `
                    <div class="text-xs text-gray-600 dark:text-gray-400 font-mono">@${address}</div>
                    <div class="text-lg font-bold text-gray-800 dark:text-gray-100">[${index}] = ${value}</div>
                `;
                wrapper.appendChild(cell);
            });

            container.appendChild(wrapper);
        }

        function logArray(message, type = 'info') {
            const log = document.getElementById('array-log');
            const timestamp = new Date().toLocaleTimeString();
            const colors = {
                info: 'text-blue-600 dark:text-blue-400',
                success: 'text-green-600 dark:text-green-400',
                error: 'text-red-600 dark:text-red-400',
                warning: 'text-yellow-600 dark:text-yellow-400'
            };
            log.innerHTML += `<div class="${colors[type]}">[${timestamp}] ${message}</div>`;
            log.scrollTop = log.scrollHeight;
        }

        function arrayPush() {
            const value = document.getElementById('array-value').value;
            if (!value) {
                logArray('Error: Please enter a value', 'error');
                return;
            }

            arrayData.push(value);
            logArray(`Pushed "${value}" to end. New length: ${arrayData.length}`, 'success');
            renderArray();
            document.getElementById('array-value').value = '';
        }

        function arrayInsert() {
            const value = document.getElementById('array-value').value;
            const index = parseInt(document.getElementById('array-index').value);

            if (!value || isNaN(index)) {
                logArray('Error: Please enter both value and index', 'error');
                return;
            }

            if (index < 0 || index > arrayData.length) {
                logArray(`Error: Index out of bounds (0-${arrayData.length})`, 'error');
                return;
            }

            logArray(`Inserting "${value}" at index ${index}...`, 'info');
            logArray(`Shifting ${arrayData.length - index} elements to the right`, 'warning');

            arrayData.splice(index, 0, value);
            logArray(`Insert complete. Operation: O(n) - had to shift elements`, 'success');
            renderArray();

            document.getElementById('array-value').value = '';
            document.getElementById('array-index').value = '';
        }

        function arrayDelete() {
            const index = parseInt(document.getElementById('array-index').value);

            if (isNaN(index) || index < 0 || index >= arrayData.length) {
                logArray(`Error: Invalid index. Valid range: 0-${arrayData.length - 1}`, 'error');
                return;
            }

            const deleted = arrayData[index];
            logArray(`Deleting element at index ${index} (value: ${deleted})...`, 'info');
            logArray(`Shifting ${arrayData.length - index - 1} elements to the left`, 'warning');

            arrayData.splice(index, 1);
            logArray(`Delete complete. Operation: O(n) - had to shift elements`, 'success');
            renderArray();

            document.getElementById('array-index').value = '';
        }

        function arrayAccess() {
            const index = parseInt(document.getElementById('array-index').value);

            if (isNaN(index) || index < 0 || index >= arrayData.length) {
                logArray(`Error: Invalid index. Valid range: 0-${arrayData.length - 1}`, 'error');
                return;
            }

            const address = BASE_ADDRESS + (index * ELEMENT_SIZE);
            const value = arrayData[index];

            logArray(`Accessing index ${index}...`, 'info');
            logArray(`Calculation: ${BASE_ADDRESS} + (${index} √ó ${ELEMENT_SIZE}) = ${address}`, 'info');
            logArray(`Value at address ${address}: ${value}`, 'success');
            logArray(`Operation: O(1) - direct memory access!`, 'success');

            // Highlight the accessed cell
            const cells = document.querySelectorAll('.memory-cell');
            if (cells[index]) {
                cells[index].classList.add('highlight');
                setTimeout(() => cells[index].classList.remove('highlight'), 500);
            }
        }

        // ==============================
        // LINKED LIST IMPLEMENTATION
        // ==============================
        class ListNode {
            constructor(value) {
                this.value = value;
                this.next = null;
                this.address = Math.floor(Math.random() * 9000) + 1000; // Simulated memory address
            }
        }

        let listHead = null;

        function initializeList() {
            listHead = new ListNode('A');
            listHead.next = new ListNode('B');
            listHead.next.next = new ListNode('C');
        }

        function renderList() {
            const container = document.getElementById('list-visualization');
            container.innerHTML = '';

            if (!listHead) {
                container.innerHTML = '<div class="text-gray-500 dark:text-gray-400">Empty list - add some nodes!</div>';
                return;
            }

            const wrapper = document.createElement('div');
            wrapper.className = 'flex flex-wrap items-center gap-4';

            let current = listHead;
            while (current) {
                // Node container
                const nodeDiv = document.createElement('div');
                nodeDiv.className = 'flex items-center gap-2';

                // Node box
                const node = document.createElement('div');
                node.className = 'bg-green-100 dark:bg-green-900 border-2 border-green-400 dark:border-green-600 rounded-lg p-3 min-w-[120px]';
                node.innerHTML = `
                    <div class="text-xs text-gray-600 dark:text-gray-400 font-mono">@${current.address}</div>
                    <div class="text-lg font-bold text-gray-800 dark:text-gray-100">${current.value}</div>
                    <div class="text-xs text-gray-600 dark:text-gray-400 font-mono">next: ${current.next ? current.next.address : 'null'}</div>
                `;
                nodeDiv.appendChild(node);

                // Arrow
                if (current.next) {
                    const arrow = document.createElement('div');
                    arrow.className = 'text-2xl text-green-600 dark:text-green-400';
                    arrow.textContent = '‚Üí';
                    nodeDiv.appendChild(arrow);
                }

                wrapper.appendChild(nodeDiv);
                current = current.next;
            }

            container.appendChild(wrapper);
        }

        function logList(message, type = 'info') {
            const log = document.getElementById('list-log');
            const timestamp = new Date().toLocaleTimeString();
            const colors = {
                info: 'text-blue-600 dark:text-blue-400',
                success: 'text-green-600 dark:text-green-400',
                error: 'text-red-600 dark:text-red-400',
                warning: 'text-yellow-600 dark:text-yellow-400'
            };
            log.innerHTML += `<div class="${colors[type]}">[${timestamp}] ${message}</div>`;
            log.scrollTop = log.scrollHeight;
        }

        function listPrepend() {
            const value = document.getElementById('list-value').value;
            if (!value) {
                logList('Error: Please enter a value', 'error');
                return;
            }

            const newNode = new ListNode(value);
            newNode.next = listHead;
            listHead = newNode;

            logList(`Prepended "${value}" to head. Operation: O(1)`, 'success');
            renderList();
            document.getElementById('list-value').value = '';
        }

        function listAppend() {
            const value = document.getElementById('list-value').value;
            if (!value) {
                logList('Error: Please enter a value', 'error');
                return;
            }

            const newNode = new ListNode(value);

            if (!listHead) {
                listHead = newNode;
                logList(`Created first node with value "${value}"`, 'success');
            } else {
                logList(`Traversing to end of list...`, 'info');
                let current = listHead;
                let count = 0;
                while (current.next) {
                    current = current.next;
                    count++;
                }
                current.next = newNode;
                logList(`Appended "${value}" after ${count + 1} nodes. Operation: O(n)`, 'success');
            }

            renderList();
            document.getElementById('list-value').value = '';
        }

        function listInsert() {
            const value = document.getElementById('list-value').value;
            const position = parseInt(document.getElementById('list-position').value);

            if (!value || isNaN(position)) {
                logList('Error: Please enter both value and position', 'error');
                return;
            }

            if (position < 0) {
                logList('Error: Position must be >= 0', 'error');
                return;
            }

            const newNode = new ListNode(value);

            if (position === 0) {
                newNode.next = listHead;
                listHead = newNode;
                logList(`Inserted "${value}" at position 0. Operation: O(1)`, 'success');
            } else {
                let current = listHead;
                let count = 0;

                while (current && count < position - 1) {
                    current = current.next;
                    count++;
                }

                if (!current) {
                    logList(`Error: Position ${position} is beyond list length`, 'error');
                    return;
                }

                newNode.next = current.next;
                current.next = newNode;
                logList(`Inserted "${value}" at position ${position}. Traversed ${count} nodes. Operation: O(n)`, 'success');
            }

            renderList();
            document.getElementById('list-value').value = '';
            document.getElementById('list-position').value = '';
        }

        function listDelete() {
            const position = parseInt(document.getElementById('list-position').value);

            if (isNaN(position) || position < 0) {
                logList('Error: Please enter a valid position', 'error');
                return;
            }

            if (!listHead) {
                logList('Error: List is empty', 'error');
                return;
            }

            if (position === 0) {
                const deleted = listHead.value;
                listHead = listHead.next;
                logList(`Deleted head node (value: ${deleted}). Operation: O(1)`, 'success');
            } else {
                let current = listHead;
                let count = 0;

                while (current.next && count < position - 1) {
                    current = current.next;
                    count++;
                }

                if (!current.next) {
                    logList(`Error: Position ${position} not found`, 'error');
                    return;
                }

                const deleted = current.next.value;
                current.next = current.next.next;
                logList(`Deleted node at position ${position} (value: ${deleted}). Traversed ${count} nodes. Operation: O(n)`, 'success');
            }

            renderList();
            document.getElementById('list-position').value = '';
        }

        // ==============================
        // HASH MAP IMPLEMENTATION
        // ==============================
        const BUCKET_COUNT = 8;
        let hashTable = Array(BUCKET_COUNT).fill(null).map(() => []);

        function hashFunction(key) {
            let hash = 0;
            for (let i = 0; i < key.length; i++) {
                hash = (hash * 31 + key.charCodeAt(i)) % BUCKET_COUNT;
            }
            return Math.abs(hash);
        }

        function renderMap() {
            const container = document.getElementById('map-visualization');
            container.innerHTML = '';

            const wrapper = document.createElement('div');
            wrapper.className = 'grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3';

            hashTable.forEach((bucket, index) => {
                const bucketDiv = document.createElement('div');
                bucketDiv.className = 'border-2 border-purple-400 dark:border-purple-600 rounded-lg p-3 bg-white dark:bg-gray-700';

                let content = `<div class="font-bold text-gray-800 dark:text-gray-100 mb-2">Bucket ${index}</div>`;

                if (bucket.length === 0) {
                    content += '<div class="text-xs text-gray-500 dark:text-gray-400">empty</div>';
                } else {
                    bucket.forEach(([key, value]) => {
                        content += `
                            <div class="bg-purple-100 dark:bg-purple-900 rounded p-2 mb-1 text-xs">
                                <div class="font-mono text-gray-800 dark:text-gray-100"><strong>${key}</strong>: ${value}</div>
                            </div>
                        `;
                    });
                }

                bucketDiv.innerHTML = content;
                wrapper.appendChild(bucketDiv);
            });

            container.appendChild(wrapper);
        }

        function logMap(message, type = 'info') {
            const log = document.getElementById('map-log');
            const timestamp = new Date().toLocaleTimeString();
            const colors = {
                info: 'text-blue-600 dark:text-blue-400',
                success: 'text-green-600 dark:text-green-400',
                error: 'text-red-600 dark:text-red-400',
                warning: 'text-yellow-600 dark:text-yellow-400'
            };
            log.innerHTML += `<div class="${colors[type]}">[${timestamp}] ${message}</div>`;
            log.scrollTop = log.scrollHeight;
        }

        function mapSet() {
            const key = document.getElementById('map-key').value;
            const value = document.getElementById('map-value').value;

            if (!key || !value) {
                logMap('Error: Please enter both key and value', 'error');
                return;
            }

            const hash = hashFunction(key);
            logMap(`Computing hash for key "${key}"...`, 'info');
            logMap(`Hash: ${hash} ‚Üí Bucket ${hash}`, 'info');

            const bucket = hashTable[hash];
            const existing = bucket.findIndex(([k]) => k === key);

            if (existing !== -1) {
                bucket[existing][1] = value;
                logMap(`Updated existing key "${key}" with value "${value}"`, 'success');
            } else {
                bucket.push([key, value]);
                if (bucket.length > 1) {
                    logMap(`Collision! Bucket ${hash} now has ${bucket.length} entries (chaining)`, 'warning');
                }
                logMap(`Set "${key}" = "${value}" in bucket ${hash}`, 'success');
            }

            renderMap();
            document.getElementById('map-key').value = '';
            document.getElementById('map-value').value = '';
        }

        function mapGet() {
            const key = document.getElementById('map-key').value;

            if (!key) {
                logMap('Error: Please enter a key', 'error');
                return;
            }

            const hash = hashFunction(key);
            logMap(`Computing hash for key "${key}"...`, 'info');
            logMap(`Hash: ${hash} ‚Üí Looking in bucket ${hash}`, 'info');

            const bucket = hashTable[hash];
            const entry = bucket.find(([k]) => k === key);

            if (entry) {
                logMap(`Found: "${key}" = "${entry[1]}" | Operation: O(1) average`, 'success');
            } else {
                logMap(`Key "${key}" not found in bucket ${hash}`, 'error');
            }

            document.getElementById('map-key').value = '';
        }

        function mapDelete() {
            const key = document.getElementById('map-key').value;

            if (!key) {
                logMap('Error: Please enter a key', 'error');
                return;
            }

            const hash = hashFunction(key);
            logMap(`Computing hash for key "${key}"...`, 'info');
            logMap(`Hash: ${hash} ‚Üí Looking in bucket ${hash}`, 'info');

            const bucket = hashTable[hash];
            const index = bucket.findIndex(([k]) => k === key);

            if (index !== -1) {
                bucket.splice(index, 1);
                logMap(`Deleted key "${key}" from bucket ${hash} | Operation: O(1) average`, 'success');
                renderMap();
            } else {
                logMap(`Key "${key}" not found in bucket ${hash}`, 'error');
            }

            document.getElementById('map-key').value = '';
        }

        // Initialize all visualizations
        renderArray();
        initializeList();
        renderList();
        renderMap();

        // Add some initial data to hash map
        hashTable[hashFunction("name")].push(["name", "Alice"]);
        hashTable[hashFunction("age")].push(["age", "25"]);
        hashTable[hashFunction("course")].push(["course", "CS101"]);
        renderMap();
    </script>
</body>
</html>
