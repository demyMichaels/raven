<!DOCTYPE html>
<html lang="en">
<head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-8LYQ579PW8"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());

gtag('config', 'G-8LYQ579PW8');
</script>


<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title> Raven-JAMB </title>

<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
tailwind.config = {
darkMode: 'class',
theme: {
extend: {
colors: {

// Raven Brand Colors
primary: {
DEFAULT: "#0F2C59", // Deep Navy - Trust, Authority, Stability
50: "#f0f3f8",
100: "#d6e1ee",
500: "#0F2C59",
600: "#0a2549",
700: "#081e39",
},


accent: {
DEFAULT: "#009F9D", // Consultancy Teal - Innovation, Precision
50: "#e6f7f7",
100: "#b3ebea",
500: "#009F9D",
600: "#008280",
700: "#006663",
},


neutral: {
25: "#FEFEFE",
50: "#F8F9FA", // Warm Light Gray - Cleanliness, Clarity
100: "#F1F3F4",
200: "#E8EAED",
300: "#DADCE0",
400: "#BDC1C6",
500: "#9AA0A6",
600: "#80868B",
700: "#5F6368",
800: "#2D3748", // Charcoal - Sophistication, Legibility
900: "#1F2937",
},

premium: {
DEFAULT: "#D2C1A7", // Pale Sand - Warmth, Approachability
50: "#fbf9f6",
100: "#f4efe6",
500: "#D2C1A7",
600: "#c4b095",
700: "#b69f83",
},


data: {
DEFAULT: "#5A7B9E", // Steel Blue - Logic, Intelligence
50: "#f2f5f9",
100: "#e1e9f2",
500: "#5A7B9E",
600: "#4d6a87",
700: "#405970",
},

success: "#22c55e",
warning: "#f59e0b",
error: "#ef4444",
},


boxShadow: {
'material-1': '0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24)',
'material-2': '0 3px 6px rgba(0,0,0,0.16), 0 3px 6px rgba(0,0,0,0.23)',
'material-3': '0 10px 20px rgba(0,0,0,0.19), 0 6px 6px rgba(0,0,0,0.23)',
'material-4': '0 14px 28px rgba(0,0,0,0.25), 0 10px 10px rgba(0,0,0,0.22)',
'material-5': '0 19px 38px rgba(0,0,0,0.30), 0 15px 12px rgba(0,0,0,0.22)',
},


fontFamily: {
'sans': ['Roboto', 'system-ui', 'sans-serif'],
},


borderRadius: {
'material': '4px',
}
}
}
}
</script>



<style>
.fade-in {
animation: fadeIn 0.3s cubic-bezier(0.4, 0.0, 0.2, 1);
}

@keyframes fadeIn {
from { opacity: 0; transform: translateY(16px); }
to { opacity: 1; transform: translateY(0); }
}

.material-card {
transition: box-shadow 0.28s cubic-bezier(0.4, 0.0, 0.2, 1);
}

.material-card:hover {
box-shadow: 0 8px 25px rgba(0,0,0,0.15);
}

.material-button {
transition: all 0.15s cubic-bezier(0.4, 0.0, 0.2, 1);
position: relative;
overflow: hidden;
}

.material-button:active {
transform: scale(0.98);
}


.material-fab {
border-radius: 50%;
width: 56px;
height: 56px;
display: flex;
align-items: center;
justify-content: center;
box-shadow: 0 3px 5px -1px rgba(0,0,0,0.2), 0 6px 10px 0 rgba(0,0,0,0.14), 0 1px 18px 0 rgba(0,0,0,0.12);
transition: box-shadow 0.28s cubic-bezier(0.4, 0.0, 0.2, 1);
}

.material-fab:hover {
box-shadow: 0 5px 5px -3px rgba(0,0,0,0.2), 0 8px 10px 1px rgba(0,0,0,0.14), 0 3px 14px 2px rgba(0,0,0,0.12);
}

.progress-ring {
transform: rotate(-90deg);
}

.ripple {
position: relative;
overflow: hidden;
}

.ripple::before {
content: '';
position: absolute;
top: 50%;
left: 50%;
width: 0;
height: 0;
border-radius: 50%;
background: rgba(221, 193, 193, 0.5);
transform: translate(-50%, -50%);
transition: width 0.6s, height 0.6s;
}

.ripple:active::before {
width: 300px;
height: 300px;
}

/* Material Design Typography Scale - Mobile optimized */
.headline-1 { font-size: 3.5rem; font-weight: 300; line-height: 1.167; letter-spacing: -1.5px; }
.headline-2 { font-size: 2.5rem; font-weight: 300; line-height: 1.2; letter-spacing: -0.5px; }
.headline-3 { font-size: 2rem; font-weight: 400; line-height: 1.167; letter-spacing: 0; }
.headline-4 { font-size: 1.75rem; font-weight: 400; line-height: 1.235; letter-spacing: 0.25px; }
.headline-5 { font-size: 1.25rem; font-weight: 400; line-height: 1.334; letter-spacing: 0; }
.headline-6 { font-size: 1.125rem; font-weight: 500; line-height: 1.6; letter-spacing: 0.15px; }

.subtitle-1 { font-size: 1rem; font-weight: 400; line-height: 1.75; letter-spacing: 0.15px; }
.subtitle-2 { font-size: 0.875rem; font-weight: 500; line-height: 1.57; letter-spacing: 0.1px; }

.body-1 { font-size: 1rem; font-weight: 400; line-height: 1.5; letter-spacing: 0.5px; }
.body-2 { font-size: 0.875rem; font-weight: 400; line-height: 1.43; letter-spacing: 0.25px; }

.button-text { font-size: 0.875rem; font-weight: 500; line-height: 1.75; letter-spacing: 1.25px; text-transform: uppercase; }

.caption { font-size: 0.75rem; font-weight: 400; line-height: 1.66; letter-spacing: 0.4px; }

.overline { font-size: 0.75rem; font-weight: 400; line-height: 2.66; letter-spacing: 1px; text-transform: uppercase; }


/* Desktop typography adjustments */
@media (min-width: 768px) {
.headline-1 { font-size: 6rem; }
.headline-2 { font-size: 3.75rem; }
.headline-3 { font-size: 3rem; }
.headline-4 { font-size: 2.125rem; }
.headline-5 { font-size: 1.5rem; }
.headline-6 { font-size: 1.25rem; }
}

/* Mobile menu transitions */
.mobile-menu-enter {
transform: translateX(-100%);
transition: transform 0.3s cubic-bezier(0.4, 0.0, 0.2, 1);
}

.mobile-menu-enter-active {
transform: translateX(0);
}

.mobile-menu-exit {
transform: translateX(0);
transition: transform 0.3s cubic-bezier(0.4, 0.0, 0.2, 1);
}

.mobile-menu-exit-active {
transform: translateX(-100%);
}

/* Dark mode enhancements */
.dark .material-card {
background-color: #1F2937;
border-color: #374151;
}

.dark .material-card:hover {
box-shadow: 0 8px 25px rgba(0,0,0,0.3);
}

/* Ensure minimum touch targets on mobile */
@media (max-width: 768px) {
.touch-target {
min-height: 44px;
min-width: 44px;
}
}

/* Hidden content */
.hidden-content {
display: none !important;
}


/* Status badges */
.status-badge {
padding: 5px 12px;
border-radius: 20px;
font-size: 0.8rem;
font-weight: 600;
}

.status-paid {
background: #d4edda;
color: #155724;
}

.status-pending {
background: #fff3cd;
color: #856404;
}

.btn-sm {
padding: 5px 10px;
font-size: 0.8rem;
}

.btn-danger {
background-color: #ef4444;
color: white;
}

.btn-danger:hover {
background-color: #dc2626;
}




/* Modal backdrop */
.modal-backdrop {
position: fixed;
inset: 0;
background-color: rgba(0, 0, 0, 0.5);
display: flex;
align-items: center;
justify-content: center;
z-index: 100;
padding: 1rem;
}

.modal-content {
max-height: 90vh;
overflow-y: auto;
}

/* Subject selection styles */
.subject-checkbox {
display: none;
}

.subject-label {
display: flex;
align-items: center;
padding: 12px 16px;
border: 2px solid #e5e7eb;
border-radius: 8px;
cursor: pointer;
transition: all 0.2s;
}

.subject-label:hover {
border-color: #009F9D;
background-color: #f0f9ff;
}

.dark .subject-label {
border-color: #374151;
}

.dark .subject-label:hover {
border-color: #009F9D;
background-color: #1e3a3a;
}

.subject-checkbox:checked + .subject-label {
border-color: #009F9D;
background-color: #e6f7f7;
color: #006663;
}

.dark .subject-checkbox:checked + .subject-label {
background-color: #1e3a3a;
color: #009F9D;
}

.subject-checkbox:disabled + .subject-label {
opacity: 0.6;
cursor: not-allowed;
background-color: #f3f4f6;
}

.dark .subject-checkbox:disabled + .subject-label {
background-color: #1f2937;
}

.subject-checkmark {
width: 20px;
height: 20px;
border: 2px solid #9AA0A6;
border-radius: 4px;
margin-right: 12px;
display: flex;
align-items: center;
justify-content: center;
transition: all 0.2s;
}

.subject-checkbox:checked + .subject-label .subject-checkmark {
background-color: #009F9D;
border-color: #009F9D;
}

.subject-checkbox:checked + .subject-label .subject-checkmark::after {
content: '✓';
color: white;
font-weight: bold;
font-size: 14px;
}

/* Chart Container */
.chart-container {
    position: relative;
    height: 300px;
    width: 100%;
}

.chart-container canvas {
    max-height: 100% !important;
    max-width: 100% !important;
}

/* Heatmap styles */
.heatmap-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
    gap: 8px;
}

.heatmap-cell {
    aspect-ratio: 1;
    border-radius: 8px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    padding: 8px;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    cursor: pointer;
}

.heatmap-cell:hover {
    transform: scale(1.05);
}

.status-excellent { background: linear-gradient(135deg, #10B981, #059669); }
.status-good { background: linear-gradient(135deg, #3B82F6, #1D4ED8); }
.status-average { background: linear-gradient(135deg, #F59E0B, #D97706); }
.status-weak { background: linear-gradient(135deg, #EF4444, #DC2626); }
.status-unstarted { background: linear-gradient(135deg, #6B7280, #4B5563); }

.progress-ring-circle {
    stroke-dasharray: 251.2;
    stroke-dashoffset: 251.2;
    transition: stroke-dashoffset 0.5s cubic-bezier(0.4, 0, 0.2, 1);
}
</style>
</head>




<body class="bg-neutral-50 dark:bg-neutral-900 font-sans transition-colors duration-200">
<!-- Material Design App Bar -->
<header id="mainHeader" class="bg-white dark:bg-neutral-800 shadow-material-2 sticky top-0 z-50">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex items-center justify-between h-16">

<!-- Logo & Brand -->
<div class="flex items-center space-x-3 sm:space-x-4">
    <div class="flex items-center space-x-2 sm:space-x-3">
        <div class="w-8 h-8 sm:w-10 sm:h-10 bg-primary rounded-lg flex items-center justify-center shadow-material-1">
             <span class="text-white font-medium text-sm sm:text-lg">R</span>
        </div>

        <div>
             <h1 class="headline-6 text-neutral-800 dark:text-white">Raven</h1>
        </div>
    </div>
</div>


<!-- Desktop Navigation -->
<nav class="hidden md:flex items-center space-x-1">
    <a href="index.html" class="nav-btn px-4 py-2 text-primary font-medium button-text rounded-lg bg-primary/10">Dashboard</a>
    <a href="/practice/index.html" class="nav-btn px-4 py-2 text-neutral-600 dark:text-neutral-400 hover:text-primary button-text rounded-lg hover:bg-neutral-100 dark:hover:bg-neutral-700">Practice</a>
    <a href="mock-exam.html" class="nav-btn px-4 py-2 text-neutral-600 dark:text-neutral-400 hover:text-primary button-text rounded-lg hover:bg-neutral-100 dark:hover:bg-neutral-700">Mock Exams</a>
    <a href="#" id="analyticsNavBtn" class="nav-btn px-4 py-2 text-neutral-600 dark:text-neutral-400 hover:text-primary button-text rounded-lg hover:bg-neutral-100 dark:hover:bg-neutral-700">Analytics</a>
    <a href="subjects.html" class="nav-btn px-4 py-2 text-neutral-600 dark:text-neutral-400 hover:text-primary button-text rounded-lg hover:bg-neutral-100 dark:hover:bg-neutral-700">Study</a>
    <a href="referral/index.html" class="nav-btn px-4 py-2 text-neutral-600 dark:text-neutral-400 hover:text-primary button-text rounded-lg hover:bg-neutral-100 dark:hover:bg-neutral-700">Refer & Earn</a>
</nav>


            <!-- Mobile & Desktop Actions -->
            <div class="flex items-center space-x-2 sm:space-x-3">

                <!-- Logout Button -->
                <button id="logoutBtn" class="hidden material-button touch-target px-3 py-2 bg-error text-white rounded-lg text-sm" onclick="logout()">
                    Logout
                </button>

                <!-- Mobile Menu Button -->
                <button onclick="toggleMobileMenu()" class="md:hidden material-button touch-target w-10 h-10 bg-neutral-100 dark:bg-neutral-700 rounded-full flex items-center justify-center text-neutral-600 dark:text-neutral-400 hover:bg-neutral-200 dark:hover:bg-neutral-600">
                <span class="material-icons text-lg">menu</span>
                </button>

                <!-- User Avatar -->
                <div id="userAvatar" class="w-8 h-8 sm:w-10 sm:h-10 bg-accent rounded-full flex items-center justify-center shadow-material-1">
                    <span class="text-white font-medium text-xs sm:text-sm" id="userInitials">DM</span>
                </div>

            </div>

         </div>
    </div>
</header>


<!-- Mobile Menu Overlay -->
<div id="mobileMenuOverlay" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden md:hidden" onclick="toggleMobileMenu()"></div>

<!-- Mobile Menu Drawer -->
<nav id="mobileMenu" class="fixed top-0 left-0 h-full w-80 max-w-sm bg-white dark:bg-neutral-800 shadow-material-4 z-50 transform -translate-x-full transition-transform duration-300 md:hidden">
        <div class="flex flex-col h-full">

        <!-- Mobile Menu Header -->
        <div class="flex items-center justify-between p-4 border-b border-neutral-200 dark:border-neutral-700">
                <div class="flex items-center space-x-3">
                    <div class="w-8 h-8 bg-primary rounded-lg flex items-center justify-center shadow-material-1">
                    <span class="text-white font-medium text-sm">R</span>
                </div>

                <div>
                    <h2 class="subtitle-1 text-neutral-800 dark:text-white">Raven</h2>
                </div>

                </div>

                <button onclick="toggleMobileMenu()" class="material-button w-10 h-10 rounded-full flex items-center justify-center text-neutral-600 dark:text-neutral-400 hover:bg-neutral-100 dark:hover:bg-neutral-700">
                    <span class="material-icons">close</span>
                </button>
        </div>

        <!-- Mobile Menu Items -->
        <div class="flex-1 overflow-y-auto p-4">

                <div class="space-y-2">
                <a href="index.html" class="flex items-center space-x-3 p-3 text-primary dark:text-accent bg-primary/10 rounded-lg" onclick="toggleMobileMenu()">
                 <span class="material-icons">dashboard</span>
                    <span class="subtitle-1">Dashboard</span>
                </a>

                <a href="practice/index.html" class="flex items-center space-x-3 p-3 text-neutral-600 dark:text-neutral-400 hover:bg-neutral-100 dark:hover:bg-neutral-700 rounded-lg" onclick="toggleMobileMenu()">
                    <span class="material-icons">quiz</span>
                    <span class="subtitle-1">Practice</span>
                </a>

                <a href="subjects.html" class="flex items-center space-x-3 p-3 text-neutral-600 dark:text-neutral-400 hover:bg-neutral-100 dark:hover:bg-neutral-700 rounded-lg" onclick="toggleMobileMenu()">
                    <span class="material-icons">school</span>
                    <span class="subtitle-1">Study</span>
                </a>

                <button id="mobileAnalyticsBtn" class="w-full flex items-center space-x-3 p-3 text-neutral-600 dark:text-neutral-400 hover:bg-neutral-100 dark:hover:bg-neutral-700 rounded-lg" onclick="showAnalyticsFromMobile()">
                    <span class="material-icons">analytics</span>
                    <span class="subtitle-1">Analytics</span>
                </button>

                <a href="#" class="flex items-center space-x-3 p-3 text-neutral-600 dark:text-neutral-400 hover:bg-neutral-100 dark:hover:bg-neutral-700 rounded-lg" onclick="toggleMobileMenu()">
                    <span class="material-icons">person_add</span>
                    <span class="subtitle-1">Refer & Earn</span>
                </a>

                <a href="/jamb/brain-games/index.html" class="flex items-center space-x-3 p-3 text-neutral-600 dark:text-neutral-400 hover:bg-neutral-100 dark:hover:bg-neutral-700 rounded-lg" onclick="toggleMobileMenu()">
                    <span class="material-icons">psychology</span>
                    <span class="subtitle-1">Brain & Memory Games</span>
                </a>

                <button onclick="openSettingsModal(); toggleMobileMenu();" class="flex items-center space-x-3 p-3 text-neutral-600 dark:text-neutral-400 hover:bg-neutral-100 dark:hover:bg-neutral-700 rounded-lg w-full text-left">
                    <span class="material-icons">settings</span>
                    <span class="subtitle-1">Settings</span>
                </button>

                </div>
        </div>

        <!-- Mobile Menu Footer -->
        <div class="p-4 border-t border-neutral-200 dark:border-neutral-700">
            <div class="flex items-center space-x-3 p-3 bg-accent/10 rounded-lg">

            <div class="w-10 h-10 bg-accent rounded-full flex items-center justify-center">
                <span class="text-white font-medium text-sm" id="mobileUserInitials">DM</span>
            </div>

            <div>
                <p class="subtitle-2 text-neutral-800 dark:text-white" id="mobileUserName">Username</p>
                <p class="caption text-neutral-600 dark:text-neutral-400">Student</p>
            </div>

            </div>
        </div>
        </div>
</nav>



<main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 sm:py-8">

<!-- Landing Page (Initial View - No Auth) -->
<section id="landingSection" class="hidden-content">
<div class="min-h-screen flex items-center justify-center">
<div class="material-card bg-white dark:bg-neutral-800 rounded-2xl p-8 max-w-md w-full shadow-material-3 text-center">
<div class="mb-6">
<div class="w-20 h-20 bg-primary rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-material-2">
<span class="material-icons text-4xl text-white">school</span>
</div>
<h2 class="headline-4 text-neutral-800 dark:text-white mb-2">Welcome to Raven</h2>
<p class="body-1 text-neutral-600 dark:text-neutral-400">Your gateway to exam success</p>
</div>
<div class="space-y-3">


<button onclick="showSection(loginSection)" class="material-button w-full px-6 py-3 bg-primary text-white rounded-xl shadow-material-1 hover:shadow-material-2 ripple">
<span class="button-text">Login</span>
</button>

<button onclick="showSection(registerSection)" class="material-button w-full px-6 py-3 border-2 border-primary dark:border-white text-primary dark:text-white rounded-xl hover:bg-primary/10">
<span class="button-text">Register</span>
</button>

</div>
</div>
</div>
</section>

<!-- Login Form -->
<section id="loginSection" class="hidden-content">
<div class="min-h-screen flex items-center justify-center">
<div class="material-card bg-white dark:bg-neutral-800 rounded-2xl p-8 max-w-md w-full shadow-material-3">
<div class="text-center mb-6">
<div class="w-16 h-16 bg-primary rounded-xl flex items-center justify-center mx-auto mb-4">
<span class="material-icons text-3xl text-white">person</span>
</div>
<h2 class="headline-4 text-neutral-800 dark:text-white mb-2">Login to Your Account</h2>
<p class="body-2 text-neutral-600 dark:text-neutral-400">Access your courses and continue learning</p>
</div>
<form id="loginForm" class="space-y-4">
<div>
<label class="block subtitle-2 text-neutral-700 dark:text-neutral-300 mb-2">Email Address</label>
<input type="email" id="loginEmail" required class="w-full px-4 py-3 border border-neutral-300 dark:border-neutral-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary dark:bg-neutral-700 dark:text-white" placeholder="Enter your email" style="font-size: 16px;">
</div>
<div>
<label class="block subtitle-2 text-neutral-700 dark:text-neutral-300 mb-2">Password</label>
<input type="password" id="loginPassword" required class="w-full px-4 py-3 border border-neutral-300 dark:border-neutral-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary dark:bg-neutral-700 dark:text-white" placeholder="Enter your password" style="font-size: 16px;">
</div>
<button type="submit" class="material-button w-full px-6 py-3 bg-primary text-white rounded-xl shadow-material-1 hover:shadow-material-2 ripple">
<span class="button-text">Login</span>
</button>
</form>
<div class="text-center mt-4">
<p class="body-2 text-neutral-600 dark:text-neutral-400">Don't have an account? <a href="#" onclick="showSection(registerSection); return false;" class="text-primary font-medium">Register here</a></p>
</div>
</div>
</div>
</section>

<!-- Register Form -->
<section id="registerSection" class="hidden-content">

<div class="min-h-screen flex items-center justify-center py-8">
<div class="material-card bg-white dark:bg-neutral-800 rounded-2xl p-8 max-w-2xl w-full shadow-material-3">
<div class="text-center mb-6">

    <div class="w-16 h-16 bg-accent rounded-xl flex items-center justify-center mx-auto mb-4">
<span class="material-icons text-3xl text-white">person_add</span>
</div>
<h2 class="headline-4 text-neutral-800 dark:text-white mb-2">Create an Account</h2>
<p class="body-2 text-neutral-600 dark:text-neutral-400">Join thousands of students tracking their knowledge with us</p>
</div>



<form id="registerForm" class="space-y-4">

            <div>
                <label class="block subtitle-2 text-neutral-700 dark:text-neutral-300 mb-2">Full Name</label>
                <input type="text" id="registerName" required class="w-full px-4 py-3 border border-neutral-300 dark:border-neutral-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent dark:bg-neutral-700 dark:text-white" placeholder="Enter your full name" style=" font-size: 16px; ">
            </div>

            <div>
            <label class="block subtitle-2 text-neutral-700 dark:text-neutral-300 mb-2">Email Address</label>
            <input type="email" id="registerEmail" required class="w-full px-4 py-3 border border-neutral-300 dark:border-neutral-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent dark:bg-neutral-700 dark:text-white" placeholder="Enter your email" style="font-size: 16px;">
            </div>

            <div>
            <label class="block subtitle-2 text-neutral-700 dark:text-neutral-300 mb-2">Institute of Choice</label>
            <select id="registerInstitute" required class="w-full px-4 py-3 border border-neutral-300 dark:border-neutral-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent dark:bg-neutral-700 dark:text-white" style="font-size: 16px;">
            <option value="">Select your target institution</option>
            <option value="UNILAG">University of Lagos (UNILAG)</option>
            <option value="UI">University of Ibadan (UI)</option>
            <option value="OAU">Obafemi Awolowo University (OAU)</option>
            <option value="UNILORIN">University of Ilorin (UNILORIN)</option>
            <option value="FUTA">Federal University of Technology, Akure (FUTA)</option>
            <option value="UNIBEN">University of Benin (UNIBEN)</option>
            <option value="UNN">University of Nigeria, Nsukka (UNN)</option>
            <option value="COVENANT">Covenant University</option>
            <option value="OTHER">Other</option>
            </select>
            </div>


             <div>
                    <label class="block subtitle-2 text-neutral-700 dark:text-neutral-300 mb-2"> Course </label>
                    <input type="text" id="registerCourse" required class="w-full px-4 py-3 border border-neutral-300 dark:border-neutral-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent dark:bg-neutral-700 dark:text-white" placeholder="Enter your course" style="font-size: 16px;">
            </div>

            <!-- JAMB Subjects Selection -->
            <div>
                <label class="block subtitle-2 text-neutral-700 dark:text-neutral-300 mb-2">
                    JAMB Subjects
                    <span class="caption text-neutral-500 dark:text-neutral-400 ml-2">(Select 3 additional subjects)</span>
                </label>
                <div id="subjectSelectionMessage" class="mb-2 text-sm text-accent font-medium"></div>

                <div class="grid grid-cols-1 sm:grid-cols-2 gap-3 max-h-96 overflow-y-auto p-2 border border-neutral-300 dark:border-neutral-600 rounded-lg">
                    <!-- Use of English (Pre-selected and disabled) -->
                    <div>
                        <input type="checkbox" id="subject-english" class="subject-checkbox" checked disabled value="Use of English">
                        <label for="subject-english" class="subject-label">
                            <div class="subject-checkmark"></div>
                            <span class="body-2 dark:success">Use of English</span>
                            <span class="ml-auto text-xs text-accent">(Required)</span>
                        </label>
                    </div>

                    <!-- Other subjects -->
                    <div>
                        <input type="checkbox" id="subject-mathematics" class="subject-checkbox" value="Mathematics">
                        <label for="subject-mathematics" class="subject-label">
                            <div class="subject-checkmark"></div>
                            <span class="body-2 dark:text-white">Mathematics</span>
                        </label>
                    </div>

                    <div>
                        <input type="checkbox" id="subject-physics" class="subject-checkbox" value="Physics">
                        <label for="subject-physics" class="subject-label">
                            <div class="subject-checkmark"></div>
                            <span class="body-2 dark:text-white">Physics</span>
                        </label>
                    </div>

                    <div>
                        <input type="checkbox" id="subject-chemistry" class="subject-checkbox" value="Chemistry">
                        <label for="subject-chemistry" class="subject-label">
                            <div class="subject-checkmark"></div>
                            <span class="body-2 dark:text-white">Chemistry</span>
                        </label>
                    </div>

                    <div>
                        <input type="checkbox" id="subject-biology" class="subject-checkbox" value="Biology">
                        <label for="subject-biology" class="subject-label">
                            <div class="subject-checkmark"></div>
                            <span class="body-2 dark:text-white">Biology</span>
                        </label>
                    </div>

                    <div>
                        <input type="checkbox" id="subject-economics" class="subject-checkbox" value="Economics">
                        <label for="subject-economics" class="subject-label">
                            <div class="subject-checkmark"></div>
                            <span class="body-2 dark:text-white">Economics</span>
                        </label>
                    </div>

                    <div>
                        <input type="checkbox" id="subject-accounting" class="subject-checkbox" value="Accounting">
                        <label for="subject-accounting" class="subject-label">
                            <div class="subject-checkmark"></div>
                            <span class="body-2 dark:text-white">Accounting</span>
                        </label>
                    </div>

                    <div>
                        <input type="checkbox" id="subject-agriculture" class="subject-checkbox" value="Agriculture">
                        <label for="subject-agriculture" class="subject-label">
                            <div class="subject-checkmark"></div>
                            <span class="body-2 dark:text-white">Agriculture</span>
                        </label>
                    </div>

                    <div>
                        <input type="checkbox" id="subject-art" class="subject-checkbox" value="Art">
                        <label for="subject-art" class="subject-label">
                            <div class="subject-checkmark"></div>
                            <span class="body-2 dark:text-white">Art</span>
                        </label>
                    </div>

                    <div>
                        <input type="checkbox" id="subject-commerce" class="subject-checkbox" value="Commerce">
                        <label for="subject-commerce" class="subject-label">
                            <div class="subject-checkmark"></div>
                            <span class="body-2 dark:text-white">Commerce</span>
                        </label>
                    </div>

                    <div>
                        <input type="checkbox" id="subject-computer" class="subject-checkbox" value="Computer">
                        <label for="subject-computer" class="subject-label">
                            <div class="subject-checkmark"></div>
                            <span class="body-2 dark:text-white">Computer</span>
                        </label>
                    </div>

                    <div>
                        <input type="checkbox" id="subject-crs" class="subject-checkbox" value="CRS">
                        <label for="subject-crs" class="subject-label">
                            <div class="subject-checkmark"></div>
                            <span class="body-2 dark:text-white">CRS</span>
                        </label>
                    </div>

                    <div>
                        <input type="checkbox" id="subject-geography" class="subject-checkbox" value="Geography">
                        <label for="subject-geography" class="subject-label">
                            <div class="subject-checkmark"></div>
                            <span class="body-2 dark:text-white">Geography</span>
                        </label>
                    </div>

                    <div>
                        <input type="checkbox" id="subject-government" class="subject-checkbox" value="Government">
                        <label for="subject-government" class="subject-label">
                            <div class="subject-checkmark"></div>
                            <span class="body-2 dark:text-white">Government</span>
                        </label>
                    </div>

                    <div>
                        <input type="checkbox" id="subject-history" class="subject-checkbox" value="History">
                        <label for="subject-history" class="subject-label">
                            <div class="subject-checkmark"></div>
                            <span class="body-2 dark:text-white">History</span>
                        </label>
                    </div>

                    <div>
                        <input type="checkbox" id="subject-home-economics" class="subject-checkbox" value="Home Economics">
                        <label for="subject-home-economics" class="subject-label">
                            <div class="subject-checkmark"></div>
                            <span class="body-2 dark:text-white">Home Economics</span>
                        </label>
                    </div>

                    <div>
                        <input type="checkbox" id="subject-islamic-studies" class="subject-checkbox" value="Islamic Studies">
                        <label for="subject-islamic-studies" class="subject-label">
                            <div class="subject-checkmark"></div>
                            <span class="body-2 dark:text-white">Islamic Studies</span>
                        </label>
                    </div>

                    <div>
                        <input type="checkbox" id="subject-literature" class="subject-checkbox" value="Literature">
                        <label for="subject-literature" class="subject-label">
                            <div class="subject-checkmark"></div>
                            <span class="body-2 dark:text-white">Literature</span>
                        </label>
                    </div>

                    <div>
                        <input type="checkbox" id="subject-physical-health" class="subject-checkbox" value="Physical and Health Education">
                        <label for="subject-physical-health" class="subject-label">
                            <div class="subject-checkmark"></div>
                            <span class="body-2 dark:text-white">Physical and Health Education</span>
                        </label>
                    </div>

                    <div>
                        <input type="checkbox" id="subject-music" class="subject-checkbox" value="Music">
                        <label for="subject-music" class="subject-label">
                            <div class="subject-checkmark"></div>
                            <span class="body-2 dark:text-white">Music</span>
                        </label>
                    </div>
                </div>
            </div>

            <div>
            <label class="block subtitle-2 text-neutral-700 dark:text-neutral-300 mb-2">Target Score (JAMB)</label>
            <input type="number" id="registerTargetScore" required min="180" max="400" class="w-full px-4 py-3 border border-neutral-300 dark:border-neutral-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent dark:bg-neutral-700 dark:text-white" placeholder="e.g., 320" style="font-size: 16px;">
            </div>

            <div>
            <label class="block subtitle-2 text-neutral-700 dark:text-neutral-300 mb-2">Password</label>
            <input type="password" id="registerPassword" required class="w-full px-4 py-3 border border-neutral-300 dark:border-neutral-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent dark:bg-neutral-700 dark:text-white" placeholder="Create a password" style="font-size: 16px;">
            </div>

            <div>
            <label class="block subtitle-2 text-neutral-700 dark:text-neutral-300 mb-2">Confirm Password</label>
            <input type="password" id="registerConfirmPassword" required class="w-full px-4 py-3 border border-neutral-300 dark:border-neutral-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent dark:bg-neutral-700 dark:text-white" placeholder="Confirm your password" style="font-size: 16px;">
            </div>

            <button type="submit" class="material-button w-full px-6 py-3 bg-accent text-white rounded-xl shadow-material-1 hover:shadow-material-2 ripple">
            <span class="button-text">Register</span>
            </button>

</form>


<div class="text-center mt-4">
<p class="body-2 text-neutral-600 dark:text-neutral-400">Already have an account? <a href="#" onclick="showSection(loginSection); return false;" class="text-accent font-medium">Login here</a></p>
</div>
</div>
</div>
</section>

<!-- Subscription Plans Page -->
<section id="paymentSection" class="hidden-content">
<div class="min-h-screen flex items-center justify-center py-8">
<div class="material-card bg-white dark:bg-neutral-800 rounded-2xl p-8 max-w-5xl w-full shadow-material-3">
<div class="text-center mb-8">
<div class="w-20 h-20 bg-accent rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-material-2">
<span class="material-icons text-4xl text-white">card_membership</span>
</div>
<h2 class="headline-4 text-neutral-800 dark:text-white mb-2">Choose Your Plan</h2>
<p class="body-1 text-neutral-600 dark:text-neutral-400">Select the perfect subscription for your exam preparation journey</p>
</div>

<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">

<!-- Free Trial -->
<div class="material-card bg-neutral-50 dark:bg-neutral-900 border-2 border-neutral-200 dark:border-neutral-600 rounded-xl p-6">
<div class="text-center mb-4">
<h4 class="subtitle-1 text-neutral-800 dark:text-white mb-2">Free Trial</h4>
<div class="flex items-baseline justify-center mb-2">
<span class="headline-4 text-primary dark:text-accent">FREE</span>
</div>
<p class="caption text-neutral-600 dark:text-neutral-400">(1 week)</p>
</div>
<ul class="space-y-2 mb-6">
<li class="flex items-start">
<span class="material-icons text-success text-sm mr-2 mt-0.5">check_circle</span>
<span class="body-2 text-neutral-700 dark:text-neutral-300">Unlimited practice questions</span>
</li>
<li class="flex items-start">
<span class="material-icons text-success text-sm mr-2 mt-0.5">check_circle</span>
<span class="body-2 text-neutral-700 dark:text-neutral-300">Performance analytics</span>
</li>
</ul>
<button onclick="handlePayment('free-trial')" class="material-button w-full px-4 py-2 border-2 border-primary dark:border-accent text-primary dark:text-accent rounded-lg hover:bg-primary/10 dark:hover:bg-accent/10">
<span class="button-text">Get Started</span>
</button>
</div>

<!-- Option 1 - Try First -->
<div class="material-card bg-neutral-50 dark:bg-neutral-900 border-2 border-neutral-200 dark:border-neutral-600 rounded-xl p-6">
<div class="text-center mb-4">
<h4 class="subtitle-1 text-neutral-800 dark:text-white mb-2">Option 1 - Try First</h4>
<div class="flex items-baseline justify-center mb-2">
<span class="headline-4 text-primary dark:text-accent">₦1,500</span>
<span class="body-2 text-neutral-600 dark:text-neutral-400 ml-2">/ 1 month</span>
</div>
<p class="caption text-neutral-600 dark:text-neutral-400 italic">Perfect for testing the platform</p>
</div>
<ul class="space-y-2 mb-6">
<li class="flex items-start">
<span class="material-icons text-success text-sm mr-2 mt-0.5">check_circle</span>
<span class="body-2 text-neutral-700 dark:text-neutral-300">Unlimited practice questions</span>
</li>
<li class="flex items-start">
<span class="material-icons text-success text-sm mr-2 mt-0.5">check_circle</span>
<span class="body-2 text-neutral-700 dark:text-neutral-300">Mock exams</span>
</li>
<li class="flex items-start">
<span class="material-icons text-success text-sm mr-2 mt-0.5">check_circle</span>
<span class="body-2 text-neutral-700 dark:text-neutral-300">Performance analytics</span>
</li>
</ul>
<button class="material-button w-full px-4 py-2 border-2 border-neutral-300 dark:border-neutral-600 text-neutral-600 dark:text-neutral-400 rounded-lg cursor-not-allowed">
<span class="button-text">Coming Soon</span>
</button>
</div>

<!-- Option 2 - Short Term -->
<div class="material-card bg-neutral-50 dark:bg-neutral-900 border-2 border-neutral-200 dark:border-neutral-600 rounded-xl p-6">
<div class="text-center mb-4">
<h4 class="subtitle-1 text-neutral-800 dark:text-white mb-2">Option 2 - Short Term</h4>
<div class="flex items-baseline justify-center mb-2">
<span class="headline-4 text-primary dark:text-accent">₦3,000</span>
<span class="body-2 text-neutral-600 dark:text-neutral-400 ml-2">/ 3 months</span>
</div>
<p class="caption text-neutral-600 dark:text-neutral-400 italic">Just ₦1,000/month - 33% savings!</p>
</div>
<ul class="space-y-2 mb-6">
<li class="flex items-start">
<span class="material-icons text-success text-sm mr-2 mt-0.5">check_circle</span>
<span class="body-2 text-neutral-700 dark:text-neutral-300">Unlimited practice questions</span>
</li>
<li class="flex items-start">
<span class="material-icons text-success text-sm mr-2 mt-0.5">check_circle</span>
<span class="body-2 text-neutral-700 dark:text-neutral-300">Mock exams</span>
</li>
<li class="flex items-start">
<span class="material-icons text-success text-sm mr-2 mt-0.5">check_circle</span>
<span class="body-2 text-neutral-700 dark:text-neutral-300">Performance analytics</span>
</li>
</ul>
<button class="material-button w-full px-4 py-2 border-2 border-neutral-300 dark:border-neutral-600 text-neutral-600 dark:text-neutral-400 rounded-lg cursor-not-allowed">
<span class="button-text">Coming Soon</span>
</button>
</div>

<!-- Option 3 - Medium Term -->
<div class="material-card bg-neutral-50 dark:bg-neutral-900 border-2 border-neutral-200 dark:border-neutral-600 rounded-xl p-6">
<div class="text-center mb-4">
<h4 class="subtitle-1 text-neutral-800 dark:text-white mb-2">Option 3 - Medium Term</h4>
<div class="flex items-baseline justify-center mb-2">
<span class="headline-4 text-primary dark:text-accent">₦6,000</span>
<span class="body-2 text-neutral-600 dark:text-neutral-400 ml-2">/ 6 months</span>
</div>
<p class="caption text-neutral-600 dark:text-neutral-400 italic">Only ₦1,000/month - save ₦3,000!</p>
</div>
<ul class="space-y-2 mb-6">
<li class="flex items-start">
<span class="material-icons text-success text-sm mr-2 mt-0.5">check_circle</span>
<span class="body-2 text-neutral-700 dark:text-neutral-300">Unlimited practice questions</span>
</li>
<li class="flex items-start">
<span class="material-icons text-success text-sm mr-2 mt-0.5">check_circle</span>
<span class="body-2 text-neutral-700 dark:text-neutral-300">Mock exams</span>
</li>
<li class="flex items-start">
<span class="material-icons text-success text-sm mr-2 mt-0.5">check_circle</span>
<span class="body-2 text-neutral-700 dark:text-neutral-300">Performance analytics</span>
</li>
<li class="flex items-start">
<span class="material-icons text-success text-sm mr-2 mt-0.5">check_circle</span>
<span class="body-2 text-neutral-700 dark:text-neutral-300">Priority support</span>
</li>
</ul>
<button class="material-button w-full px-4 py-2 border-2 border-neutral-300 dark:border-neutral-600 text-neutral-600 dark:text-neutral-400 rounded-lg cursor-not-allowed">
<span class="button-text">Coming Soon</span>
</button>
</div>

<!-- Option 4 - BEST VALUE (Annual) -->
<div class="material-card bg-primary dark:bg-primary-600 rounded-xl p-6 relative overflow-hidden lg:col-span-2">
<div class="absolute top-0 right-0 bg-warning text-white px-3 py-1 text-xs font-semibold rounded-bl-lg">
BEST VALUE
</div>
<div class="text-center mb-4">
<h4 class="subtitle-1 text-white mb-2">Option 4 - Annual Plan</h4>
<div class="flex items-baseline justify-center mb-2">
<span class="headline-4 text-white">₦10,000</span>
<span class="body-2 text-primary-100 ml-2">/ 12 months</span>
</div>
<p class="caption text-primary-100 italic">Just ₦833/month - save ₦8,000 total!</p>
</div>
<ul class="space-y-2 mb-6">
<li class="flex items-start">
<span class="material-icons text-accent text-sm mr-2 mt-0.5">check_circle</span>
<span class="body-2 text-white">Unlimited practice questions</span>
</li>
<li class="flex items-start">
<span class="material-icons text-accent text-sm mr-2 mt-0.5">check_circle</span>
<span class="body-2 text-white">Mock exams</span>
</li>
<li class="flex items-start">
<span class="material-icons text-accent text-sm mr-2 mt-0.5">check_circle</span>
<span class="body-2 text-white">Performance analytics</span>
</li>
<li class="flex items-start">
<span class="material-icons text-accent text-sm mr-2 mt-0.5">check_circle</span>
<span class="body-2 text-white">Priority support</span>
</li>
<li class="flex items-start">
<span class="material-icons text-accent text-sm mr-2 mt-0.5">check_circle</span>
<span class="body-2 text-white">Exclusive study materials</span>
</li>
</ul>
<button class="material-button w-full px-4 py-2 bg-white/20 border-2 border-white/40 text-white rounded-lg cursor-not-allowed">
<span class="button-text">Coming Soon</span>
</button>
</div>

</div>

<div class="mt-8 text-center">
<p class="body-2 text-neutral-600 dark:text-neutral-400">Secure payment powered by Paystack</p>
</div>
</div>
</div>
</section>



        <!-- Dashboard Page (Original Content) -->
        <section id="dashboardSection" class="hidden-content">

                <!-- Hero Banner with Material Design -->
                <div class="bg-gradient-to-r from-primary to-primary-700 rounded-xl sm:rounded-2xl p-4 sm:p-8 text-white mb-6 sm:mb-8 shadow-material-3 relative overflow-hidden">
                <div class="relative z-10">
                <div class="flex items-center justify-between">
                <div class="max-w-2xl">

                <h2 class="headline-4 mb-2 sm:mb-4">Hey, <span id="dashboardUserName">Student</span>!</h2>

                <p class="subtitle-1 text-primary-100 mb-4 sm:mb-6">Ready to ace your JAMB, WAEC and NECO exam? Track your study for detailed analysis.</p>

                <button onclick="startQuickPractice()" class="material-button px-4 sm:px-6 py-2 sm:py-3 bg-accent text-white rounded-lg shadow-material-2 hover:shadow-material-3 ripple touch-target">
                <span class="button-text">Start Quick Practice</span>

                </button>
                </div>
                <div class="hidden lg:block">
                <div class="w-32 h-32 bg-white/10 rounded-full flex items-center justify-center backdrop-blur-sm">
                <span class="material-icons text-5xl text-white">school</span>
                </div>
                </div>
                </div>
                </div>

                <!-- Decorative elements -->
                <div class="absolute
                top-0
                right-0
                w-40
                h-40
                bg-white/5
                rounded-full
                -mr-20
                -mt-20"></div>
                <div class="absolute bottom-0 left-0 w-24 h-24 bg-white/5 rounded-full -ml-12 -mb-12"></div>
                </div>

                <!-- Stats Cards -->
                    <div class="grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-6 mb-6 sm:mb-8">
                        <div class="material-card bg-white dark:bg-neutral-800 rounded-xl sm:rounded-2xl p-3 sm:p-6 shadow-material-1">
                            <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between mb-2 sm:mb-4">
                                <div class="w-8 h-8 sm:w-12 sm:h-12 bg-data-50 dark:bg-data-500 rounded-lg sm:rounded-xl flex items-center justify-center mb-2 sm:mb-0">
                                    <span class="material-icons text-data-500 dark:text-white text-sm sm:text-base">school</span>
                                </div>

                                <div class="text-left sm:text-right">
                                    <p class="overline text-neutral-600 dark:text-neutral-400 text-xs">Institute of choice</p>
                                    <p class="headline-5 text-neutral-800 dark:text-white" id="instituteDisplay">-</p>
                                </div>
                            </div>


                            <div class="flex items-center space-x-2">
                                <span class="caption text-success bg-success/10 px-2 py-1 rounded-full text-xs" id="courseDisplay">course</span>
                            </div>
                        </div>

                        <div class="material-card bg-white dark:bg-neutral-800 rounded-xl sm:rounded-2xl p-3 sm:p-6 shadow-material-1">
                            <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between mb-2 sm:mb-4">
                                <div class="w-8 h-8 sm:w-12 sm:h-12 bg-success/10 rounded-lg sm:rounded-xl flex items-center justify-center mb-2 sm:mb-0">
                                    <span class="material-icons text-success text-sm sm:text-base">emoji_events</span>
                                </div>

                                <div class="text-left sm:text-right">
                                    <p class="overline text-neutral-600 dark:text-neutral-400 text-xs">Target Score</p>
                                    <p class="headline-5 text-neutral-800 dark:text-white" id="targetScoreDisplay">-</p>
                                </div>
                            </div>

                        </div>


                        <div class="material-card bg-white dark:bg-neutral-800 rounded-xl sm:rounded-2xl p-3 sm:p-6 shadow-material-1">
                                <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between mb-2 sm:mb-4">
                                    <div class="w-8 h-8 sm:w-12 sm:h-12 bg-warning/10 rounded-lg sm:rounded-xl flex items-center justify-center mb-2 sm:mb-0">
                                        <span class="material-icons text-warning text-sm sm:text-base">local_fire_department</span>
                                    </div>

                                    <div class="text-left sm:text-right">
                                        <p class="overline text-neutral-600 dark:text-neutral-400 text-xs">Study Streak</p>
                                        <p class="headline-5 text-neutral-800 dark:text-white" id="studyStreakCount">0 days</p>
                                    </div>
                                </div>
                        </div>

                        <div class="material-card bg-white dark:bg-neutral-800 rounded-xl sm:rounded-2xl p-3 sm:p-6 shadow-material-1">
                                <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between mb-2 sm:mb-4">

                                    <div class="w-8 h-8 sm:w-12 sm:h-12 bg-success/10 rounded-lg sm:rounded-xl flex items-center justify-center mb-2 sm:mb-0">
                                    <span class="material-icons text-success text-sm sm:text-base">check_circle</span>
                                </div>

                                <div class="text-left sm:text-right">
                                    <p class="overline text-neutral-600 dark:text-neutral-400 text-xs">Correct Answers</p>
                                    <p class="headline-5 text-neutral-800 dark:text-white" id="correctAnswersCount">0</p>
                                </div>
                                </div>

                                <div class="flex items-center space-x-2">
                                        <span class="caption text-success bg-success/10 px-2 py-1 rounded-full text-xs" id="accuracyPercentage">0% accuracy</span>
                                </div>

                        </div>

                </div>
                <!-- End of Stats Cards -->

                <!-- Progress Section (from Code B) -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6 sm:mb-8">
                    <div class="material-card bg-white dark:bg-neutral-800 border border-neutral-300 dark:border-neutral-600 rounded-xl p-6 shadow-material-2">
                        <div class="flex items-center space-x-3 mb-4">
                            <span class="material-icons text-data">trending_up</span>
                            <h3 class="headline-6 text-neutral-800 dark:text-white">Overall Performance</h3>
                        </div>
                        <div id="overallStats"></div>
                    </div>
                    <div class="material-card bg-white dark:bg-neutral-800 border border-neutral-300 dark:border-neutral-600 rounded-xl p-6 shadow-material-2">
                        <div class="flex items-center space-x-3 mb-4">
                            <span class="material-icons text-accent">subject</span>
                            <h3 class="headline-6 text-neutral-800 dark:text-white">Subject Breakdown</h3>
                        </div>
                        <div id="subjectStats"></div>
                    </div>
                </div>

        </section>

        <!-- Analytics Interface (from Code B) -->
        <section id="analyticsSection" class="hidden-content">
            <div class="text-center mb-8 sm:mb-12 fade-in">
                <div class="w-16 h-16 sm:w-20 sm:h-20 bg-gradient-to-br from-primary to-accent rounded-2xl flex items-center justify-center mx-auto mb-4 sm:mb-6 shadow-material-3">
                    <span class="material-icons text-white text-2xl sm:text-3xl">analytics</span>
                </div>

                <h2 class="headline-4 text-neutral-800 dark:text-white mb-3 sm:mb-4">Performance Analytics</h2>

                <p class="subtitle-1 text-neutral-600 dark:text-neutral-400 max-w-2xl mx-auto">
                    Deep insights into your learning patterns and performance metrics.
                </p>
            </div>



            <!-- Overview Cards -->
            <div class="grid grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 mb-6 sm:mb-8">
                <div class="material-card bg-white dark:bg-neutral-800 border border-neutral-300 dark:border-neutral-600 rounded-xl p-4 sm:p-6 shadow-material-2">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="caption text-neutral-600 dark:text-neutral-400 text-xs sm:text-sm">Overall Score</p>
                            <p class="text-xl sm:text-2xl lg:text-3xl font-bold text-accent" id="analyticsOverallScore">--%</p>
                        </div>
                        <div class="relative w-12 h-12 sm:w-16 sm:h-16">
                            <svg class="progress-ring w-12 h-12 sm:w-16 sm:h-16" viewBox="0 0 84 84">
                                <circle cx="42" cy="42" r="40" stroke="#e5e7eb" stroke-width="4" fill="none"/>
                                <circle cx="42" cy="42" r="40" stroke="#009F9D" stroke-width="4" fill="none"
                                        class="progress-ring-circle" id="analyticsProgressCircle" style="stroke-dasharray: 251.2; stroke-dashoffset: 251.2;"/>
                            </svg>
                            <div class="absolute inset-0 flex items-center justify-center">
                                <span class="text-xs sm:text-sm font-semibold" id="analyticsProgressText">--%</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="material-card bg-white dark:bg-neutral-800 border border-neutral-300 dark:border-neutral-600 rounded-xl p-4 sm:p-6 shadow-material-2">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="caption text-neutral-600 dark:text-neutral-400 text-xs sm:text-sm">Topics Mastered</p>
                            <p class="text-xl sm:text-2xl lg:text-3xl font-bold text-data" id="analyticsMasteredCount">--/--</p>
                        </div>
                        <div class="w-10 h-10 sm:w-12 sm:h-12 rounded-full bg-green-100 dark:bg-green-900 flex items-center justify-center">
                            <span class="material-icons text-green-600 dark:text-green-400 text-lg sm:text-xl">check_circle</span>
                        </div>
                    </div>
                </div>

                <div class="material-card bg-white dark:bg-neutral-800 border border-neutral-300 dark:border-neutral-600 rounded-xl p-4 sm:p-6 shadow-material-2">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="caption text-neutral-600 dark:text-neutral-400 text-xs sm:text-sm">Weak Areas</p>
                            <p class="text-xl sm:text-2xl lg:text-3xl font-bold text-error" id="analyticsWeakCount">--</p>
                        </div>
                        <div class="w-10 h-10 sm:w-12 sm:h-12 rounded-full bg-red-100 dark:bg-red-900 flex items-center justify-center">
                            <span class="material-icons text-red-600 dark:text-red-400 text-lg sm:text-xl">warning</span>
                        </div>
                    </div>
                </div>

                <div class="material-card bg-white dark:bg-neutral-800 border border-neutral-300 dark:border-neutral-600 rounded-xl p-4 sm:p-6 shadow-material-2">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="caption text-neutral-600 dark:text-neutral-400 text-xs sm:text-sm">Avg Time</p>
                            <p class="text-xl sm:text-2xl lg:text-3xl font-bold text-primary" id="analyticsAvgTime">--min</p>
                        </div>
                        <div class="w-10 h-10 sm:w-12 sm:h-12 rounded-full bg-orange-100 dark:bg-orange-900 flex items-center justify-center">
                            <span class="material-icons text-orange-600 dark:text-orange-400 text-lg sm:text-xl">schedule</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Charts -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6 mb-6 sm:mb-8">
                <div class="material-card bg-white dark:bg-neutral-800 border border-neutral-300 dark:border-neutral-600 rounded-xl p-4 sm:p-6 shadow-material-2">
                    <h3 class="headline-6 font-semibold mb-4 text-base sm:text-lg text-neutral-800 dark:text-white">📈 Progress Trend</h3>
                    <div class="chart-container">
                        <canvas id="analyticsTrendChart"></canvas>
                    </div>
                </div>

                <div class="material-card bg-white dark:bg-neutral-800 border border-neutral-300 dark:border-neutral-600 rounded-xl p-4 sm:p-6 shadow-material-2">
                    <h3 class="headline-6 font-semibold mb-4 text-base sm:text-lg text-neutral-800 dark:text-white">🎯 Subject Performance</h3>
                    <div class="chart-container">
                        <canvas id="analyticsSubjectChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Performance Heatmap -->
            <div class="material-card bg-white dark:bg-neutral-800 border border-neutral-300 dark:border-neutral-600 rounded-xl p-4 sm:p-6 shadow-material-2 mb-6 sm:mb-8">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="headline-6 font-semibold text-base sm:text-lg text-neutral-800 dark:text-white">🔥 Performance Heatmap</h3>
                    <div class="flex items-center space-x-2 text-xs sm:text-sm">
                        <div class="flex items-center space-x-1">
                            <div class="w-3 h-3 rounded status-excellent"></div>
                            <span class="text-neutral-600 dark:text-neutral-400">Excellent</span>
                        </div>
                        <div class="flex items-center space-x-1">
                            <div class="w-3 h-3 rounded status-good"></div>
                            <span class="text-neutral-600 dark:text-neutral-400">Good</span>
                        </div>
                        <div class="flex items-center space-x-1">
                            <div class="w-3 h-3 rounded status-average"></div>
                            <span class="text-neutral-600 dark:text-neutral-400">Average</span>
                        </div>
                        <div class="flex items-center space-x-1">
                            <div class="w-3 h-3 rounded status-weak"></div>
                            <span class="text-neutral-600 dark:text-neutral-400">Weak</span>
                        </div>
                    </div>
                </div>
                <div id="analyticsHeatmap"></div>
            </div>

            <!-- Recommendations -->
            <div class="material-card bg-white dark:bg-neutral-800 border border-neutral-300 dark:border-neutral-600 rounded-xl p-4 sm:p-6 shadow-material-2">
                <h3 class="headline-6 font-semibold mb-4 text-base sm:text-lg text-neutral-800 dark:text-white">💡 Personalized Recommendations</h3>
                <div id="analyticsRecommendations"></div>
            </div>
        </section>


</main>





<!-- Settings Modal -->
<div id="settingsModal" class="hidden modal-backdrop">
<div class="material-card bg-white dark:bg-neutral-800 rounded-2xl p-6 sm:p-8 max-w-2xl w-full shadow-material-5 modal-content">
<div class="flex items-center justify-between mb-6">
<h2 class="headline-5 text-neutral-800 dark:text-white">Account Settings</h2>
<button onclick="closeSettingsModal()" class="material-button w-10 h-10 rounded-full flex items-center justify-center text-neutral-600 dark:text-neutral-400 hover:bg-neutral-100 dark:hover:bg-neutral-700">
<span class="material-icons">close</span>
</button>
</div>

<form id="settingsForm" class="space-y-4">
<div>
<label class="block subtitle-2 text-neutral-700 dark:text-neutral-300 mb-2">Full Name</label>
<input type="text" id="settingsName" required class="w-full px-4 py-3 border border-neutral-300 dark:border-neutral-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent dark:bg-neutral-700 dark:text-white" style="font-size: 16px;">
</div>

<div>
<label class="block subtitle-2 text-neutral-700 dark:text-neutral-300 mb-2">Email Address</label>
<input type="email" id="settingsEmail" disabled class="w-full px-4 py-3 border border-neutral-300 dark:border-neutral-600 rounded-lg bg-neutral-100 dark:bg-neutral-900 text-neutral-500 cursor-not-allowed" style="font-size: 16px;">
<p class="caption text-neutral-500 mt-1">Email cannot be changed</p>
</div>

<div>
<label class="block subtitle-2 text-neutral-700 dark:text-neutral-300 mb-2">Institute of Choice</label>
<select id="settingsInstitute" required class="w-full px-4 py-3 border border-neutral-300 dark:border-neutral-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent dark:bg-neutral-700 dark:text-white" style="font-size: 16px;">
<option value="">Select your target institution</option>
<option value="UNILAG">University of Lagos (UNILAG)</option>
<option value="UI">University of Ibadan (UI)</option>
<option value="OAU">Obafemi Awolowo University (OAU)</option>
<option value="UNILORIN">University of Ilorin (UNILORIN)</option>
<option value="FUTA">Federal University of Technology, Akure (FUTA)</option>
<option value="UNIBEN">University of Benin (UNIBEN)</option>
<option value="UNN">University of Nigeria, Nsukka (UNN)</option>
<option value="COVENANT">Covenant University</option>
<option value="OTHER">Other</option>
</select>
</div>

<div>
<label class="block subtitle-2 text-neutral-700 dark:text-neutral-300 mb-2">Target Score (JAMB)</label>
<input type="number" id="settingsTargetScore" required min="180" max="400" class="w-full px-4 py-3 border border-neutral-300 dark:border-neutral-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent dark:bg-neutral-700 dark:text-white" style="font-size: 16px;">
</div>

            <div>
                <label class="block subtitle-2 text-neutral-700 dark:text-neutral-300 mb-2">Course</label>
                <input type="text" id="settingsCourse" required class="w-full px-4 py-3 border border-neutral-300 dark:border-neutral-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent dark:bg-neutral-700 dark:text-white" placeholder="Enter your course" style="font-size: 16px;">

            </div>


<div class="flex gap-3 pt-4">
<button type="submit" class="material-button flex-1 px-6 py-3 bg-accent text-white rounded-xl shadow-material-1 hover:shadow-material-2 ripple">
<span class="button-text">Save Changes</span>
</button>
<button type="button" onclick="closeSettingsModal()" class="material-button px-6 py-3 border-2 border-neutral-300 dark:border-neutral-600 text-neutral-700 dark:text-neutral-300 rounded-xl hover:bg-neutral-100 dark:hover:bg-neutral-700">
<span class="button-text">Cancel</span>
</button>
</div>
</form>
</div>
</div>

<!-- Material Design Floating Action Button -->
<a href="practice/index.html" id="fabButton" class="material-fab fixed bottom-4 right-4 sm:bottom-6 sm:right-6 bg-accent text-white shadow-material-3 hover:shadow-material-4 hidden">
<span class="material-icons">quiz</span>
</a>





<script>
/* eslint-disable no-restricted-globals */
// Global variables
let allUsers = JSON.parse(localStorage.getItem('raven_users')) || [];
let activationCodes = JSON.parse(localStorage.getItem('raven_activation_codes')) || [];
let currentUser = null;

// Analytics data global variable
let analyticsData = {
    quizResults: [],
    topicProgress: {},
    subjectProgress: {},
    timeSpent: {}
};

// DOM Elements
const landingSection = document.getElementById('landingSection');
const loginSection = document.getElementById('loginSection');
const registerSection = document.getElementById('registerSection');
const paymentSection = document.getElementById('paymentSection');
const dashboardSection = document.getElementById('dashboardSection');
const analyticsSection = document.getElementById('analyticsSection');
const mainHeader = document.getElementById('mainHeader');
const fabButton = document.getElementById('fabButton');
const logoutBtn = document.getElementById('logoutBtn');

// Initialize app
document.addEventListener('DOMContentLoaded', () => {
    initializeSubjectSelection();
    loadAnalyticsData();
    checkExistingSession();
    setupAnalyticsListeners();
});

// Analytics Data Management Functions
function loadAnalyticsData() {
    try {
        const saved = localStorage.getItem('ravenAnalytics');
        if (saved) {
            const parsed = JSON.parse(saved);
            if (validateAnalyticsData(parsed)) {
                analyticsData = parsed;
                return true;
            }
        }
    } catch (error) {
        console.error('Error loading analytics data:', error);
    }

    // Initialize with default structure
    analyticsData = {
        quizResults: [],
        topicProgress: {},
        subjectProgress: {},
        timeSpent: {}
    };
    return false;
}

function saveAnalyticsData() {
    try {
        // Primary save method
        localStorage.setItem('ravenAnalytics', JSON.stringify(analyticsData));
        return true;
    } catch (e) {
        console.error('Error saving analytics:', e);

        // Fallback method 1: Try clearing old data first
        try {
            localStorage.removeItem('ravenAnalytics');
            localStorage.setItem('ravenAnalytics', JSON.stringify(analyticsData));
            return true;
        } catch (e2) {
            console.error('Fallback save failed:', e2);

            // Fallback method 2: Try saving without oldest quiz results
            try {
                const trimmedData = {
                    ...analyticsData,
                    quizResults: analyticsData.quizResults.slice(-50) // Keep only last 50
                };
                localStorage.setItem('ravenAnalytics', JSON.stringify(trimmedData));
                analyticsData = trimmedData;
                return true;
            } catch (e3) {
                console.error('All save methods failed:', e3);
                return false;
            }
        }
    }
}

function validateAnalyticsData(data) {
    return data &&
           typeof data === 'object' &&
           Array.isArray(data.quizResults) &&
           typeof data.topicProgress === 'object' &&
           typeof data.subjectProgress === 'object' &&
           typeof data.timeSpent === 'object';
}

function saveQuizResult(score) {
    const quizResult = {
        score: score,
        date: new Date().toISOString(),
        timestamp: Date.now()
    };
    analyticsData.quizResults.push(quizResult);
    saveAnalyticsData();
}

function getTopicProgress(subjectId, topicName) {
    const key = `${subjectId}_${topicName}`;
    if (!analyticsData.topicProgress[key]) {
        analyticsData.topicProgress[key] = {
            attempts: 0,
            totalScore: 0,
            lastAttempt: null
        };
    }
    return analyticsData.topicProgress[key];
}

function getProgressBarColor(score) {
    if (score >= 80) return '#10B981';
    if (score >= 60) return '#3B82F6';
    if (score >= 40) return '#F59E0B';
    return '#EF4444';
}

function getStatusClass(score, attempts) {
    if (attempts === 0) return 'status-unstarted';
    if (score >= 80) return 'status-excellent';
    if (score >= 60) return 'status-good';
    if (score >= 40) return 'status-average';
    return 'status-weak';
}

// Setup analytics navigation listeners
function setupAnalyticsListeners() {
    // Desktop analytics button
    const analyticsNavBtn = document.getElementById('analyticsNavBtn');
    if (analyticsNavBtn) {
        analyticsNavBtn.addEventListener('click', (e) => {
            e.preventDefault();
            showAnalyticsSection();
        });
    }
}

// Show analytics from mobile menu
function showAnalyticsFromMobile() {
    toggleMobileMenu();
    showAnalyticsSection();
}

// Show analytics section
function showAnalyticsSection() {
    showSection(analyticsSection);
    renderAnalytics();
}

// Analytics rendering function
function renderAnalytics() {
    // Calculate overall statistics
    const quizResults = analyticsData.quizResults || [];
    const topicProgress = analyticsData.topicProgress || {};

    if (quizResults.length === 0) {
        document.getElementById('analyticsOverallScore').textContent = '--%';
        document.getElementById('analyticsProgressText').textContent = '--%';
        document.getElementById('analyticsMasteredCount').textContent = '0/0';
        document.getElementById('analyticsWeakCount').textContent = '0';
        document.getElementById('analyticsAvgTime').textContent = '--min';

        // Show empty state
        document.getElementById('analyticsHeatmap').innerHTML = '<p class="text-neutral-600 dark:text-neutral-400 text-center py-8">No quiz data available yet. Complete some quizzes to see your performance heatmap!</p>';
        document.getElementById('analyticsRecommendations').innerHTML = '<p class="text-neutral-600 dark:text-neutral-400 text-center py-4">Recommendations will appear here after completing quizzes.</p>';

        renderAnalyticsCharts();
        return;
    }

    // Calculate overall score
    const avgScore = Math.round(quizResults.reduce((sum, r) => sum + r.score, 0) / quizResults.length);
    document.getElementById('analyticsOverallScore').textContent = `${avgScore}%`;
    document.getElementById('analyticsProgressText').textContent = `${avgScore}%`;

    // Update progress circle
    const progressCircle = document.getElementById('analyticsProgressCircle');
    if (progressCircle) {
        const circumference = 251.2;
        const offset = circumference - (avgScore / 100) * circumference;
        progressCircle.style.strokeDashoffset = offset;
    }

    // Calculate mastered and weak topics
    const topics = Object.entries(topicProgress);
    const masteredCount = topics.filter(([, data]) => {
        const avg = data.attempts > 0 ? data.totalScore / data.attempts : 0;
        return avg >= 80;
    }).length;
    const weakCount = topics.filter(([, data]) => {
        const avg = data.attempts > 0 ? data.totalScore / data.attempts : 0;
        return avg < 60 && data.attempts > 0;
    }).length;

    document.getElementById('analyticsMasteredCount').textContent = `${masteredCount}/${topics.length}`;
    document.getElementById('analyticsWeakCount').textContent = `${weakCount}`;

    // Calculate average time (placeholder)
    const avgTime = analyticsData.timeSpent && Object.keys(analyticsData.timeSpent).length > 0
        ? Math.round(Object.values(analyticsData.timeSpent).reduce((a, b) => a + b, 0) / Object.keys(analyticsData.timeSpent).length)
        : 0;
    document.getElementById('analyticsAvgTime').textContent = avgTime > 0 ? `${avgTime}min` : '--min';

    // Render charts, heatmap, and recommendations
    renderAnalyticsCharts();
    renderAnalyticsHeatmap();
    renderAnalyticsRecommendations();
}

// Render analytics charts
function renderAnalyticsCharts() {
    const trendCtx = document.getElementById('analyticsTrendChart');
    const subjectCtx = document.getElementById('analyticsSubjectChart');

    // Destroy existing charts if they exist
    if (window.trendChart) {
        window.trendChart.destroy();
    }
    if (window.subjectChart) {
        window.subjectChart.destroy();
    }

    const quizResults = analyticsData.quizResults || [];
    const subjectProgress = analyticsData.subjectProgress || {};

    // Trend Chart - Show last 10 quiz scores
    if (trendCtx && window.Chart) {
        const recentQuizzes = quizResults.slice(-10);
        const labels = recentQuizzes.map((_, i) => `Quiz ${i + 1}`);
        const scores = recentQuizzes.map(r => r.score);

        window.trendChart = new Chart(trendCtx.getContext('2d'), {
            type: 'line',
            data: {
                labels: labels.length > 0 ? labels : ['No Data'],
                datasets: [{
                    label: 'Score (%)',
                    data: scores.length > 0 ? scores : [0],
                    borderColor: '#009F9D',
                    backgroundColor: 'rgba(0, 159, 157, 0.1)',
                    tension: 0.4,
                    fill: true
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: true,
                        labels: {
                            color: document.documentElement.classList.contains('dark') ? '#E8EAED' : '#5F6368'
                        }
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        max: 100,
                        ticks: {
                            color: document.documentElement.classList.contains('dark') ? '#9AA0A6' : '#5F6368'
                        },
                        grid: {
                            color: document.documentElement.classList.contains('dark') ? '#374151' : '#E8EAED'
                        }
                    },
                    x: {
                        ticks: {
                            color: document.documentElement.classList.contains('dark') ? '#9AA0A6' : '#5F6368'
                        },
                        grid: {
                            color: document.documentElement.classList.contains('dark') ? '#374151' : '#E8EAED'
                        }
                    }
                }
            }
        });
    }

    // Subject Performance Chart
    if (subjectCtx && window.Chart) {
        const subjects = Object.keys(subjectProgress);

        if (subjects.length > 0) {
            const subjectScores = subjects.map(subject => {
                const data = subjectProgress[subject];
                return data.attempts > 0 ? Math.round((data.totalScore / data.attempts)) : 0;
            });

            const colors = ['#009F9D', '#0F2C59', '#5A7B9E', '#D2C1A7', '#10B981', '#3B82F6', '#F59E0B', '#EF4444'];

            window.subjectChart = new Chart(subjectCtx.getContext('2d'), {
                type: 'doughnut',
                data: {
                    labels: subjects,
                    datasets: [{
                        data: subjectScores,
                        backgroundColor: colors.slice(0, subjects.length)
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                color: document.documentElement.classList.contains('dark') ? '#E8EAED' : '#5F6368',
                                padding: 10
                            }
                        }
                    }
                }
            });
        } else {
            window.subjectChart = new Chart(subjectCtx.getContext('2d'), {
                type: 'doughnut',
                data: {
                    labels: ['No Data'],
                    datasets: [{
                        data: [100],
                        backgroundColor: ['#E8EAED']
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    }
                }
            });
        }
    }
}

// Render Analytics Heatmap
function renderAnalyticsHeatmap() {
    const heatmapContainer = document.getElementById('analyticsHeatmap');
    const topicProgress = analyticsData.topicProgress || {};
    const topics = Object.entries(topicProgress);

    if (topics.length === 0) {
        heatmapContainer.innerHTML = '<p class="text-neutral-600 dark:text-neutral-400 text-center py-8">No topic data available yet. Complete some quizzes to see your performance heatmap!</p>';
        return;
    }

    // Group topics by subject
    const subjectGroups = {};
    topics.forEach(([key, data]) => {
        const [subjectId, ...topicParts] = key.split('_');
        const topicName = topicParts.join('_');

        if (!subjectGroups[subjectId]) {
            subjectGroups[subjectId] = [];
        }

        const avgScore = data.attempts > 0 ? Math.round(data.totalScore / data.attempts) : 0;
        subjectGroups[subjectId].push({
            name: topicName,
            score: avgScore,
            attempts: data.attempts,
            statusClass: getStatusClass(avgScore, data.attempts)
        });
    });

    // Build heatmap HTML
    let heatmapHTML = '';
    Object.entries(subjectGroups).forEach(([subject, topicList]) => {
        heatmapHTML += `
            <div class="mb-6">
                <h4 class="subtitle-1 font-semibold mb-3 text-neutral-800 dark:text-white">${subject}</h4>
                <div class="heatmap-grid">
                    ${topicList.map(topic => `
                        <div class="heatmap-cell ${topic.statusClass} text-white" title="${topic.name}: ${topic.score}% (${topic.attempts} attempts)">
                            <div class="text-xs sm:text-sm font-medium mb-1 truncate w-full px-1">${topic.name}</div>
                            <div class="text-lg sm:text-xl font-bold">${topic.attempts > 0 ? topic.score + '%' : 'New'}</div>
                            <div class="text-xs opacity-90">${topic.attempts} ${topic.attempts === 1 ? 'attempt' : 'attempts'}</div>
                        </div>
                    `).join('')}
                </div>
            </div>
        `;
    });

    heatmapContainer.innerHTML = heatmapHTML;
}

// Render Analytics Recommendations
function renderAnalyticsRecommendations() {
    const recommendationsContainer = document.getElementById('analyticsRecommendations');
    const topicProgress = analyticsData.topicProgress || {};
    const topics = Object.entries(topicProgress);

    if (topics.length === 0) {
        recommendationsContainer.innerHTML = '<p class="text-neutral-600 dark:text-neutral-400 text-center py-4">Recommendations will appear here after completing quizzes.</p>';
        return;
    }

    // Find weak topics (score < 60% with at least 1 attempt)
    const weakTopics = topics
        .map(([key, data]) => {
            const [subjectId, ...topicParts] = key.split('_');
            const topicName = topicParts.join('_');
            const avgScore = data.attempts > 0 ? data.totalScore / data.attempts : 0;
            return {
                subject: subjectId,
                topic: topicName,
                score: avgScore,
                attempts: data.attempts
            };
        })
        .filter(t => t.attempts > 0 && t.score < 60)
        .sort((a, b) => a.score - b.score)
        .slice(0, 5);

    // Find strong topics (score >= 80%)
    const strongTopics = topics
        .map(([key, data]) => {
            const [subjectId, ...topicParts] = key.split('_');
            const topicName = topicParts.join('_');
            const avgScore = data.attempts > 0 ? data.totalScore / data.attempts : 0;
            return {
                subject: subjectId,
                topic: topicName,
                score: avgScore,
                attempts: data.attempts
            };
        })
        .filter(t => t.attempts > 0 && t.score >= 80)
        .sort((a, b) => b.score - a.score)
        .slice(0, 3);

    let recommendationsHTML = '<div class="space-y-4">';

    // Weak areas
    if (weakTopics.length > 0) {
        recommendationsHTML += `
            <div class="p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg">
                <h4 class="subtitle-2 font-semibold mb-2 text-red-800 dark:text-red-300 flex items-center">
                    <span class="material-icons text-sm mr-2">warning</span>
                    Areas Needing Improvement
                </h4>
                <ul class="space-y-2">
                    ${weakTopics.map(t => `
                        <li class="body-2 text-red-700 dark:text-red-400">
                            <strong>${t.subject} - ${t.topic}</strong>: ${Math.round(t.score)}% average (${t.attempts} ${t.attempts === 1 ? 'attempt' : 'attempts'})
                        </li>
                    `).join('')}
                </ul>
                <p class="caption text-red-600 dark:text-red-400 mt-2">💡 Focus on these topics to improve your overall score!</p>
            </div>
        `;
    }

    // Strong areas
    if (strongTopics.length > 0) {
        recommendationsHTML += `
            <div class="p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg">
                <h4 class="subtitle-2 font-semibold mb-2 text-green-800 dark:text-green-300 flex items-center">
                    <span class="material-icons text-sm mr-2">check_circle</span>
                    Your Strengths
                </h4>
                <ul class="space-y-2">
                    ${strongTopics.map(t => `
                        <li class="body-2 text-green-700 dark:text-green-400">
                            <strong>${t.subject} - ${t.topic}</strong>: ${Math.round(t.score)}% average
                        </li>
                    `).join('')}
                </ul>
                <p class="caption text-green-600 dark:text-green-400 mt-2">🎉 Great job! Keep up the excellent work!</p>
            </div>
        `;
    }

    // General tips
    const quizCount = analyticsData.quizResults ? analyticsData.quizResults.length : 0;
    if (quizCount < 10) {
        recommendationsHTML += `
            <div class="p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg">
                <h4 class="subtitle-2 font-semibold mb-2 text-blue-800 dark:text-blue-300 flex items-center">
                    <span class="material-icons text-sm mr-2">info</span>
                    General Tip
                </h4>
                <p class="body-2 text-blue-700 dark:text-blue-400">
                    You've completed ${quizCount} ${quizCount === 1 ? 'quiz' : 'quizzes'} so far. Try to complete at least 10 quizzes for more accurate analytics and insights!
                </p>
            </div>
        `;
    }

    recommendationsHTML += '</div>';
    recommendationsContainer.innerHTML = recommendationsHTML;
}

// Subject Selection Management
function initializeSubjectSelection() {
    const checkboxes = document.querySelectorAll('.subject-checkbox:not(#subject-english)');
    const messageDiv = document.getElementById('subjectSelectionMessage');

    checkboxes.forEach(checkbox => {
        checkbox.addEventListener('change', () => {
            updateSubjectSelection();
        });
    });

    updateSubjectSelection();
}

function updateSubjectSelection() {
    // Select ALL checkboxes except English (not just non-disabled ones)
    const checkboxes = document.querySelectorAll('.subject-checkbox:not(#subject-english)');
    const messageDiv = document.getElementById('subjectSelectionMessage');
    const checkedCount = Array.from(checkboxes).filter(cb => cb.checked).length;
    const remaining = 3 - checkedCount;

    // Update message
    if (remaining > 0) {
        messageDiv.textContent = `Select ${remaining} more subject${remaining !== 1 ? 's' : ''}`;
        messageDiv.className = 'mb-2 text-sm text-warning font-medium';
    } else if (remaining === 0) {
        messageDiv.textContent = '✓ All subjects selected';
        messageDiv.className = 'mb-2 text-sm text-success font-medium';
    } else {
        messageDiv.textContent = `⚠ Too many subjects! Remove ${Math.abs(remaining)}`;
        messageDiv.className = 'mb-2 text-sm text-error font-medium';
    }

    // Disable/enable checkboxes based on selection count
    if (checkedCount >= 3) {
        checkboxes.forEach(cb => {
            if (!cb.checked) {
                cb.disabled = true;
            }
        });
    } else {
        // Re-enable ALL checkboxes when under the limit
        checkboxes.forEach(cb => {
            cb.disabled = false;
        });
    }
}


function getSelectedSubjects() {
    const subjects = ['Use of English']; // Pre-selected
    const checkboxes = document.querySelectorAll('.subject-checkbox:not(#subject-english)');

    checkboxes.forEach(checkbox => {
        if (checkbox.checked) {
            subjects.push(checkbox.value);
        }
    });

    return subjects;
}


// Check if user is already logged in
function checkExistingSession() {
const userEmail = localStorage.getItem('currentUserEmail');
if (userEmail) {
const user = allUsers.find(u => u.email === userEmail);
if (user) {
currentUser = user;

// Update study streak
updateStudyStreak(user);

if (user.hasPaid) {
updateUserDisplay(user);
renderDashboard();
showSection(dashboardSection);
} else {
showSection(paymentSection);
}
} else {
showSection(landingSection);
}
} else {
showSection(landingSection);
}
}

// Show/Hide Sections
function showSection(section) {
// Hide all sections
landingSection.classList.add('hidden-content');
loginSection.classList.add('hidden-content');
registerSection.classList.add('hidden-content');
paymentSection.classList.add('hidden-content');
dashboardSection.classList.add('hidden-content');
analyticsSection.classList.add('hidden-content');

// Show the selected section
section.classList.remove('hidden-content');

// Show/hide header and FAB based on section
if (section === landingSection || section === loginSection || section === registerSection || section === paymentSection) {
mainHeader.style.display = 'none';
fabButton.classList.add('hidden');
} else {
mainHeader.style.display = 'block';
if (section === dashboardSection) {
fabButton.classList.remove('hidden');
} else {
fabButton.classList.add('hidden');
}
}

// Scroll to top
window.scrollTo(0, 0);
}

// Login Form Handler
document.getElementById('loginForm').addEventListener('submit', (e) => {
e.preventDefault();
const email = document.getElementById('loginEmail').value;
const password = document.getElementById('loginPassword').value;

const user = allUsers.find(u => u.email === email && u.password === password);

if (user) {
// Update study streak
updateStudyStreak(user);

// Update last login
user.lastLogin = new Date().toISOString();
localStorage.setItem('raven_users', JSON.stringify(allUsers));

// Set current user
localStorage.setItem('currentUserEmail', email);
currentUser = user;

if (user.hasPaid) {
updateUserDisplay(user);
renderDashboard();
showSection(dashboardSection);
showMaterialToast('Welcome back! 🎓', 'success');
} else {
showSection(paymentSection);
}
} else {
showMaterialToast('Invalid email or password!', 'error');
}
});

// Register Form Handler
document.getElementById('registerForm').addEventListener('submit', (e) => {
e.preventDefault();
const name = document.getElementById('registerName').value;
const email = document.getElementById('registerEmail').value;
const institute = document.getElementById('registerInstitute').value;
const course = document.getElementById('registerCourse').value;
const targetScore = document.getElementById('registerTargetScore').value;
const password = document.getElementById('registerPassword').value;
const confirmPassword = document.getElementById('registerConfirmPassword').value;

if (password !== confirmPassword) {
showMaterialToast('Passwords do not match!', 'error');
return;
}

// Get selected subjects
const selectedSubjects = getSelectedSubjects();
if (selectedSubjects.length !== 4) {
showMaterialToast('Please select exactly 3 additional subjects (4 total including Use of English)', 'error');
return;
}

// Check if user already exists
if (allUsers.find(user => user.email === email)) {
showMaterialToast('User with this email already exists!', 'error');
return;
}

// Create subject progress object
const subjectsProgress = {};
selectedSubjects.forEach(subject => {
    subjectsProgress[subject] = {
        progress: 0,
        questionsAnswered: 0,
        correctAnswers: 0
    };
});

// Create user object
const newUser = {
id: allUsers.length > 0 ? Math.max(...allUsers.map(u => u.id || 0)) + 1 : 1,
name: name,
email: email,
password: password,
institute: institute,
course: course,
targetScore: parseInt(targetScore),
jambSubjects: selectedSubjects,
registrationDate: new Date().toISOString(),
hasPaid: false,
lastLogin: null,
studyStreak: 0,
lastStudyDate: null,
totalCorrectAnswers: 0,
totalQuestions: 0,
sessions: [],
subjects: subjectsProgress
};


// Add to users array
allUsers.push(newUser);
localStorage.setItem('raven_users', JSON.stringify(allUsers));


// Set as current user
localStorage.setItem('currentUserEmail', email);
currentUser = newUser;

// Show payment section after registration
showSection(paymentSection);
showMaterialToast('Account created successfully! 🎉', 'success');
});

// Handle Payment (simulated)
function handlePayment(plan) {
showMaterialToast('Opening payment gateway...', 'info');

// Simulate payment processing
setTimeout(() => {
const userEmail = localStorage.getItem('currentUserEmail');
const user = allUsers.find(u => u.email === userEmail);

if (user) {
user.hasPaid = true;
user.subscriptionPlan = plan;
user.subscriptionDate = new Date().toISOString();
localStorage.setItem('raven_users', JSON.stringify(allUsers));
currentUser = user;
}

updateUserDisplay(user);
renderDashboard();
showSection(dashboardSection);
showMaterialToast('Payment successful! Welcome to Raven Premium 🎓', 'success');
}, 1500);
}

// Update study streak
function updateStudyStreak(user) {
const today = new Date().toDateString();
const lastStudy = user.lastStudyDate ? new Date(user.lastStudyDate).toDateString() : null;

if (lastStudy !== today) {
if (lastStudy) {
const yesterday = new Date();
yesterday.setDate(yesterday.getDate() - 1);
const yesterdayStr = yesterday.toDateString();

if (lastStudy === yesterdayStr) {
// Consecutive day
user.studyStreak = (user.studyStreak || 0) + 1;
} else {
// Streak broken
user.studyStreak = 1;
}
} else {
// First study day
user.studyStreak = 1;
}

user.lastStudyDate = new Date().toISOString();


// Update in storage
const userIndex = allUsers.findIndex(u => u.email === user.email);
if (userIndex !== -1) {
allUsers[userIndex] = user;
localStorage.setItem('raven_users', JSON.stringify(allUsers));
}
}
}

// Render Dashboard
function renderDashboard() {
if (!currentUser) return;

// Update stats
document.getElementById('instituteDisplay').textContent = currentUser.institute || '-';
document.getElementById('courseDisplay').textContent = currentUser.course || '-';
document.getElementById('targetScoreDisplay').textContent = currentUser.targetScore || '-';

document.getElementById('studyStreakCount').textContent = `${currentUser.studyStreak || 0} days`;
document.getElementById('correctAnswersCount').textContent = currentUser.totalCorrectAnswers || 0;

const accuracy = currentUser.totalQuestions > 0
? Math.round((currentUser.totalCorrectAnswers / currentUser.totalQuestions) * 100)
: 0;
document.getElementById('accuracyPercentage').textContent = `${accuracy}% accuracy`;

// Render progress
renderProgress();
}

// Render progress
function renderProgress() {
    const overallStats = document.getElementById('overallStats');
    const subjectStats = document.getElementById('subjectStats');

    if (!currentUser || currentUser.totalQuestions === 0) {
        overallStats.innerHTML = '<p class="text-gray-600 dark:text-gray-400">No quiz data available yet. Complete some quizzes to see your progress!</p>';
        subjectStats.innerHTML = '<p class="text-gray-600 dark:text-gray-400">Subject breakdown will appear here after completing quizzes.</p>';
        return;
    }

    // Basic progress stats
    const totalQuizzes = currentUser.sessions ? currentUser.sessions.length : 0;
    const averageScore = currentUser.totalQuestions > 0
        ? Math.round((currentUser.totalCorrectAnswers / currentUser.totalQuestions) * 100)
        : 0;

    overallStats.innerHTML = `
        <div class="space-y-2">
            <div class="flex justify-between dark:text-white">
                <span>Total Questions:</span>
                <span class="font-medium">${currentUser.totalQuestions}</span>
            </div>
            <div class="flex justify-between dark:text-white">
                <span>Average Score:</span>
                <span class="font-medium">${averageScore}%</span>
            </div>
        </div>
    `;

    // Subject breakdown
    if (currentUser.subjects && Object.keys(currentUser.subjects).length > 0) {
        const subjectStatsHTML = Object.entries(currentUser.subjects).map(([subject, data]) => {
            const avg = data.questionsAnswered > 0
                ? Math.round((data.correctAnswers / data.questionsAnswered) * 100)
                : 0;
            return `
                <div class="flex justify-between py-1 dark:text-white">
                    <span>${subject}:</span>
                    <span class="font-medium">${avg}%</span>
                </div>
            `;
        }).join('');

        subjectStats.innerHTML = `<div class="space-y-2">${subjectStatsHTML}</div>`;
    } else {
        subjectStats.innerHTML = '<p class="text-gray-600 dark:text-gray-400">Subject data not available</p>';
    }
}

// Update user display
function updateUserDisplay(user) {
const initials = user.name.split(' ').map(n => n[0]).join('').substring(0, 2).toUpperCase();
document.getElementById('userInitials').textContent = initials;
document.getElementById('mobileUserInitials').textContent = initials;
document.getElementById('mobileUserName').textContent = user.name;
document.getElementById('dashboardUserName').textContent = user.name.split(' ')[0];

// Show logout button
logoutBtn.classList.remove('hidden');
}

// Settings Modal Functions
function openSettingsModal() {
if (!currentUser) return;

document.getElementById('settingsName').value = currentUser.name;
document.getElementById('settingsEmail').value = currentUser.email;
document.getElementById('settingsInstitute').value = currentUser.institute || '';
document.getElementById('settingsCourse').value = currentUser.course || '';
document.getElementById('settingsTargetScore').value = currentUser.targetScore || '';

document.getElementById('settingsModal').classList.remove('hidden');
document.body.classList.add('overflow-hidden');
}

function closeSettingsModal() {
document.getElementById('settingsModal').classList.add('hidden');
document.body.classList.remove('overflow-hidden');
}



// Settings Form Handler
document.getElementById('settingsForm').addEventListener('submit', (e) => {
e.preventDefault();

const name = document.getElementById('settingsName').value;
const institute = document.getElementById('settingsInstitute').value;
const course = document.getElementById('settingsCourse').value;
const targetScore = document.getElementById('settingsTargetScore').value;



// Update current user
currentUser.name = name;
currentUser.institute = institute;
currentUser.course = course;
currentUser.targetScore = parseInt(targetScore);



// Update in storage
const userIndex = allUsers.findIndex(u => u.email === currentUser.email);
if (userIndex !== -1) {
allUsers[userIndex] = currentUser;
localStorage.setItem('raven_users', JSON.stringify(allUsers));
}

// Update display
updateUserDisplay(currentUser);
renderDashboard();

closeSettingsModal();
showMaterialToast('Settings updated successfully!', 'success');
});

// Logout functionality
        function logout() {
        localStorage.removeItem('currentUserEmail');
        currentUser = null;
        logoutBtn.classList.add('hidden');
        showSection(landingSection);
        showMaterialToast('Logged out successfully', 'info');
        }

// Dark mode detection with Material Design transitions
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.documentElement.classList.add('dark');
        }
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
        if (event.matches) {
        document.documentElement.classList.add('dark');
        } else {
        document.documentElement.classList.remove('dark');
        }
        });

// Mobile menu functionality
function toggleMobileMenu() {
        const mobileMenu = document.getElementById('mobileMenu');
        const overlay = document.getElementById('mobileMenuOverlay');
        const isOpen = !mobileMenu.classList.contains('-translate-x-full');

        if (isOpen) {
        // Close menu
        mobileMenu.classList.add('-translate-x-full');
        overlay.classList.add('hidden');
        document.body.classList.remove('overflow-hidden');
        } else {
        // Open menu
        mobileMenu.classList.remove('-translate-x-full');
        overlay.classList.remove('hidden');
        document.body.classList.add('overflow-hidden');
        }
        }

// Close mobile menu when clicking outside
document.addEventListener('click', function(event) {
const mobileMenu = document.getElementById('mobileMenu');
const menuButton = event.target.closest('[onclick="toggleMobileMenu()"]');

if (!mobileMenu.contains(event.target) && !menuButton && !mobileMenu.classList.contains('-translate-x-full')) {
toggleMobileMenu();
}
});

// Handle window resize
window.addEventListener('resize', function() {
if (window.innerWidth >= 768) {
const mobileMenu = document.getElementById('mobileMenu');
const overlay = document.getElementById('mobileMenuOverlay');
mobileMenu.classList.add('-translate-x-full');
overlay.classList.add('hidden');
document.body.classList.remove('overflow-hidden');
}
});

// Enhanced quick practice function
function startQuickPractice() {
window.location.href = 'practice/index.html';
}

// Material Design Toast System
function showMaterialToast(message, type = 'info') {
const toastContainer = document.getElementById('toast-container') || createToastContainer();

const toast = document.createElement('div');
const iconMap = {
success: 'check_circle',
error: 'error',
warning: 'warning',
info: 'info'
};

const colorMap = {
success: 'bg-success text-white',
error: 'bg-error text-white',
warning: 'bg-warning text-white',
info: 'bg-accent text-white'
};

toast.className = `material-card flex items-center space-x-3 px-4 sm:px-6 py-3 sm:py-4 rounded-xl sm:rounded-2xl shadow-material-3 ${colorMap[type]} transform translate-y-2 opacity-0 transition-all duration-300 mb-4`;

toast.innerHTML = `
<span class="material-icons">${iconMap[type]}</span>
<span class="subtitle-2 flex-1">${message}</span>
<button onclick="this.parentElement.remove()" class="material-icons hover:bg-white/10 rounded-full p-1 touch-target">close</button>
`;

toastContainer.appendChild(toast);

// Animate in
setTimeout(() => {
toast.classList.remove('translate-y-2', 'opacity-0');
}, 100);

// Auto remove after 3 seconds
setTimeout(() => {
if (toast.parentElement) {
toast.classList.add('translate-y-2', 'opacity-0');
setTimeout(() => toast.remove(), 300);
}
}, 3000);
}

function createToastContainer() {
const container = document.createElement('div');
container.id = 'toast-container';
container.className = 'fixed bottom-4 left-4 sm:bottom-6 sm:left-6 z-50 max-w-xs sm:max-w-sm';
document.body.appendChild(container);
return container;
}
/* eslint-enable no-restricted-globals */
</script>
</body>
</html>

