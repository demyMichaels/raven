<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sales Coach Simulator</title>
    <link rel="stylesheet" href="style.css">
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
</head>
<body>
    <!-- Loading Screen -->
    <div id="loadingScreen" class="loading-screen">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <h2>Initializing Sales Coach</h2>
            <p>Loading AI models and scenarios...</p>
        </div>
    </div>

    <!-- App Container -->
    <div class="app-container" style="display: none;">
        <!-- Navigation -->
        <nav class="navbar">
            <div class="nav-brand">
                <div class="logo">
                    <i data-lucide="message-square"></i>
                </div>
                <h1>Sales Coach Pro</h1>
            </div>
            <div class="nav-controls">
                <button class="nav-btn" onclick="toggleCoachPanel()">
                    <i data-lucide="graduation-cap"></i>
                    <span>AI Coach</span>
                </button>
                <button class="nav-btn" onclick="showAnalytics()">
                    <i data-lucide="bar-chart"></i>
                    <span>Analytics</span>
                </button>
                <button class="nav-btn" onclick="showSettings()">
                    <i data-lucide="settings"></i>
                    <span>Settings</span>
                </button>
            </div>
        </nav>

        <!-- Main Content -->
        <div class="main-layout">
            <!-- Scenario Selector -->
            <div class="scenario-section" id="scenarioSection">
                <div class="section-header">
                    <h2>Practice Scenarios</h2>
                    <p class="subtitle">Select a customer persona to practice with</p>
                </div>
                
                <div class="scenarios-container" id="scenariosContainer">
                    <!-- Scenarios loaded dynamically -->
                </div>

                <div class="stats-section">
                    <div class="stat-card">
                        <i data-lucide="target"></i>
                        <div>
                            <h3>12</h3>
                            <p>Completed Scenarios</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <i data-lucide="trending-up"></i>
                        <div>
                            <h3>78%</h3>
                            <p>Average Score</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <i data-lucide="clock"></i>
                        <div>
                            <h3>2h 45m</h3>
                            <p>Total Practice</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Chat Interface (Hidden by default) -->
            <div class="chat-section" id="chatSection" style="display: none;">
                <div class="chat-header">
                    <button class="back-btn" onclick="goBackToScenarios()">
                        <i data-lucide="arrow-left"></i>
                        Back
                    </button>
                    <div class="persona-header">
                        <div class="persona-avatar-large" id="personaAvatarLarge"></div>
                        <div class="persona-details">
                            <h2 id="personaName">Emma Richardson</h2>
                            <div class="persona-tags">
                                <span class="tag" id="personaRole">CFO</span>
                                <span class="tag difficulty-medium" id="personaDifficulty">Medium</span>
                            </div>
                        </div>
                    </div>
                    <button class="coach-help" onclick="toggleCoachPanel()">
                        <i data-lucide="help-circle"></i>
                        Get Coach Help
                    </button>
                </div>

                <!-- Chat Messages -->
                <div class="chat-messages" id="chatMessages">
                    <!-- Messages appear here -->
                </div>

                <!-- Analysis Panel -->
                <div class="analysis-container" id="analysisContainer" style="display: none;">
                    <div class="analysis-header">
                        <i data-lucide="sparkles"></i>
                        <h3>Coach Analysis</h3>
                        <div class="score-display" id="scoreDisplay">
                            Score: <span id="scoreValue">0</span>/100
                        </div>
                    </div>
                    <div class="analysis-content">
                        <div class="analysis-item">
                            <label>Detected Emotion:</label>
                            <span class="emotion-badge" id="detectedEmotion">Neutral</span>
                        </div>
                        <div class="analysis-item">
                            <label>Feedback:</label>
                            <p id="feedbackText">Waiting for analysis...</p>
                        </div>
                        <div class="analysis-item">
                            <label>Improvement Tip:</label>
                            <p class="tip" id="suggestionText">Try to address their main concern directly.</p>
                        </div>
                    </div>
                </div>

                <!-- Input Area -->
                <div class="input-container">
                    <div class="input-wrapper">
                        <textarea 
                            id="messageInput" 
                            placeholder="Type your sales pitch here..."
                            rows="1"
                            oninput="autoResize(this)"
                            onkeydown="handleKeyPress(event)"
                        ></textarea>
                        <div class="input-actions">
                            <button class="action-btn" title="Add attachment">
                                <i data-lucide="paperclip"></i>
                            </button>
                            <button class="action-btn" title="Insert template">
                                <i data-lucide="file-text"></i>
                            </button>
                            <button 
                                id="sendButton" 
                                class="send-btn" 
                                onclick="sendMessage()"
                                disabled
                            >
                                <i data-lucide="send"></i>
                            </button>
                        </div>
                    </div>
                    <div class="quick-tips">
                        <span>Quick tips:</span>
                        <button class="tip-btn" onclick="insertTemplate('question')">Ask questions</button>
                        <button class="tip-btn" onclick="insertTemplate('value')">Show value</button>
                        <button class="tip-btn" onclick="insertTemplate('objection')">Handle objection</button>
                    </div>
                </div>
            </div>

            <!-- AI Coach Panel -->
            <div class="coach-panel" id="coachPanel" style="display: none;">
                <div class="coach-header">
                    <h2><i data-lucide="graduation-cap"></i> AI Sales Coach</h2>
                    <button class="close-btn" onclick="toggleCoachPanel()">
                        <i data-lucide="x"></i>
                    </button>
                </div>
                
                <div class="coach-status">
                    <div class="status-indicator active"></div>
                    <span>Connected to Gemini 2.0 Flash</span>
                </div>

                <div class="coach-chat" id="coachChat">
                    <div class="coach-message received">
                        <div class="coach-avatar">
                            <i data-lucide="brain"></i>
                        </div>
                        <div class="message-bubble">
                            <p>Hello! I'm your AI Sales Coach. I'll help you navigate this sales conversation. What would you like help with?</p>
                            <span class="timestamp">Just now</span>
                        </div>
                    </div>
                </div>

                <div class="coach-quick-actions">
                    <button class="quick-action" onclick="askCoach('strategy')">
                        <i data-lucide="target"></i>
                        <span>Best strategy</span>
                    </button>
                    <button class="quick-action" onclick="askCoach('objection')">
                        <i data-lucide="shield"></i>
                        <span>Handle objection</span>
                    </button>
                    <button class="quick-action" onclick="askCoach('question')">
                        <i data-lucide="help-circle"></i>
                        <span>Ask a question</span>
                    </button>
                    <button class="quick-action" onclick="askCoach('close')">
                        <i data-lucide="handshake"></i>
                        <span>Close the deal</span>
                    </button>
                </div>

                <div class="coach-input">
                    <input 
                        type="text" 
                        id="coachQuery" 
                        placeholder="Ask your coach anything..."
                        onkeypress="if(event.key === 'Enter') askCoach('custom')"
                    >
                    <button onclick="askCoach('custom')">
                        <i data-lucide="send"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer class="app-footer">
            <p>Sales Coach Pro • Powered by Google Gemini AI • For educational purposes only</p>
            <div class="footer-links">
                <a href="#" onclick="showPrivacy()">Privacy</a>
                <a href="#" onclick="showTerms()">Terms</a>
                <a href="#" onclick="showHelp()">Help</a>
            </div>
        </footer>
    </div>

    <!-- Scripts -->
    <script src="https://unpkg.com/@google/generative-ai"></script>
    <script src="config.js"></script>
    <script src="script.js"></script>
</body>
</html>