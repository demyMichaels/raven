<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Physics Learning - Measurement and Units</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <style>
        /* Material Design Color Variables */
        :root {
            --primary: #0F2C59;
            --primary-50: #f0f3f8;
            --primary-100: #d6e1ee;
            --primary-500: #0F2C59;
            --primary-600: #0a2549;
            --primary-700: #081e39;
            
            --accent: #009F9D;
            --accent-50: #e6f7f7;
            --accent-100: #b3ebea;
            --accent-500: #009F9D;
            --accent-600: #008280;
            --accent-700: #006663;
            
            --neutral-25: #FEFEFE;
            --neutral-50: #F8F9FA;
            --neutral-100: #F1F3F4;
            --neutral-200: #E8EAED;
            --neutral-300: #DADCE0;
            --neutral-400: #BDC1C6;
            --neutral-500: #9AA0A6;
            --neutral-600: #80868B;
            --neutral-700: #5F6368;
            --neutral-800: #2D3748;
            --neutral-900: #1F2937;
            
            --success: #22c55e;
            --warning: #f59e0b;
            --error: #ef4444;
        }

        /* Material Design Shadows */
        .shadow-material-1 { box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24); }
        .shadow-material-2 { box-shadow: 0 3px 6px rgba(0,0,0,0.16), 0 3px 6px rgba(0,0,0,0.23); }
        .shadow-material-3 { box-shadow: 0 10px 20px rgba(0,0,0,0.19), 0 6px 6px rgba(0,0,0,0.23); }

        /* Typography */
        .headline-4 { font-size: 1.75rem; font-weight: 400; line-height: 1.235; letter-spacing: 0.25px; }
        .headline-6 { font-size: 1.125rem; font-weight: 500; line-height: 1.6; letter-spacing: 0.15px; }
        .subtitle-1 { font-size: 1rem; font-weight: 400; line-height: 1.75; letter-spacing: 0.15px; }
        .body-1 { font-size: 1rem; font-weight: 400; line-height: 1.5; letter-spacing: 0.5px; }
        .caption { font-size: 0.75rem; font-weight: 400; line-height: 1.66; letter-spacing: 0.4px; }

        @media (min-width: 768px) {
            .headline-4 { font-size: 2.125rem; }
            .headline-6 { font-size: 1.25rem; }
        }

        /* Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Roboto', sans-serif;
            background-color: var(--neutral-50);
            color: var(--neutral-800);
            line-height: 1.6;
        }

        .dark {
            background-color: var(--neutral-900);
            color: var(--neutral-100);
        }

        .dark .bg-neutral-50 { background-color: var(--neutral-900); }
        .dark .text-neutral-800 { color: var(--neutral-100); }
        .dark .text-neutral-600 { color: var(--neutral-400); }

        /* Layout */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 16px;
        }

        .header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-700) 100%);
            color: white;
            padding: 32px 0;
            text-align: center;
        }

        .main-content {
            padding: 32px 0;
            margin-right: 0;
        }

        /* Table of Contents */
        .toc-container {
            position: fixed;
            top: 20px;
            right: 20px;
            width: 280px;
            background: white;
            border: 1px solid var(--neutral-300);
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            z-index: 1000;
            max-height: calc(100vh - 40px);
            overflow-y: auto;
        }

        .dark .toc-container {
            background: var(--neutral-800);
            border-color: var(--neutral-600);
        }

        .toc-header {
            padding: 16px;
            border-bottom: 1px solid var(--neutral-200);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .dark .toc-header {
            border-bottom-color: var(--neutral-600);
        }

        .toc-title {
            font-weight: 500;
            color: var(--primary);
            font-size: 1rem;
            margin: 0;
        }

        .dark .toc-title {
            color: var(--accent);
        }

        .toc-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .toc-item {
            border-bottom: 1px solid var(--neutral-100);
        }

        .dark .toc-item {
            border-bottom-color: var(--neutral-700);
        }

        .toc-item:last-child {
            border-bottom: none;
        }

        .toc-link {
            display: flex;
            align-items: center;
            padding: 12px 16px;
            text-decoration: none;
            color: var(--neutral-700);
            transition: all 0.2s ease;
            border-left: 3px solid transparent;
            min-height: 48px;
            cursor: pointer;
        }

        .toc-link:hover {
            background-color: var(--neutral-50);
            color: var(--primary);
        }

        .toc-link.active {
            background-color: var(--primary-50);
            color: var(--primary);
            border-left-color: var(--primary);
        }

        .dark .toc-link {
            color: var(--neutral-300);
        }

        .dark .toc-link:hover {
            background-color: var(--neutral-700);
            color: var(--accent);
        }

        .dark .toc-link.active {
            background-color: var(--neutral-700);
            color: var(--accent);
            border-left-color: var(--accent);
        }

        .toc-icon {
            margin-right: 12px;
            font-size: 20px;
        }

        .toc-text {
            font-size: 0.875rem;
            line-height: 1.4;
        }

        /* Mobile TOC */
        .mobile-toc-trigger {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 56px;
            height: 56px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 50%;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            cursor: pointer;
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1001;
            transition: all 0.3s ease;
        }

        .mobile-toc-trigger:hover {
            background: var(--primary-600);
            transform: scale(1.05);
        }

        .mobile-toc-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            z-index: 999;
            display: none;
        }

        .mobile-toc-content {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            border-radius: 16px 16px 0 0;
            padding: 20px;
            z-index: 1000;
            transform: translateY(100%);
            transition: transform 0.3s ease;
            max-height: 70vh;
            overflow-y: auto;
        }

        .dark .mobile-toc-content {
            background: var(--neutral-800);
        }

        .mobile-toc-content.show {
            transform: translateY(0);
        }

        /* Module Cards */
        .module-card {
            background-color: white;
            border: 1px solid var(--neutral-300);
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 24px;
            transition: all 0.28s cubic-bezier(0.4, 0.0, 0.2, 1);
            box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);
            scroll-margin-top: 20px;
        }

        .module-card:hover {
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
            transform: translateY(-2px);
        }

        .dark .module-card {
            background-color: var(--neutral-800);
            border-color: var(--neutral-600);
        }

        .dark .module-card:hover {
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
        }

        /* Video Container */
        .video-container {
            position: relative;
            width: 100%;
            height: 0;
            padding-bottom: 56.25%; /* 16:9 aspect ratio */
            margin: 16px 0;
            border-radius: 8px;
            overflow: hidden;
        }

        .video-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
        }

        /* Module Header */
        .module-header {
            display: flex;
            align-items: center;
            margin-bottom: 16px;
        }

        .module-icon {
            background-color: var(--accent);
            color: white;
            width: 48px;
            height: 48px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 16px;
            font-size: 24px;
        }

        .module-title {
            color: var(--primary);
            margin: 0;
        }

        .dark .module-title {
            color: var(--accent);
        }

        /* Navigation */
        .nav-tabs {
            display: flex;
            gap: 16px;
            margin-bottom: 32px;
            border-bottom: 1px solid var(--neutral-300);
            overflow-x: auto;
            padding-bottom: 16px;
        }

        .dark .nav-tabs {
            border-bottom-color: var(--neutral-600);
        }

        .nav-tab {
            padding: 8px 16px;
            color: var(--neutral-600);
            text-decoration: none;
            border-radius: 8px 8px 0 0;
            transition: all 0.15s cubic-bezier(0.4, 0.0, 0.2, 1);
            white-space: nowrap;
            min-height: 44px;
            display: flex;
            align-items: center;
        }

        .nav-tab:hover {
            color: var(--primary);
            background-color: var(--neutral-100);
        }

        .nav-tab.active {
            color: var(--primary);
            background-color: rgba(15, 44, 89, 0.1);
            border-bottom: 2px solid var(--primary);
        }

        .dark .nav-tab {
            color: var(--neutral-400);
        }

        .dark .nav-tab:hover {
            background-color: var(--neutral-700);
            color: var(--accent);
        }

        .dark .nav-tab.active {
            color: var(--accent);
            background-color: rgba(0, 159, 157, 0.1);
            border-bottom-color: var(--accent);
        }

        /* Intro Section */
        .intro-section {
            background-color: white;
            border: 1px solid var(--neutral-300);
            border-radius: 12px;
            padding: 32px;
            margin-bottom: 32px;
            text-align: center;
            box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);
        }

        .dark .intro-section {
            background-color: var(--neutral-800);
            border-color: var(--neutral-600);
        }

        .intro-icon {
            font-size: 48px;
            color: var(--accent);
            margin-bottom: 16px;
        }

        /* Animations */
        .fade-in {
            animation: fadeIn 0.6s cubic-bezier(0.4, 0.0, 0.2, 1);
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(16px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .stagger-animation {
            animation: fadeInStagger 0.6s cubic-bezier(0.4, 0.0, 0.2, 1) forwards;
            opacity: 0;
        }

        .stagger-animation:nth-child(1) { animation-delay: 0.1s; }
        .stagger-animation:nth-child(2) { animation-delay: 0.2s; }
        .stagger-animation:nth-child(3) { animation-delay: 0.3s; }
        .stagger-animation:nth-child(4) { animation-delay: 0.4s; }

        @keyframes fadeInStagger {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Layout adjustments for TOC */
        @media (min-width: 1024px) {
            .main-content {
                margin-right: 300px;
            }
        }

        /* Responsive Design */
        @media (max-width: 1023px) {
            .toc-container {
                display: none;
            }
            
            .mobile-toc-trigger {
                display: flex;
            }
        }

        @media (max-width: 768px) {
            .container {
                padding: 0 12px;
            }
            
            .module-card {
                padding: 16px;
                margin-bottom: 16px;
            }
            
            .headline-4 {
                font-size: 1.5rem;
            }
            
            .nav-tabs {
                gap: 4px;
                flex-wrap: wrap;
            }
            
            .nav-tab {
                padding: 8px 12px;
                font-size: 0.875rem;
                flex: 1;
                min-width: calc(50% - 2px);
                justify-content: center;
                text-align: center;
            }
            
            .nav-tab .material-icons {
                display: none;
            }
            
            .intro-section {
                padding: 20px 16px;
            }
            
            .module-header {
                flex-direction: column;
                text-align: center;
                gap: 8px;
            }
            
            .module-icon {
                margin-right: 0;
                margin-bottom: 8px;
            }
        }

        @media (max-width: 480px) {
            .header {
                padding: 20px 0;
            }
            
            .headline-4 {
                font-size: 1.375rem;
            }
            
            .subtitle-1 {
                font-size: 0.875rem;
            }
            
            .nav-tab {
                font-size: 0.75rem;
                padding: 6px 8px;
            }
            
            .mobile-toc-trigger {
                width: 48px;
                height: 48px;
                bottom: 16px;
                right: 16px;
            }
        }

        /* Dark mode support */
        @media (prefers-color-scheme: dark) {
            .dark-auto {
                background-color: var(--neutral-900);
                color: var(--neutral-100);
            }
        }
    </style>
</head>
<body>
    <!-- Table of Contents - Desktop -->
    <div class="toc-container" id="tocContainer">
        <div class="toc-header">
            <h3 class="toc-title">📚 Table of Contents</h3>
        </div>
        <ul class="toc-list">
            <li class="toc-item">
                <a href="#overview" class="toc-link" onclick="scrollToSection('overview', this)">
                    <span class="toc-icon material-icons">home</span>
                    <span class="toc-text">Course Overview</span>
                </a>
            </li>
            <li class="toc-item">
                <a href="#length" class="toc-link" onclick="scrollToSection('length', this)">
                    <span class="toc-icon material-icons">straighten</span>
                    <span class="toc-text">Length Measurement</span>
                </a>
            </li>
            <li class="toc-item">
                <a href="#precision" class="toc-link" onclick="scrollToSection('precision', this)">
                    <span class="toc-icon material-icons">precision_manufacturing</span>
                    <span class="toc-text">Precision Tools</span>
                </a>
            </li>
            <li class="toc-item">
                <a href="#fine" class="toc-link" onclick="scrollToSection('fine', this)">
                    <span class="toc-icon material-icons">tune</span>
                    <span class="toc-text">Fine Measurement</span>
                </a>
            </li>
            <li class="toc-item">
                <a href="#volume" class="toc-link" onclick="scrollToSection('volume', this)">
                    <span class="toc-icon material-icons">science</span>
                    <span class="toc-text">Volume Measurement</span>
                </a>
            </li>
        </ul>
    </div>

    <!-- Mobile TOC Trigger -->
    <button class="mobile-toc-trigger" onclick="toggleMobileTOC()">
        <span class="material-icons">menu_book</span>
    </button>

    <!-- Mobile TOC Overlay -->
    <div class="mobile-toc-overlay" id="mobileTocOverlay" onclick="closeMobileTOC()"></div>
    <div class="mobile-toc-content" id="mobileTocContent">
        <h3 class="toc-title" style="margin-bottom: 16px;">📚 Table of Contents</h3>
        <ul class="toc-list">
            <li class="toc-item">
                <a href="#overview" class="toc-link" onclick="scrollToSectionMobile('overview', this)">
                    <span class="toc-icon material-icons">home</span>
                    <span class="toc-text">Course Overview</span>
                </a>
            </li>
            <li class="toc-item">
                <a href="#length" class="toc-link" onclick="scrollToSectionMobile('length', this)">
                    <span class="toc-icon material-icons">straighten</span>
                    <span class="toc-text">Length Measurement</span>
                </a>
            </li>
            <li class="toc-item">
                <a href="#precision" class="toc-link" onclick="scrollToSectionMobile('precision', this)">
                    <span class="toc-icon material-icons">precision_manufacturing</span>
                    <span class="toc-text">Precision Tools</span>
                </a>
            </li>
            <li class="toc-item">
                <a href="#fine" class="toc-link" onclick="scrollToSectionMobile('fine', this)">
                    <span class="toc-icon material-icons">tune</span>
                    <span class="toc-text">Fine Measurement</span>
                </a>
            </li>
            <li class="toc-item">
                <a href="#volume" class="toc-link" onclick="scrollToSectionMobile('volume', this)">
                    <span class="toc-icon material-icons">science</span>
                    <span class="toc-text">Volume Measurement</span>
                </a>
            </li>
        </ul>
    </div>

    <div class="header">
        <div class="container">
            <h1 class="headline-4 fade-in">⚛️ Measurement and Units</h1>
            <p class="subtitle-1 fade-in" style="margin-top: 8px; opacity: 0.9;">
                Length, Area and Volume - Master the fundamentals of scientific measurement
            </p>
        </div>
    </div>

    <div class="main-content">
        <div class="container">
            <div id="overview" class="intro-section fade-in">
                <div class="intro-icon material-icons">straighten</div>
                <h2 class="headline-6" style="margin-bottom: 16px;">Foundation Skills in Physics Measurement</h2>
                <p class="body-1" style="color: var(--neutral-600); max-width: 600px; margin: 0 auto;">
                    Learn essential measurement techniques using precision instruments. Master proper procedures, 
                    avoid common errors, and build confidence in scientific measurement practices.
                </p>
            </div>

            <div class="nav-tabs">
                <a href="#length" class="nav-tab active" onclick="showModule('length', this)">
                    <span class="material-icons" style="margin-right: 8px;">straighten</span>
                    Length Measurement
                </a>
                <a href="#precision" class="nav-tab" onclick="showModule('precision', this)">
                    <span class="material-icons" style="margin-right: 8px;">precision_manufacturing</span>
                    Precision Tools
                </a>
                <a href="#fine" class="nav-tab" onclick="showModule('fine', this)">
                    <span class="material-icons" style="margin-right: 8px;">tune</span>
                    Fine Measurement
                </a>
                <a href="#volume" class="nav-tab" onclick="showModule('volume', this)">
                    <span class="material-icons" style="margin-right: 8px;">science</span>
                    Volume Measurement
                </a>
            </div>

            <div id="modules-content">
                <!-- Length Measurement Module -->
                <div id="length" class="module-card stagger-animation">
                    <div class="module-header">
                        <div class="module-icon">
                            <span class="material-icons">straighten</span>
                        </div>
                        <h2 class="headline-6 module-title">Length Measurement - Metre Rule</h2>
                    </div>
                    <p class="body-1" style="color: var(--neutral-600); margin-bottom: 16px;">
                        Learn how to measure lengths accurately using a <strong>metre rule</strong>, while addressing common errors such as 
                        <strong>parallax</strong> and <strong>zero-error</strong>. This video highlights essential techniques--such as proper 
                        eye alignment and correct zero-point reading--to ensure precise measurements in practical tasks. 
                        Ideal for laying a strong foundation in measurement.
                    </p>
                    <div class="video-container">
                        <iframe src="https://www.youtube.com/embed/rtwBBFZFanA" 
                                title="Length Measurement - Metre Rule" 
                                allowfullscreen>
                        </iframe>
                    </div>
                    <div style="margin-top: 16px; padding: 12px; background-color: var(--accent-50); border-radius: 8px;">
                        <p class="caption" style="color: var(--accent-700);">
                            <span class="material-icons" style="font-size: 16px; vertical-align: middle; margin-right: 4px;">tips_and_updates</span>
                            Key Focus: Proper eye alignment, zero-error correction, and parallax avoidance
                        </p>
                    </div>
                </div>

                <!-- Precision Tools Module -->
                <div id="precision" class="module-card stagger-animation" style="display: none;">
                    <div class="module-header">
                        <div class="module-icon">
                            <span class="material-icons">precision_manufacturing</span>
                        </div>
                        <h2 class="headline-6 module-title">Precision Tools - Vernier Calipers</h2>
                    </div>
                    <p class="body-1" style="color: var(--neutral-600); margin-bottom: 16px;">
                        This lesson delves into the use of <strong>vernier calipers</strong>, teaching students how to measure internal 
                        and external dimensions with enhanced precision. The video showcases scale alignment, reading the 
                        <strong>vernier scale</strong>, and accounting for zero-error--key skills for improved measurement accuracy.
                    </p>
                    <div class="video-container">
                        <iframe src="https://www.youtube.com/embed/vkPlzmalvN4" 
                                title="Precision Tools - Vernier Calipers" 
                                allowfullscreen>
                        </iframe>
                    </div>
                    <div style="margin-top: 16px; padding: 12px; background-color: var(--accent-50); border-radius: 8px;">
                        <p class="caption" style="color: var(--accent-700);">
                            <span class="material-icons" style="font-size: 16px; vertical-align: middle; margin-right: 4px;">tips_and_updates</span>
                            Key Focus: Scale alignment, vernier scale reading, zero-error correction
                        </p>
                    </div>
                </div>

                <!-- Fine Measurement Module -->
                <div id="fine" class="module-card stagger-animation" style="display: none;">
                    <div class="module-header">
                        <div class="module-icon">
                            <span class="material-icons">tune</span>
                        </div>
                        <h2 class="headline-6 module-title">Fine Measurement - Micrometer Screw Gauge</h2>
                    </div>
                    <p class="body-1" style="color: var(--neutral-600); margin-bottom: 16px;">
                        A hands-on tutorial for using the <strong>micrometer screw gauge</strong>, demonstrating how to measure very 
                        small distances (down to fractions of millimetres). Students learn how to read both the sleeve and thimble 
                        scales, interpret measurements accurately, and troubleshoot common errors for precise results.
                    </p>
                    <div class="video-container">
                        <iframe src="https://www.youtube.com/embed/xKGo8XhLQzw" 
                                title="Fine Measurement - Micrometer Screw Gauge" 
                                allowfullscreen>
                        </iframe>
                    </div>
                    <div style="margin-top: 16px;">
                        <h3 class="headline-6" style="margin-bottom: 12px; color: var(--primary);">Additional Resources</h3>
                        <div class="video-container">
                            <iframe src="https://www.youtube.com/embed/P7ap1ztCbBI" 
                                    title="Advanced Micrometer Techniques" 
                                    allowfullscreen>
                            </iframe>
                        </div>
                    </div>
                    <div style="margin-top: 16px; padding: 12px; background-color: var(--accent-50); border-radius: 8px;">
                        <p class="caption" style="color: var(--accent-700);">
                            <span class="material-icons" style="font-size: 16px; vertical-align: middle; margin-right: 4px;">tips_and_updates</span>
                            Key Focus: Sleeve and thimble scale reading, sub-millimetre precision, error troubleshooting
                        </p>
                    </div>
                </div>

                <!-- Volume Measurement Module -->
                <div id="volume" class="module-card stagger-animation" style="display: none;">
                    <div class="module-header">
                        <div class="module-icon">
                            <span class="material-icons">science</span>
                        </div>
                        <h2 class="headline-6 module-title">Volume Measurement - Measuring Cylinder</h2>
                    </div>
                    <p class="body-1" style="color: var(--neutral-600); margin-bottom: 16px;">
                        This module introduces the proper use of a <strong>measuring cylinder</strong> for determining the volume of 
                        both liquids and irregular solids. Through the video demonstration, students observe how to read the 
                        <strong>meniscus</strong> correctly and avoid parallax error while calculating volume. Post-video activities 
                        include simulated scenarios where students measure varied liquids and compute volume using generated data.
                    </p>
                    <div class="video-container">
                        <iframe src="https://www.youtube.com/embed/Q_X8yKlzbkg" 
                                title="Volume Measurement - Measuring Cylinder" 
                                allowfullscreen>
                        </iframe>
                    </div>
                    <div style="margin-top: 16px;">
                        <h3 class="headline-6" style="margin-bottom: 12px; color: var(--primary);">Classic Demonstration</h3>
                        <p class="body-1" style="color: var(--neutral-600); margin-bottom: 12px;">
                            A classic demonstration outlining the proper procedure for using a measuring cylinder 
                            to measure liquid volume with clarity and precision.
                        </p>
                        <div class="video-container">
                            <iframe src="https://www.youtube.com/embed/jKpQxndZqIc" 
                                    title="Classic Volume Measurement Demonstration" 
                                    allowfullscreen>
                            </iframe>
                        </div>
                    </div>
                    <div style="margin-top: 16px; padding: 12px; background-color: var(--accent-50); border-radius: 8px;">
                        <p class="caption" style="color: var(--accent-700);">
                            <span class="material-icons" style="font-size: 16px; vertical-align: middle; margin-right: 4px;">tips_and_updates</span>
                            Key Focus: Meniscus reading, parallax avoidance, liquid and solid volume measurement
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Dark mode detection
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            document.documentElement.classList.add('dark');
        }
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
            if (event.matches) {
                document.documentElement.classList.add('dark');
            } else {
                document.documentElement.classList.remove('dark');
            }
        });

        // Module switching functionality
        function showModule(moduleId, tabElement) {
            // Hide all modules
            const modules = ['length', 'precision', 'fine', 'volume'];
            modules.forEach(module => {
                const moduleElement = document.getElementById(module);
                if (moduleElement) {
                    moduleElement.style.display = 'none';
                }
            });

            // Remove active class from all tabs
            const tabs = document.querySelectorAll('.nav-tab');
            tabs.forEach(tab => {
                tab.classList.remove('active');
            });

            // Show selected module
            const selectedModule = document.getElementById(moduleId);
            if (selectedModule) {
                selectedModule.style.display = 'block';
                selectedModule.classList.add('fade-in');
            }

            // Add active class to selected tab
            tabElement.classList.add('active');

            // Update TOC active state
            updateTOCActiveState(moduleId);

            // Prevent default link behavior
            event.preventDefault();
            return false;
        }

        // TOC functionality
        function scrollToSection(sectionId, linkElement) {
            event.preventDefault();
            
            if (sectionId === 'overview') {
                document.getElementById('overview').scrollIntoView({ behavior: 'smooth' });
            } else {
                // Show the module first
                const moduleTab = document.querySelector(`[onclick*="${sectionId}"]`);
                if (moduleTab) {
                    showModule(sectionId, moduleTab);
                }
                
                // Scroll to the module
                setTimeout(() => {
                    document.getElementById(sectionId).scrollIntoView({ behavior: 'smooth' });
                }, 100);
            }
            
            // Update active state
            updateTOCActiveState(sectionId);
        }

        function scrollToSectionMobile(sectionId, linkElement) {
            closeMobileTOC();
            setTimeout(() => {
                scrollToSection(sectionId, linkElement);
            }, 300);
        }

        function updateTOCActiveState(sectionId) {
            // Remove active class from all TOC links
            document.querySelectorAll('.toc-link').forEach(link => {
                link.classList.remove('active');
            });
            
            // Add active class to current section
            document.querySelectorAll(`[onclick*="${sectionId}"]`).forEach(link => {
                if (link.classList.contains('toc-link')) {
                    link.classList.add('active');
                }
            });
        }

        // Mobile TOC functionality
        function toggleMobileTOC() {
            const overlay = document.getElementById('mobileTocOverlay');
            const content = document.getElementById('mobileTocContent');
            
            overlay.style.display = 'block';
            setTimeout(() => {
                content.classList.add('show');
            }, 10);
        }

        function closeMobileTOC() {
            const overlay = document.getElementById('mobileTocOverlay');
            const content = document.getElementById('mobileTocContent');
            
            content.classList.remove('show');
            setTimeout(() => {
                overlay.style.display = 'none';
            }, 300);
        }

        // Initialize stagger animations
        document.addEventListener('DOMContentLoaded', function() {
            const staggerElements = document.querySelectorAll('.stagger-animation');
            staggerElements.forEach((element, index) => {
                setTimeout(() => {
                    element.style.opacity = '1';
                }, index * 100);
            });

            // Set initial TOC active state
            updateTOCActiveState('length');
        });

        // Smooth scrolling for navigation
        document.querySelectorAll('.nav-tab').forEach(tab => {
            tab.addEventListener('click', function(e) {
                e.preventDefault();
                const targetId = this.getAttribute('href').substring(1);
                showModule(targetId, this);
            });
        });

        // Intersection Observer for automatic TOC highlighting
        const observerOptions = {
            rootMargin: '-20% 0px -70% 0px',
            threshold: 0.1
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const sectionId = entry.target.id;
                    if (sectionId) {
                        updateTOCActiveState(sectionId);
                    }
                }
            });
        }, observerOptions);

        // Observe all sections
        document.addEventListener('DOMContentLoaded', () => {
            const sections = ['overview', 'length', 'precision', 'fine', 'volume'];
            sections.forEach(sectionId => {
                const element = document.getElementById(sectionId);
                if (element) {
                    observer.observe(element);
                }
            });
        });
    </script>
</body>
</html>
