<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JAMB UTME</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: '#5D5CDE',
                        primaryDark: '#4b4ab2',
                        correct: '#58cc02',
                        correctDark: '#46a302',
                        incorrect: '#ff4b4b',
                        incorrectDark: '#d92b2b',
                        hard: '#FF9500',
                        hardDark: '#CC7A00',
                        zen: '#FF3B30',
                        zenDark: '#CC2F26'
                    },
                    animation: {
                        'bounce-once': 'bounce 0.6s ease-in-out 1',
                        'shake': 'shake 0.5s ease-in-out',
                        'fade-in': 'fadeIn 0.5s ease-in-out',
                        'slide-in': 'slideIn 0.5s ease-in-out',
                        'pulse-once': 'pulse 1s ease-in-out 1',
                        'pulse-slow': 'pulse 2s infinite'
                    },
                    keyframes: {
                        shake: {
                            '0%, 100%': { transform: 'translateX(0)' },
                            '20%': { transform: 'translateX(-10px)' },
                            '40%': { transform: 'translateX(10px)' },
                            '60%': { transform: 'translateX(-10px)' },
                            '80%': { transform: 'translateX(10px)' },
                        },
                        fadeIn: {
                            '0%': { opacity: 0 },
                            '100%': { opacity: 1 },
                        },
                        slideIn: {
                            '0%': { transform: 'translateY(20px)', opacity: 0 },
                            '100%': { transform: 'translateY(0)', opacity: 1 },
                        }
                    }
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap');
       
        body {
            font-family: 'Nunito', sans-serif;
            transition: background-color 0.3s, color 0.3s;
        }
       
        .option-btn {
            transition: all 0.2s ease;
            border: 2px solid #e5e7eb;
        }
       
        .option-btn:hover:not(.disabled) {
            border-color: #5D5CDE;
            transform: translateY(-2px);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }
       
        .option-btn.disabled {
            cursor: default;
        }
       
        .correct {
            background-color: #58cc02;
            color: white;
            border-color: #46a302;
        }
       
        .dark .correct {
            background-color: #46a302;
            border-color: #3b8a01;
        }
       
        .incorrect {
            background-color: #ff4b4b;
            color: white;
            border-color: #d92b2b;
        }
       
        .dark .incorrect {
            background-color: #d92b2b;
            border-color: #b91c1c;
        }
       
        .progress-bar {
            transition: width 0.5s ease-in-out;
        }
       
        .highlight {
            color: #5D5CDE;
            font-weight: bold;
        }
       
        .dark .highlight {
            color: #7c7bf0;
        }
       
        .check-btn:disabled {
            opacity: 0.7;
            cursor: not-allowed;
        }
        
        /* Confetti animation for high scores */
        .confetti {
            width: 10px;
            height: 10px;
            background-color: #5D5CDE;
            position: absolute;
            opacity: 0;
            animation: fallDown 3s ease-out infinite;
        }
        
        @keyframes fallDown {
            0% {
                transform: translateY(-50px) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }
        
        /* Animated feedback box */
        .feedback-box {
            transform-origin: center;
            animation: feedback-appear 0.3s ease-out;
        }
        
        @keyframes feedback-appear {
            0% {
                transform: scale(0.8);
                opacity: 0;
            }
            100% {
                transform: scale(1);
                opacity: 1;
            }
        }
        
        /* Score circle animation */
        .score-circle-animation {
            transition: stroke-dashoffset 1.5s ease-in-out;
        }
        
        /* Review screen animations */
        .slide-right {
            animation: slideRight 0.3s ease-out forwards;
        }
        
        .slide-left {
            animation: slideLeft 0.3s ease-out forwards;
        }
        
        @keyframes slideRight {
            0% {
                transform: translateX(0);
                opacity: 1;
            }
            100% {
                transform: translateX(30px);
                opacity: 0;
            }
        }
        
        @keyframes slideLeft {
            0% {
                transform: translateX(0);
                opacity: 1;
            }
            100% {
                transform: translateX(-30px);
                opacity: 0;
            }
        }
        
        /* Timer animation */
        @keyframes timerWarning {
            0%, 100% {
                background-color: rgba(255, 75, 75, 0.8);
            }
            50% {
                background-color: rgba(255, 75, 75, 0.4);
            }
        }
        
        .timer-warning {
            animation: timerWarning 1s infinite;
        }
        
        /* Timer circular progress */
        .timer-progress {
            transition: stroke-dashoffset 1s linear;
        }
        
        /* Mode selection styles */
        .mode-option input:checked + label {
            border-color: currentColor;
            background-color: rgba(93, 92, 222, 0.1);
        }
        
        .mode-option.jamb input:checked + label {
            color: #5D5CDE;
        }
        
        .mode-option.hard input:checked + label {
            color: #FF9500;
        }
        
        .mode-option.zen input:checked + label {
            color: #FF3B30;
        }
        
        .dark .mode-option input:checked + label {
            background-color: rgba(93, 92, 222, 0.2);
        }
    </style>
</head>
<body class="min-h-screen bg-gray-50 dark:bg-gray-900 dark:text-white">
    <div class="container mx-auto px-4 py-8 max-w-3xl">
        <!-- Header -->
        <header class="flex justify-between items-center mb-4">
            <div class="flex flex-col">
                <div class="flex items-center">
                    <svg class="w-10 h-10 text-primary dark:text-primary" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0 2c-4.411 0-8 3.589-8 8s3.589 8 8 8 8-3.589 8-8-3.589-8-8-8zm3.493 5.889h-2.492v-2.493h-2.001v2.493h-2.493v2.001h2.493v2.493h2.001v-2.493h2.492v-2.001z"/>
                    </svg>
                    <h1 class="text-2xl md:text-3xl font-bold ml-2">JAMB UTME</h1>
                </div>
                <div class="ml-12">
                    <h2 class="text-lg md:text-xl text-gray-600 dark:text-gray-400">Use of English</h2>
                </div>
            </div>
           
            <button id="themeToggle" class="p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700">
                <svg id="lightIcon" class="w-6 h-6 hidden" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12 18C8.68629 18 6 15.3137 6 12C6 8.68629 8.68629 6 12 6C15.3137 6 18 8.68629 18 12C18 15.3137 15.3137 18 12 18ZM12 16C14.2091 16 16 14.2091 16 12C16 9.79086 14.2091 8 12 8C9.79086 8 8 9.79086 8 12C8 14.2091 9.79086 16 12 16ZM11 1H13V4H11V1ZM11 20H13V23H11V20ZM3.51472 4.92893L4.92893 3.51472L7.05025 5.63604L5.63604 7.05025L3.51472 4.92893ZM16.9497 18.364L18.364 16.9497L20.4853 19.0711L19.0711 20.4853L16.9497 18.364ZM19.0711 3.51472L20.4853 4.92893L18.364 7.05025L16.9497 5.63604L19.0711 3.51472ZM5.63604 16.9497L7.05025 18.364L4.92893 20.4853L3.51472 19.0711L5.63604 16.9497ZM23 11V13H20V11H23ZM4 11V13H1V11H4Z"></path>
                </svg>
                <svg id="darkIcon" class="w-6 h-6 hidden" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M10 7C10 10.866 13.134 14 17 14C18.9584 14 20.729 13.1957 21.9995 11.8995C22 11.933 22 11.9665 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C12.0335 2 12.067 2 12.1005 2.00049C10.8043 3.27105 10 5.04157 10 7ZM4 12C4 16.4183 7.58172 20 12 20C15.0583 20 17.7158 18.2839 19.062 15.7621C18.3945 15.9196 17.7035 16 17 16C12.0294 16 8 11.9706 8 7C8 6.29648 8.08036 5.60547 8.2379 4.938C5.71611 6.28423 4 8.9417 4 12Z"></path>
                </svg>
            </button>
        </header>
        
        <!-- Timer display -->
        <div id="timerContainer" class="hidden bg-white dark:bg-gray-800 rounded-full p-1 mb-4 shadow-md flex items-center justify-center">
            <div class="relative w-12 h-12 mr-2">
                <svg class="w-12 h-12 transform -rotate-90" viewBox="0 0 100 100">
                    <circle class="text-gray-200 dark:text-gray-700 stroke-current" stroke-width="10" fill="none" cx="50" cy="50" r="40"></circle>
                    <circle id="timerCircle" class="text-primary dark:text-primary stroke-current timer-progress" stroke-width="10" stroke-linecap="round" fill="none" cx="50" cy="50" r="40" stroke-dasharray="251.2" stroke-dashoffset="0"></circle>
                </svg>
                <div class="absolute inset-0 flex items-center justify-center">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-primary dark:text-primary" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd" />
                    </svg>
                </div>
            </div>
            <div id="timerDisplay" class="text-xl font-mono font-bold">0:40</div>
        </div>
       
        <!-- Progress Bar Container with Question Counter -->
        <div class="flex items-center mb-6">
            <div class="w-full bg-gray-200 h-4 rounded-full overflow-hidden dark:bg-gray-700 flex-1 mr-3">
                <div id="progressBar" class="progress-bar h-full bg-primary dark:bg-primaryDark" style="width: 5%;"></div>
            </div>
            <div id="questionCounter" class="text-sm font-medium text-gray-600 dark:text-gray-400 whitespace-nowrap">1/20</div>
        </div>
       
        <!-- Start Screen -->
        <div id="startScreen" class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 mb-8 text-center">
            <h2 class="text-2xl font-bold mb-6">Welcome to JAMB UTME</h2>
            
            <div class="mb-6">
                <svg class="w-24 h-24 mx-auto text-primary dark:text-primary" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0 2c-4.411 0-8 3.589-8 8s3.589 8 8 8 8-3.589 8-8-3.589-8-8-8zm3.493 5.889h-2.492v-2.493h-2.001v2.493h-2.493v2.001h2.493v2.493h2.001v-2.493h2.492v-2.001z"/>
                </svg>
            </div>
            
            <p class="text-lg mb-6">Test your knowledge of antonyms and prepare for your JAMB examination!</p>
            
            <!-- Mode Selection -->
            <div class="bg-gray-100 dark:bg-gray-700 p-4 rounded-lg mb-6">
                <h3 class="font-bold text-primary dark:text-primary mb-4 text-lg">Select Your Challenge Mode:</h3>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
                    <!-- No Timer Mode -->
                    <div class="mode-option">
                        <input type="radio" id="noTimerMode" name="mode" value="noTimer" class="hidden" checked>
                        <label for="noTimerMode" class="block p-3 border-2 border-gray-300 dark:border-gray-600 rounded-lg cursor-pointer transition-all hover:bg-gray-200 dark:hover:bg-gray-600 text-center">
                            <div class="text-gray-600 dark:text-gray-300 font-semibold mb-1">Practice Mode</div>
                            <div class="text-sm text-gray-500 dark:text-gray-400">No time limit</div>
                            <div class="text-xs text-gray-400 dark:text-gray-500 mt-2">For relaxed learning</div>
                        </label>
                    </div>
                    
                    <!-- JAMB Mode -->
                    <div class="mode-option jamb">
                        <input type="radio" id="jambMode" name="mode" value="jamb" class="hidden">
                        <label for="jambMode" class="block p-3 border-2 border-gray-300 dark:border-gray-600 rounded-lg cursor-pointer transition-all hover:bg-gray-200 dark:hover:bg-gray-600 text-center">
                            <div class="text-primary dark:text-primary font-semibold mb-1">JAMB Mode</div>
                            <div class="text-sm text-gray-500 dark:text-gray-400">40 seconds per question</div>
                            <div class="text-xs text-gray-400 dark:text-gray-500 mt-2">Based on actual exam timing</div>
                        </label>
                    </div>
                    
                    <!-- Hard Mode -->
                    <div class="mode-option hard">
                        <input type="radio" id="hardMode" name="mode" value="hard" class="hidden">
                        <label for="hardMode" class="block p-3 border-2 border-gray-300 dark:border-gray-600 rounded-lg cursor-pointer transition-all hover:bg-gray-200 dark:hover:bg-gray-600 text-center">
                            <div class="text-hard dark:text-hard font-semibold mb-1">Hard Mode</div>
                            <div class="text-sm text-gray-500 dark:text-gray-400">20 seconds per question</div>
                            <div class="text-xs text-gray-400 dark:text-gray-500 mt-2">For advanced practice</div>
                        </label>
                    </div>
                    
                    <!-- Zen Mode -->
                    <div class="mode-option zen md:col-start-2">
                        <input type="radio" id="zenMode" name="mode" value="zen" class="hidden">
                        <label for="zenMode" class="block p-3 border-2 border-gray-300 dark:border-gray-600 rounded-lg cursor-pointer transition-all hover:bg-gray-200 dark:hover:bg-gray-600 text-center">
                            <div class="text-zen dark:text-zen font-semibold mb-1">Zen Mode</div>
                            <div class="text-sm text-gray-500 dark:text-gray-400">10 seconds per question</div>
                            <div class="text-xs text-gray-400 dark:text-gray-500 mt-2">Master level challenge!</div>
                        </label>
                    </div>
                </div>
            </div>
            
            <button id="startBtn" class="px-8 py-3 rounded-lg bg-primary hover:bg-primaryDark text-white font-bold transition-colors text-lg">
                Start Quiz
            </button>
        </div>
       
        <!-- Main Quiz Container -->
        <main id="quizContainer" class="hidden bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 mb-8">
            <div id="questionArea" class="mb-6">
                <h2 class="text-lg md:text-xl font-bold mb-4">Choose the antonym for the highlighted word:</h2>
                <p id="question" class="text-lg md:text-xl mb-4 leading-relaxed"></p>
            </div>
           
            <div id="optionsArea" class="space-y-3 mb-6">
                <!-- Options will be generated here -->
            </div>
           
            <div id="feedbackArea" class="mb-6 hidden feedback-box p-4 rounded-lg">
                <!-- Feedback will appear here -->
            </div>
           
            <div class="flex justify-between">
                <div class="flex space-x-2">
                    <button id="checkBtn" class="px-6 py-3 rounded-lg bg-primary hover:bg-primaryDark text-white font-bold transition-colors disabled:opacity-50 disabled:cursor-not-allowed dark:bg-primary dark:hover:bg-primaryDark">
                        Check
                    </button>
                    <button id="nextBtn" class="px-6 py-3 rounded-lg bg-primary hover:bg-primaryDark text-white font-bold transition-colors hidden dark:bg-primary dark:hover:bg-primaryDark animate-pulse-once">
                        Continue
                    </button>
                </div>
                <button id="endQuizBtn" class="px-6 py-3 rounded-lg bg-red-500 hover:bg-red-600 text-white font-bold transition-colors dark:bg-red-600 dark:hover:bg-red-700">
                    End Quiz
                </button>
            </div>
        </main>
       
        <!-- Results Screen (Hidden initially) -->
        <div id="resultsScreen" class="hidden bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 text-center animate-fade-in">
            <div id="confettiContainer" class="absolute inset-0 overflow-hidden pointer-events-none"></div>
            
            <h2 id="resultTitle" class="text-2xl font-bold mb-4">Great job!</h2>
            <div class="mb-6 transform transition-all duration-500">
                <svg id="resultIcon" class="w-24 h-24 mx-auto text-correct dark:text-correctDark" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20ZM11.0026 16L6.75999 11.7574L8.17421 10.3431L11.0026 13.1716L16.6595 7.51472L18.0737 8.92893L11.0026 16Z"></path>
                </svg>
            </div>
            
            <!-- Score Circle -->
            <div class="mb-6 relative w-40 h-40 mx-auto">
                <svg class="w-full h-full transform rotate-[-90deg]" viewBox="0 0 100 100">
                    <circle class="text-gray-200 dark:text-gray-700 stroke-current" stroke-width="10" fill="none" cx="50" cy="50" r="40"></circle>
                    <circle id="scoreCircle" class="text-primary dark:text-primary stroke-current score-circle-animation" stroke-width="10" stroke-linecap="round" fill="none" cx="50" cy="50" r="40" stroke-dasharray="251.2" stroke-dashoffset="251.2"></circle>
                </svg>
                <div class="absolute inset-0 flex flex-col items-center justify-center">
                    <p id="scorePercentage" class="text-3xl font-bold text-primary dark:text-primary">0%</p>
                    <p id="finalScore" class="text-lg font-medium">0/20</p>
                </div>
            </div>
            
            <!-- Performance Rating -->
            <div class="mb-6">
                <span id="performanceRating" class="inline-block px-4 py-2 rounded-full text-white font-bold bg-primary dark:bg-primary">Beginner</span>
            </div>
            
            <!-- Performance Message -->
            <p id="performanceMessage" class="mb-6 text-lg">Keep practicing to master your antonyms!</p>
            
            <!-- Stats -->
            <div class="grid grid-cols-2 gap-4 mb-6">
                <div class="bg-gray-100 dark:bg-gray-700 p-3 rounded-lg">
                    <p class="text-sm text-gray-500 dark:text-gray-400">Correct</p>
                    <p id="correctAnswers" class="text-2xl font-bold text-correct dark:text-correctDark">0</p>
                </div>
                <div class="bg-gray-100 dark:bg-gray-700 p-3 rounded-lg">
                    <p class="text-sm text-gray-500 dark:text-gray-400">Incorrect</p>
                    <p id="incorrectAnswers" class="text-2xl font-bold text-incorrect dark:text-incorrectDark">0</p>
                </div>
            </div>
            
            <!-- Time Stats -->
            <div id="timeStatsContainer" class="bg-gray-100 dark:bg-gray-700 p-4 rounded-lg mb-6 hidden">
                <h3 class="text-lg font-semibold mb-2">Time Performance</h3>
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <p class="text-sm text-gray-500 dark:text-gray-400">Average Time</p>
                        <p id="avgTimePerQuestion" class="text-xl font-bold text-primary dark:text-primary">0s</p>
                    </div>
                    <div>
                        <p class="text-sm text-gray-500 dark:text-gray-400">Questions Timed Out</p>
                        <p id="timedOutQuestions" class="text-xl font-bold text-incorrect dark:text-incorrectDark">0</p>
                    </div>
                </div>
            </div>
            
            <!-- Contact Information -->
            <div class="bg-gray-100 dark:bg-gray-700 p-4 rounded-lg mb-6">
                <p class="text-gray-700 dark:text-gray-300">For more JAMB UTME time drills the students should reach out to me on <span class="font-bold">09160002029</span></p>
            </div>
            
            <div class="flex flex-col sm:flex-row justify-center gap-4 mb-4">
                <button id="reviewBtn" class="px-6 py-3 rounded-lg bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold transition-colors dark:bg-gray-700 dark:hover:bg-gray-600 dark:text-white disabled:opacity-50 disabled:cursor-not-allowed">
                    Review Missed Questions
                </button>
                
                <button id="restartBtn" class="px-6 py-3 rounded-lg bg-primary hover:bg-primaryDark text-white font-bold transition-colors dark:bg-primary dark:hover:bg-primaryDark">
                    Start Again
                </button>
            </div>
        </div>
        
        <!-- Review Screen (Hidden initially) -->
        <div id="reviewScreen" class="hidden bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 animate-fade-in">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-xl font-bold">Review Missed Questions</h2>
                <div id="reviewCounter" class="text-sm font-medium bg-gray-200 dark:bg-gray-700 px-3 py-1 rounded-full">1/5</div>
            </div>
            
            <div id="reviewQuestionContainer">
                <!-- Current review question content will go here -->
            </div>
            
            <div class="flex justify-between mt-6">
                <button id="prevReviewBtn" class="px-4 py-2 rounded-lg bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold transition-colors dark:bg-gray-700 dark:hover:bg-gray-600 dark:text-white">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline-block mr-1" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd" />
                    </svg>
                    Previous
                </button>
                
                <button id="backToResultsBtn" class="px-4 py-2 rounded-lg bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold transition-colors dark:bg-gray-700 dark:hover:bg-gray-600 dark:text-white">
                    Back to Results
                </button>
                
                <button id="nextReviewBtn" class="px-4 py-2 rounded-lg bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold transition-colors dark:bg-gray-700 dark:hover:bg-gray-600 dark:text-white">
                    Next
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline-block ml-1" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd" />
                    </svg>
                </button>
            </div>
        </div>
    </div>


    <script>
        // Dark mode detection and toggle
        function setTheme() {
            if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                document.documentElement.classList.add('dark');
                document.getElementById('lightIcon').classList.remove('hidden');
                document.getElementById('darkIcon').classList.add('hidden');
            } else {
                document.documentElement.classList.remove('dark');
                document.getElementById('darkIcon').classList.remove('hidden');
                document.getElementById('lightIcon').classList.add('hidden');
            }
        }


        setTheme();
       
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', setTheme);
       
        document.getElementById('themeToggle').addEventListener('click', () => {
            document.documentElement.classList.toggle('dark');
            document.getElementById('lightIcon').classList.toggle('hidden');
            document.getElementById('darkIcon').classList.toggle('hidden');
        });

        // Questions data
        const questions = [
            {
                text: "The doctor was very [gentle] with his Patients in the examining room.",
                options: ["harsh", "rude", "rough", "unkind", "callous"],
                correctIndex: 0 // "harsh" is the antonym of "gentle"
            },
            {
                text: "James is a disco-addict. He takes his studies rather [lightly].",
                options: ["humorously", "gloomily", "tediously", "carefully", "seriously"],
                correctIndex: 4 // "seriously" is the antonym of "lightly"
            },
            {
                text: "My cousin is very lazy. He will not take his studies seriously. His future looks quite [bleak].",
                options: ["cloudy", "cheerless", "bright", "huge", "sturdy"],
                correctIndex: 2 // "bright" is the antonym of "bleak"
            },
            {
                text: "While most of our recently elected legislators are living a life of [affluence] and ostentation, the vast majority of those who elected them into ofﬁce are unhappy.",
                options: ["inﬂuence", "pleasure", "poverty", "happiness", "consequence"],
                correctIndex: 2 // "poverty" is the antonym of "affluence"
            },
            {
                text: "It is generally believed [misers] are not loved by many.",
                options: ["spendthrift", "spenders", "hoarders", "savers", "thieves"],
                correctIndex: 1 // "spenders" is the antonym of "misers"
            },
            {
                text: "My brother's primary school foundation was [solid] and this affected his secondary education.",
                options: ["sound", "sordid", "shaky", "weak", "uneventful"],
                correctIndex: 3 // "weak" is the antonym of "solid"
            },
            {
                text: "Politicians are holders of political appointments are generally assumed to be [cunning].",
                options: ["kind", "straightforward", "generous", "even-handed", "sly"],
                correctIndex: 1 // "straightforward" is the antonym of "cunning"
            },
            {
                text: "The long straight trunk of the tree is [ideal] for round wood uses like railway sleepers, rafters and fence posts.",
                options: ["best", "perfect", "most unsuitable", "satisfactory", "poor"],
                correctIndex: 2 // "most unsuitable" is the antonym of "ideal"
            },
            {
                text: "A book on style without abundant examples seems to me as [ineffectual] as a book on biology without abundant illustrations.",
                options: ["useless", "difﬁcult", "interesting", "satisfactory", "attractive"],
                correctIndex: 3 // "satisfactory" is the antonym of "ineffectual"
            },
            {
                text: "To most people last Christmas was an [austere] period.",
                options: ["prosperous", "harsh", "severe", "sour", "stem"],
                correctIndex: 0 // "prosperous" is the antonym of "austere"
            },
            {
                text: "The Chief was [generous] in his award of university scholarships",
                options: ["noble", "considerate", "liberal", "mean", "honest"],
                correctIndex: 3 // "mean" is the antonym of "generous"
            },
            {
                text: "Chidi is naturally [taciturn]",
                options: ["friendly", "cheerful", "dumb", "lively", "garrulous"],
                correctIndex: 4 // "garrulous" is the antonym of "taciturn"
            },
            {
                text: "He is loved for his [altruism].",
                options: ["benevolence", "sincerity", "selfishness", "selflessness", "kindness"],
                correctIndex: 2 // "selfishness" is the antonym of "altruism"
            },
            {
                text: "The Military Governor [upheld] the decision of his cabinet.",
                options: ["held up", "undercut", "maintained", "abolished", "reversed"],
                correctIndex: 4 // "reversed" is the antonym of "upheld"
            },
            {
                text: "Many untrustworthy students give [evasive] answers to question they fully understand.",
                options: ["direct", "outspoken", "simple", "truthful", "clever"],
                correctIndex: 0 // "direct" is the antonym of "evasive"
            },
            {
                text: "The deafening noise of the two jet planes which flew across our compound yesterday made people fear that an assault on the country might be [imminent].",
                options: ["impending", "ahead", "remote", "eminent", "threatening"],
                correctIndex: 2 // "remote" is the antonym of "imminent"
            },
            {
                text: "Disgruntled people are [indifferent] to any plans to rid the society of evil.",
                options: ["different from", "different about", "in agreement with", "interested in", "opposed to"],
                correctIndex: 3 // "interested in" is the antonym of "indifferent"
            },
            {
                text: "The [severity] of the harmattan helped me to complete my writing assignment in record time because I had no choice but to lock myself indoors.",
                options: ["warmth", "mildness", "moderation", "leniency", "gentility"],
                correctIndex: 1 // "mildness" is the antonym of "severity"
            },
            {
                text: "The increase in transport fares [deterred] our club from planning an excursion this year.",
                options: ["deferred", "irritated", "implied", "restricted", "encouraged"],
                correctIndex: 4 // "encouraged" is the antonym of "deterred"
            },
            {
                text: "This care [entitles] you to attend the film show.",
                options: ["disqualifies", "discourages", "disenchants", "proclaims", "satisfies"],
                correctIndex: 0 // "disqualifies" is the antonym of "entitles"
            },

            // ... [All remaining question data is unchanged] ...
        ];

        // Quiz variables
        let currentQuestionIndex = 0;
        let score = 0;
        let selectedOptionIndex = -1;
        let answeredQuestions = 0;
        let incorrectAnswers = [];
        let userAnswers = []; // Track all user answers (correct and incorrect)
        let currentReviewIndex = 0;
        let correctAnswersList = []; // Track indices of correctly answered questions
        
        // Timer related variables
        let timerEnabled = false;
        let timerMode = 'noTimer'; // noTimer, jamb, hard, zen
        const TIME_LIMITS = {
            'noTimer': 0,
            'jamb': 40, // 40 seconds (JAMB timing)
            'hard': 20, // 20 seconds (Hard mode)
            'zen': 10   // 10 seconds (Zen mode)
        };
        let timeRemaining = 0;
        let timerInterval = null;
        let questionStartTime = 0;
        let questionTimes = []; // Track time taken for each question
        let timedOutQuestions = 0; // Count questions that timed out
        
        // DOM elements
        const questionEl = document.getElementById('question');
        const optionsAreaEl = document.getElementById('optionsArea');
        const feedbackAreaEl = document.getElementById('feedbackArea');
        const progressBarEl = document.getElementById('progressBar');
        const questionCounterEl = document.getElementById('questionCounter');
        const checkBtnEl = document.getElementById('checkBtn');
        const nextBtnEl = document.getElementById('nextBtn');
        const startScreenEl = document.getElementById('startScreen');
        const quizContainerEl = document.getElementById('quizContainer');
        const resultsScreenEl = document.getElementById('resultsScreen');
        const finalScoreEl = document.getElementById('finalScore');
        const scorePercentageEl = document.getElementById('scorePercentage');
        const scoreCircleEl = document.getElementById('scoreCircle');
        const performanceRatingEl = document.getElementById('performanceRating');
        const performanceMessageEl = document.getElementById('performanceMessage');
        const correctAnswersEl = document.getElementById('correctAnswers');
        const incorrectAnswersEl = document.getElementById('incorrectAnswers');
        const resultTitleEl = document.getElementById('resultTitle');
        const resultIconEl = document.getElementById('resultIcon');
        const restartBtnEl = document.getElementById('restartBtn');
        const confettiContainerEl = document.getElementById('confettiContainer');
        const reviewBtnEl = document.getElementById('reviewBtn');
        const endQuizBtnEl = document.getElementById('endQuizBtn');
        
        // Review screen elements
        const reviewScreenEl = document.getElementById('reviewScreen');
        const reviewQuestionContainerEl = document.getElementById('reviewQuestionContainer');
        const reviewCounterEl = document.getElementById('reviewCounter');
        const prevReviewBtnEl = document.getElementById('prevReviewBtn');
        const nextReviewBtnEl = document.getElementById('nextReviewBtn');
        const backToResultsBtnEl = document.getElementById('backToResultsBtn');
        
        // Timer elements
        const timerContainerEl = document.getElementById('timerContainer');
        const timerDisplayEl = document.getElementById('timerDisplay');
        const timerCircleEl = document.getElementById('timerCircle');
        const startBtnEl = document.getElementById('startBtn');
        const avgTimePerQuestionEl = document.getElementById('avgTimePerQuestion');
        const timedOutQuestionsEl = document.getElementById('timedOutQuestions');
        const timeStatsContainerEl = document.getElementById('timeStatsContainer');
        
        // Mode selection elements
        const modeInputs = document.querySelectorAll('input[name="mode"]');
        
        // Initialize the quiz
        function initQuiz() {
            currentQuestionIndex = 0;
            score = 0;
            answeredQuestions = 0;
            incorrectAnswers = [];
            correctAnswersList = [];
            userAnswers = [];
            questionTimes = [];
            timedOutQuestions = 0;
            
            // Make sure the start screen is visible
            startScreenEl.classList.remove('hidden');
            quizContainerEl.classList.add('hidden');
            resultsScreenEl.classList.add('hidden');
            reviewScreenEl.classList.add('hidden');
            
            // Clear any lingering confetti
            confettiContainerEl.innerHTML = '';
        }
        
        // Start the quiz
        function startQuiz() {
            // Get selected mode
            let selectedMode = 'noTimer';
            modeInputs.forEach(input => {
                if (input.checked) {
                    selectedMode = input.value;
                }
            });
            
            timerMode = selectedMode;
            timerEnabled = (selectedMode !== 'noTimer');
            
            // Set timer color based on mode
            if (timerEnabled) {
                timerContainerEl.classList.remove('hidden');
                
                // Set timer circle color based on mode
                if (timerMode === 'jamb') {
                    timerCircleEl.classList.remove('text-hard', 'text-zen');
                    timerCircleEl.classList.add('text-primary');
                } else if (timerMode === 'hard') {
                    timerCircleEl.classList.remove('text-primary', 'text-zen');
                    timerCircleEl.classList.add('text-hard');
                } else if (timerMode === 'zen') {
                    timerCircleEl.classList.remove('text-primary', 'text-hard');
                    timerCircleEl.classList.add('text-zen');
                }
            } else {
                timerContainerEl.classList.add('hidden');
            }
            
            // Hide start screen, show quiz
            startScreenEl.classList.add('hidden');
            quizContainerEl.classList.remove('hidden');
            
            // Load first question
            loadQuestion();
            updateProgressBar();
        }

        // Load a question
        function loadQuestion() {
            selectedOptionIndex = -1;
            checkBtnEl.disabled = true;
            nextBtnEl.classList.add('hidden');
            checkBtnEl.classList.remove('hidden');
            feedbackAreaEl.classList.add('hidden');
           
            const question = questions[currentQuestionIndex];
           
            // Format the question with highlighting
            const formattedQuestion = question.text.replace(/\[(.*?)\]/g, '<span class="highlight">$1</span>');
            questionEl.innerHTML = formattedQuestion;
           
            // Generate option buttons
            optionsAreaEl.innerHTML = '';
           
            const optionLetters = ['A', 'B', 'C', 'D', 'E'];
            question.options.forEach((option, index) => {
                const optionBtn = document.createElement('button');
                optionBtn.className = 'option-btn w-full text-left p-4 rounded-lg flex items-center hover:shadow-md transition-all';
                optionBtn.innerHTML = `
                    <span class="flex items-center justify-center w-8 h-8 rounded-full bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-200 mr-3 font-bold">${optionLetters[index]}</span>
                    <span>${option}</span>
                `;
               
                optionBtn.addEventListener('click', () => selectOption(index, optionBtn));
                optionsAreaEl.appendChild(optionBtn);
            });
            
            // Update question counter
            questionCounterEl.textContent = `${currentQuestionIndex + 1}/${questions.length}`;
            
            // Start timer for this question if timer is enabled
            if (timerEnabled) {
                startTimer();
            }
            
            // Record question start time
            questionStartTime = Date.now();
        }
        
        // Timer functions
        function startTimer() {
            // Get time limit based on mode
            timeRemaining = TIME_LIMITS[timerMode];
            updateTimerDisplay();
            
            // Reset timer circle animation
            const circumference = 2 * Math.PI * 40;
            timerCircleEl.style.strokeDasharray = `${circumference} ${circumference}`;
            timerCircleEl.style.strokeDashoffset = 0;
            timerDisplayEl.classList.remove('text-red-500', 'animate-pulse-slow');
            
            // Clear any existing timer
            if (timerInterval) {
                clearInterval(timerInterval);
            }
            
            // Start new timer
            timerInterval = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                // Update timer circle
                const progress = (TIME_LIMITS[timerMode] - timeRemaining) / TIME_LIMITS[timerMode];
                const dashoffset = circumference * progress;
                timerCircleEl.style.strokeDashoffset = dashoffset;
                
                // Add warning when time is running low (less than 25% remaining)
                const warningThreshold = Math.max(2, Math.floor(TIME_LIMITS[timerMode] * 0.25));
                if (timeRemaining <= warningThreshold) {
                    timerDisplayEl.classList.add('text-red-500', 'animate-pulse-slow');
                }
                
                // Handle time expiration
                if (timeRemaining <= 0) {
                    clearInterval(timerInterval);
                    handleTimeExpired();
                }
            }, 1000);
        }
        
        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            timerDisplayEl.textContent = `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
        }
        
        function stopTimer() {
            if (timerInterval) {
                clearInterval(timerInterval);
                timerInterval = null;
            }
            
            // Record time spent on this question
            if (timerEnabled) {
                const timeSpent = Math.min(TIME_LIMITS[timerMode] - timeRemaining, TIME_LIMITS[timerMode]);
                questionTimes.push(timeSpent);
            }
        }
        
        function handleTimeExpired() {
            // Stop the timer
            stopTimer();
            
            // Count this as a timed out question
            timedOutQuestions++;
            
            // Mark this question as incorrect
            incorrectAnswers.push(currentQuestionIndex);
            userAnswers[currentQuestionIndex] = -1; // -1 indicates timeout/no answer
            
            // Show timeout feedback
            feedbackAreaEl.innerHTML = `
                <div class="flex flex-col items-center justify-center">
                    <div class="flex items-center mb-2">
                        <svg class="w-8 h-8 mr-2 text-incorrect dark:text-incorrectDark" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20ZM12 10.5858L14.8284 7.75736L16.2426 9.17157L13.4142 12L16.2426 14.8284L14.8284 16.2426L12 13.4142L9.17157 16.2426L7.75736 14.8284L10.5858 12L7.75736 9.17157L9.17157 7.75736L12 10.5858Z"></path>
                        </svg>
                        <span class="text-incorrect dark:text-incorrectDark font-bold text-xl">Time's Up!</span>
                    </div>
                    <p class="text-gray-700 dark:text-gray-300 mb-2">The correct answer is:</p>
                    <div class="bg-gray-100 dark:bg-gray-700 px-4 py-2 rounded-lg font-medium">
                        ${questions[currentQuestionIndex].options[questions[currentQuestionIndex].correctIndex]}
                    </div>
                </div>
            `;
            feedbackAreaEl.classList.add('bg-red-100', 'dark:bg-red-900', 'dark:bg-opacity-20', 'border-l-4', 'border-incorrect', 'dark:border-incorrectDark');
            feedbackAreaEl.classList.remove('hidden');
            
            // Disable all options
            document.querySelectorAll('.option-btn').forEach(btn => {
                btn.classList.add('disabled');
            });
            
            // Show the correct answer
            const optionButtons = document.querySelectorAll('.option-btn');
            optionButtons[questions[currentQuestionIndex].correctIndex].classList.add('correct');
            
            // Show next button
            checkBtnEl.classList.add('hidden');
            nextBtnEl.classList.remove('hidden');
            
            answeredQuestions++;
            updateProgressBar();
        }

        // Select an option
        function selectOption(index, buttonEl) {
            if (nextBtnEl.classList.contains('hidden')) {
                // Clear previous selections
                document.querySelectorAll('.option-btn').forEach(btn => {
                    btn.classList.remove('bg-gray-100', 'dark:bg-gray-700', 'border-primary');
                });
               
                // Mark this option as selected
                buttonEl.classList.add('bg-gray-100', 'dark:bg-gray-700', 'border-primary');
                selectedOptionIndex = index;
                checkBtnEl.disabled = false;
            }
        }

        // Check the answer
        function checkAnswer() {
            // Stop the timer if it's running
            if (timerEnabled) {
                stopTimer();
            }
            
            const question = questions[currentQuestionIndex];
            const optionButtons = document.querySelectorAll('.option-btn');
           
            // Disable all options
            optionButtons.forEach(btn => {
                btn.classList.add('disabled');
            });
           
            const isCorrect = selectedOptionIndex === question.correctIndex;
            
            // Track the user's answer
            userAnswers[currentQuestionIndex] = selectedOptionIndex;
            
            // Mark correct and incorrect
            optionButtons.forEach((btn, index) => {
                if (index === question.correctIndex) {
                    btn.classList.add('correct');
                } else if (index === selectedOptionIndex) {
                    btn.classList.add('incorrect', 'animate-shake');
                }
            });
           
            // Update score and feedback
            if (isCorrect) {
                score++;
                correctAnswersList.push(currentQuestionIndex);
                
                feedbackAreaEl.innerHTML = `
                    <div class="flex flex-col items-center justify-center">
                        <div class="flex items-center mb-2">
                            <svg class="w-8 h-8 mr-2 text-correct dark:text-correctDark animate-bounce-once" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20ZM11.0026 16L6.75999 11.7574L8.17421 10.3431L11.0026 13.1716L16.6595 7.51472L18.0737 8.92893L11.0026 16Z"></path>
                            </svg>
                            <span class="text-correct dark:text-correctDark font-bold text-xl">Correct!</span>
                        </div>
                        <p class="text-gray-700 dark:text-gray-300">Great job identifying the antonym!</p>
                    </div>
                `;
                feedbackAreaEl.classList.add('bg-green-100', 'dark:bg-green-900', 'dark:bg-opacity-20', 'border-l-4', 'border-correct', 'dark:border-correctDark');
            } else {
                // Track incorrect answers
                incorrectAnswers.push(currentQuestionIndex);
                
                feedbackAreaEl.innerHTML = `
                    <div class="flex flex-col items-center justify-center">
                        <div class="flex items-center mb-2">
                            <svg class="w-8 h-8 mr-2 text-incorrect dark:text-incorrectDark" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20ZM12 10.5858L14.8284 7.75736L16.2426 9.17157L13.4142 12L16.2426 14.8284L14.8284 16.2426L12 13.4142L9.17157 16.2426L7.75736 14.8284L10.5858 12L7.75736 9.17157L9.17157 7.75736L12 10.5858Z"></path>
                            </svg>
                            <span class="text-incorrect dark:text-incorrectDark font-bold text-xl">Incorrect</span>
                        </div>
                        <p class="text-gray-700 dark:text-gray-300 mb-2">The correct answer is:</p>
                        <div class="bg-gray-100 dark:bg-gray-700 px-4 py-2 rounded-lg font-medium">
                            ${question.options[question.correctIndex]}
                        </div>
                    </div>
                `;
                feedbackAreaEl.classList.add('bg-red-100', 'dark:bg-red-900', 'dark:bg-opacity-20', 'border-l-4', 'border-incorrect', 'dark:border-incorrectDark');
            }
           
            feedbackAreaEl.classList.remove('hidden');
           
            // Hide check button, show next button
            checkBtnEl.classList.add('hidden');
            nextBtnEl.classList.remove('hidden');
           
            answeredQuestions++;
            updateProgressBar();
        }

        // Go to next question
        function nextQuestion() {
            currentQuestionIndex++;
           
            if (currentQuestionIndex < questions.length) {
                loadQuestion();
            } else {
                showResults();
            }
        }

        // Update progress bar
        function updateProgressBar() {
            const progressPercentage = (answeredQuestions / questions.length) * 100;
            progressBarEl.style.width = `${progressPercentage}%`;
        }
        
        // Create confetti effect for high scores
        function createConfetti() {
            const colors = ['#5D5CDE', '#FF5757', '#FFD700', '#7FFFD4', '#FF69B4'];
            
            for (let i = 0; i < 100; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.left = `${Math.random() * 100}%`;
                confetti.style.animationDelay = `${Math.random() * 2}s`;
                confetti.style.width = `${Math.random() * 10 + 5}px`;
                confetti.style.height = `${Math.random() * 10 + 5}px`;
                confettiContainerEl.appendChild(confetti);
            }
        }

        // End quiz early
        function endQuizEarly() {
            // Stop any running timer
            if (timerInterval) {
                clearInterval(timerInterval);
                timerInterval = null;
            }
            
            showResults();
        }

        // Show results screen
        function showResults() {
            // Stop any running timer
            if (timerInterval) {
                clearInterval(timerInterval);
                timerInterval = null;
            }
            
            quizContainerEl.classList.add('hidden');
            resultsScreenEl.classList.remove('hidden');
            reviewScreenEl.classList.add('hidden');
            
            // Calculate percentage
            const percentage = Math.round((score / answeredQuestions) * 100);
            
            // Update scores
            finalScoreEl.textContent = `${score}/${answeredQuestions}`;
            scorePercentageEl.textContent = `${percentage}%`;
            correctAnswersEl.textContent = score;
            incorrectAnswersEl.textContent = answeredQuestions - score;
            
            // Show/hide and update time statistics
            if (timerEnabled) {
                const validTimes = questionTimes.filter(time => time > 0);
                let avgTime = 0;
                if (validTimes.length > 0) {
                    avgTime = Math.round(validTimes.reduce((a, b) => a + b, 0) / validTimes.length);
                }
                avgTimePerQuestionEl.textContent = `${avgTime}s`;
                timedOutQuestionsEl.textContent = timedOutQuestions;
                timeStatsContainerEl.classList.remove('hidden');
            } else {
                timeStatsContainerEl.classList.add('hidden');
            }
            
            // Enable/disable review button
            if (incorrectAnswers.length > 0) {
                reviewBtnEl.disabled = false;
                reviewBtnEl.classList.remove('opacity-50', 'cursor-not-allowed');
            } else {
                reviewBtnEl.disabled = true;
                reviewBtnEl.classList.add('opacity-50', 'cursor-not-allowed');
            }
            
            // Animate score circle
            const circumference = 2 * Math.PI * 40;
            const offset = circumference - (percentage / 100) * circumference;
            scoreCircleEl.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircleEl.style.strokeDashoffset = circumference;
            
            // Use setTimeout to trigger the animation after the element is visible
            setTimeout(() => {
                scoreCircleEl.style.strokeDashoffset = offset;
            }, 100);
            
            // Set performance rating and message based on score
            let ratingText, ratingColor, message, iconColor;
            
            if (percentage >= 90) {
                ratingText = "Vocabulary Master";
                ratingColor = "#58cc02"; // Success green
                message = "Outstanding! Your antonym knowledge is exceptional!";
                iconColor = "#58cc02";
                
                // Show confetti for high scores
                createConfetti();
                
                resultTitleEl.textContent = "Exceptional!";
            } else if (percentage >= 70) {
                ratingText = "Advanced";
                ratingColor = "#5D5CDE"; // Primary color
                message = "Great job! You have a strong grasp of antonyms.";
                iconColor = "#5D5CDE";
                resultTitleEl.textContent = "Great Work!";
            } else if (percentage >= 50) {
                ratingText = "Intermediate";
                ratingColor = "#FFB800"; // Warning/orange
                message = "Good effort! Keep practicing to improve your vocabulary.";
                iconColor = "#FFB800";
                resultTitleEl.textContent = "Good Progress!";
            } else {
                ratingText = "Beginner";
                ratingColor = "#ff4b4b"; // Error/red
                message = "Keep practicing! Review the antonyms you missed and try again.";
                iconColor = "#ff4b4b";
                resultTitleEl.textContent = "Keep Practicing!";
                
                // Change icon for low scores
                resultIconEl.innerHTML = `<path d="M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20ZM12 14C13.1046 14 14 13.1046 14 12C14 10.8954 13.1046 10 12 10C10.8954 10 10 10.8954 10 12C10 13.1046 10.8954 14 12 14ZM8.5 9C9.32843 9 10 8.32843 10 7.5C10 6.67157 9.32843 6 8.5 6C7.67157 6 7 6.67157 7 7.5C7 8.32843 7.67157 9 8.5 9ZM15.5 9C16.3284 9 17 8.32843 17 7.5C17 6.67157 16.3284 6 15.5 6C14.6716 6 14 6.67157 14 7.5C14 8.32843 14.6716 9 15.5 9Z"></path>`;
            }
            
            // Apply the styles
            performanceRatingEl.textContent = ratingText;
            performanceRatingEl.style.backgroundColor = ratingColor;
            performanceMessageEl.textContent = message;
            resultIconEl.style.color = iconColor;
            
            // In dark mode, use slightly adjusted colors
            if (document.documentElement.classList.contains('dark')) {
                if (ratingColor === "#58cc02") {
                    performanceRatingEl.style.backgroundColor = "#46a302";
                } else if (ratingColor === "#ff4b4b") {
                    performanceRatingEl.style.backgroundColor = "#d92b2b";
                }
            }
        }
        
        // Show review screen
        function showReviewScreen() {
            resultsScreenEl.classList.add('hidden');
            reviewScreenEl.classList.remove('hidden');
            
            // Reset to first missed question
            currentReviewIndex = 0;
            loadReviewQuestion();
        }
        
        // Load a review question
        function loadReviewQuestion() {
            if (incorrectAnswers.length === 0) return;
            
            const questionIndex = incorrectAnswers[currentReviewIndex];
            const question = questions[questionIndex];
            const userAnswer = userAnswers[questionIndex];
            
            // Format the question with highlighting
            const formattedQuestion = question.text.replace(/\[(.*?)\]/g, '<span class="highlight">$1</span>');
            
            // Update the review counter
            reviewCounterEl.textContent = `${currentReviewIndex + 1}/${incorrectAnswers.length}`;
            
            // Disable/enable navigation buttons
            prevReviewBtnEl.disabled = currentReviewIndex === 0;
            nextReviewBtnEl.disabled = currentReviewIndex === incorrectAnswers.length - 1;
            
            if (prevReviewBtnEl.disabled) {
                prevReviewBtnEl.classList.add('opacity-50', 'cursor-not-allowed');
            } else {
                prevReviewBtnEl.classList.remove('opacity-50', 'cursor-not-allowed');
            }
            
            if (nextReviewBtnEl.disabled) {
                nextReviewBtnEl.classList.add('opacity-50', 'cursor-not-allowed');
            } else {
                nextReviewBtnEl.classList.remove('opacity-50', 'cursor-not-allowed');
            }
            
            // Build the review question content
            let userAnswerText;
            if (userAnswer === -1) {
                userAnswerText = '<em>Time ran out - no answer selected</em>';
            } else {
                userAnswerText = question.options[userAnswer];
            }
            
            reviewQuestionContainerEl.innerHTML = `
                <div class="mb-6">
                    <h3 class="text-lg font-semibold mb-2">Question:</h3>
                    <p class="text-lg mb-4">${formattedQuestion}</p>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                    <div class="bg-red-100 dark:bg-red-900 dark:bg-opacity-20 p-4 rounded-lg border-l-4 border-incorrect dark:border-incorrectDark">
                        <h4 class="font-semibold mb-2 text-incorrect dark:text-incorrectDark">Your Answer:</h4>
                        <p>${userAnswerText}</p>
                    </div>
                    
                    <div class="bg-green-100 dark:bg-green-900 dark:bg-opacity-20 p-4 rounded-lg border-l-4 border-correct dark:border-correctDark">
                        <h4 class="font-semibold mb-2 text-correct dark:text-correctDark">Correct Answer:</h4>
                        <p>${question.options[question.correctIndex]}</p>
                    </div>
                </div>
                
                <div class="bg-blue-100 dark:bg-blue-900 dark:bg-opacity-20 p-4 rounded-lg">
                    <h4 class="font-semibold mb-2 text-primary dark:text-blue-300">Remember:</h4>
                    <p>An antonym is a word opposite in meaning to another word. The highlighted word <span class="highlight">${question.text.match(/\[(.*?)\]/)[1]}</span> is opposite in meaning to <strong>${question.options[question.correctIndex]}</strong>.</p>
                </div>
            `;
        }
        
        // Navigate to previous review question
        function prevReviewQuestion() {
            if (currentReviewIndex > 0) {
                // Add slide-out animation
                reviewQuestionContainerEl.classList.add('slide-left');
                
                setTimeout(() => {
                    currentReviewIndex--;
                    loadReviewQuestion();
                    reviewQuestionContainerEl.classList.remove('slide-left');
                    // Add slide-in animation
                    reviewQuestionContainerEl.classList.add('animate-fade-in');
                    
                    // Remove animation class after it completes
                    setTimeout(() => {
                        reviewQuestionContainerEl.classList.remove('animate-fade-in');
                    }, 300);
                }, 300);
            }
        }
        
        // Navigate to next review question
        function nextReviewQuestion() {
            if (currentReviewIndex < incorrectAnswers.length - 1) {
                // Add slide-out animation
                reviewQuestionContainerEl.classList.add('slide-right');
                
                setTimeout(() => {
                    currentReviewIndex++;
                    loadReviewQuestion();
                    reviewQuestionContainerEl.classList.remove('slide-right');
                    // Add slide-in animation
                    reviewQuestionContainerEl.classList.add('animate-fade-in');
                    
                    // Remove animation class after it completes
                    setTimeout(() => {
                        reviewQuestionContainerEl.classList.remove('animate-fade-in');
                    }, 300);
                }, 300);
            }
        }
        
        // Return to results screen
        function backToResults() {
            reviewScreenEl.classList.add('hidden');
            resultsScreenEl.classList.remove('hidden');
        }

        // Event listeners
        checkBtnEl.addEventListener('click', checkAnswer);
        nextBtnEl.addEventListener('click', nextQuestion);
        restartBtnEl.addEventListener('click', initQuiz);
        reviewBtnEl.addEventListener('click', showReviewScreen);
        prevReviewBtnEl.addEventListener('click', prevReviewQuestion);
        nextReviewBtnEl.addEventListener('click', nextReviewQuestion);
        backToResultsBtnEl.addEventListener('click', backToResults);
        startBtnEl.addEventListener('click', startQuiz);
        endQuizBtnEl.addEventListener('click', endQuizEarly);

        // Start the quiz
        initQuiz();
    </script>
</body>
</html>
