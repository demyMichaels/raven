<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Relation Builder Game</title>

    <style>

        :root {
            --primary-color: #4a90e2;
            --secondary-color: #50e3c2;
            --background-light: #f8f9fa;
            --text-dark: #2c3e50;
            --success-green: #27ae60;
            --error-red: #e74c3c;
        }

        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background: var(--background-light);
            margin: 0;
            padding: 2rem;
        }

        .game-container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 15px rgba(0,0,0,0.1);
            padding: 2rem;
        }

        .header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .sets-container {
            display: flex;
            justify-content: space-between;
            position: relative;
            min-height: 400px;
        }

        .domain-set, .range-set {
            width: 45%;
            padding: 1rem;
            border: 2px solid var(--primary-color);
            border-radius: 8px;
        }

        .elements {
            display: grid;
            gap: 1rem;
            padding: 1rem;
        }

        .element {
            padding: 1rem;
            background: var(--primary-color);
            color: white;
            border-radius: 4px;
            cursor: pointer;
            transition: transform 0.2s;
            text-align: center;
            user-select: none;
        }

        .element.selected {
            transform: scale(1.05);
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        }

        #connectionLayer {
            position: absolute;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }

        .connection {
            stroke: var(--secondary-color);
            stroke-width: 2;
            marker-end: url(#arrowhead);
        }

        .controls {
            margin-top: 2rem;
            text-align: center;
        }

        button {
            padding: 0.8rem 1.5rem;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.2s;
            margin: 0 0.5rem;
        }

        #checkBtn {
            background: var(--success-green);
            color: white;
        }

        #resetBtn {
            background: var(--error-red);
            color: white;
        }

        .results {
            margin-top: 1.5rem;
            text-align: center;
        }

        #feedback {
            margin: 1rem 0;
            min-height: 1.5rem;
            font-weight: 500;
        }

        .ordered-pairs {
            font-family: monospace;
            font-size: 1.1rem;
            padding: 1rem;
            background: #f8f9fa;
            border-radius: 4px;
            border: 1px solid #e9ecef;
            color: #2c3e50;
        }

        .success { color: var(--success-green); }
        .error { color: var(--error-red); }
    </style>



</head>

<body>
    <div class="game-container">
        <div class="header">
            <h1>Relation Builder</h1>
            <p>Connect elements from Domain to Range (Click domain first, then range)</p>
        </div>
        
        <div class="sets-container">

            <div class="domain-set">
                <h2>Domain</h2>
                <div class="elements" id="domainElements"></div>
            </div>
            
            <svg id="connectionLayer" xmlns="http://www.w3.org/2000/svg"></svg>
            

            <div class="range-set">
                <h2>Range</h2>
                <div class="elements" id="rangeElements"></div>
            </div>

        </div>




        <div class="controls">
            <button id="checkBtn">Check Relation</button>
            <button id="resetBtn">Reset All</button>

            <div class="results">
                <div id="feedback"></div>
                <div id="orderedPairs" class="ordered-pairs"></div>
            </div>

        </div>
    </div>


    <script>
        class RelationGame {
            constructor() {
                this.domain = ['a', 'b', 'c', 'd', 'e', 'f'];
                this.range = ['v', 'w', 'x', 'y', 'z'];
                this.connections = new Map();
                this.selectedDomain = null;
                
                this.init();
            }

            init() {
                this.renderElements();
                this.setupEventListeners();
                this.createArrowheadMarker();
            }

            renderElements() {
                const domainContainer = document.getElementById('domainElements');
                const rangeContainer = document.getElementById('rangeElements');

                domainContainer.innerHTML = this.domain.map(el => `
                    <div class="element" data-domain="${el}">${el}</div>
                `).join('');

                rangeContainer.innerHTML = this.range.map(el => `
                    <div class="element" data-range="${el}">${el}</div>
                `).join('');
            }


            createArrowheadMarker() {
                const svgNS = "http://www.w3.org/2000/svg";
                const defs = document.createElementNS(svgNS, "defs");
                const marker = document.createElementNS(svgNS, "marker");
                
                marker.setAttribute("id", "arrowhead");
                marker.setAttribute("markerWidth", "10");
                marker.setAttribute("markerHeight", "7");
                marker.setAttribute("refX", "9");
                marker.setAttribute("refY", "3.5");
                marker.setAttribute("orient", "auto");
                
                const path = document.createElementNS(svgNS, "path");
                path.setAttribute("d", "M0,0 L10,3.5 L0,7");
                path.setAttribute("fill", "var(--secondary-color)");
                
                marker.appendChild(path);
                defs.appendChild(marker);
                document.getElementById('connectionLayer').appendChild(defs);
            }

            setupEventListeners() {
                document.querySelectorAll('.element').forEach(el => {
                    el.addEventListener('click', (e) => this.handleElementClick(e));
                });

                document.getElementById('checkBtn').addEventListener('click', () => this.checkRelation());
                document.getElementById('resetBtn').addEventListener('click', () => this.resetGame());
            }

            handleElementClick(event) {
                const element = event.target;
                
                if (element.closest('#domainElements')) {
                    this.handleDomainClick(element);
                } else if (this.selectedDomain) {
                    this.handleRangeClick(element);
                }
            }


            handleDomainClick(domainElement) {
                document.querySelectorAll('.element').forEach(el => el.classList.remove('selected'));
                domainElement.classList.add('selected');
                this.selectedDomain = domainElement.dataset.domain;
            }


            handleRangeClick(rangeElement) {
                const rangeValue = rangeElement.dataset.range;
                
                if (this.selectedDomain) {
                    this.createConnection(this.selectedDomain, rangeValue);
                    this.selectedDomain = null;
                    document.querySelectorAll('.element').forEach(el => el.classList.remove('selected'));
                }
            }

            createConnection(domain, range) {
                const current = this.connections.get(domain) || [];
                this.connections.set(domain, [...current, range]);
                this.drawConnectionLine(domain, range);
            }

// draw connection line 
            drawConnectionLine(domain, range) {
                const svg = document.getElementById('connectionLayer');
                const domainEl = document.querySelector(`[data-domain="${domain}"]`);
                const rangeEl = document.querySelector(`[data-range="${range}"]`);

                const line = document.createElementNS("http://www.w3.org/2000/svg", "line");
                line.classList.add('connection');
                
                const startX = domainEl.offsetLeft + domainEl.offsetWidth;
                const startY = domainEl.offsetTop + domainEl.offsetHeight/2;
                const endX = rangeEl.offsetLeft;
                const endY = rangeEl.offsetTop + rangeEl.offsetHeight/2;

                line.setAttribute('x1', startX);
                line.setAttribute('y1', startY);
                line.setAttribute('x2', endX);
                line.setAttribute('y2', endY);

                svg.appendChild(line);
            }

            checkRelation() {
                const feedback = document.getElementById('feedback');
                const pairsDisplay = document.getElementById('orderedPairs');
                

    // Generate ordered pairs
                const pairs = [];
                this.connections.forEach((ranges, domain) => {
                    ranges.forEach(range => pairs.push(`(${domain},${range})`));
                });


  // Display formatted pairs
                pairsDisplay.textContent = pairs.length ? `{ ${pairs.join(', ')} }` : '{}';

                
// Validate function
                const isFunction = Array.from(this.connections.values())
                    .every(values => values.length === 1);

                feedback.textContent = isFunction ?
                    'ðŸŽ‰ Valid function! (Each domain element maps to exactly one range element)' :
                    'âš ï¸ Not a function - some domain elements have multiple mappings';

                feedback.className = isFunction ? 'success' : 'error';
            }


            resetGame() {

                this.connections.clear();

                this.selectedDomain = null;

                document.getElementById('connectionLayer').innerHTML = '';

                document.querySelectorAll('.element').forEach(el => el.classList.remove('selected'));

                document.getElementById('feedback').textContent = '';

                document.getElementById('orderedPairs').textContent = '';

                this.createArrowheadMarker();
            }
        }


        // Initialize game when ready

        document.addEventListener('DOMContentLoaded', () => new RelationGame());
    </script>



</body>
</html>
