<!DOCTYPE html>
<html lang="en">
<head>

    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-8LYQ579PW8"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-8LYQ579PW8');
</script>


<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title> Raven </title>

<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
tailwind.config = {
darkMode: 'class',
theme: {
extend: {
colors: {

// Raven Brand Colors
primary: {
DEFAULT: "#0F2C59", // Deep Navy - Trust, Authority, Stability
50: "#f0f3f8",
100: "#d6e1ee",
500: "#0F2C59",
600: "#0a2549",
700: "#081e39",
},


accent: {
DEFAULT: "#009F9D", // Consultancy Teal - Innovation, Precision
50: "#e6f7f7",
100: "#b3ebea",
500: "#009F9D",
600: "#008280",
700: "#006663",
},


neutral: {
25: "#FEFEFE",
50: "#F8F9FA", // Warm Light Gray - Cleanliness, Clarity
100: "#F1F3F4",
200: "#E8EAED",
300: "#DADCE0",
400: "#BDC1C6",
500: "#9AA0A6",
600: "#80868B",
700: "#5F6368",
800: "#2D3748", // Charcoal - Sophistication, Legibility
900: "#1F2937",
},

premium: {
DEFAULT: "#D2C1A7", // Pale Sand - Warmth, Approachability
50: "#fbf9f6",
100: "#f4efe6",
500: "#D2C1A7",
600: "#c4b095",
700: "#b69f83",
},


data: {
DEFAULT: "#5A7B9E", // Steel Blue - Logic, Intelligence
50: "#f2f5f9",
100: "#e1e9f2",
500: "#5A7B9E",
600: "#4d6a87",
700: "#405970",
},

success: "#22c55e",
warning: "#f59e0b",
error: "#ef4444",
},


boxShadow: {
'material-1': '0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24)',
'material-2': '0 3px 6px rgba(0,0,0,0.16), 0 3px 6px rgba(0,0,0,0.23)',
'material-3': '0 10px 20px rgba(0,0,0,0.19), 0 6px 6px rgba(0,0,0,0.23)',
'material-4': '0 14px 28px rgba(0,0,0,0.25), 0 10px 10px rgba(0,0,0,0.22)',
'material-5': '0 19px 38px rgba(0,0,0,0.30), 0 15px 12px rgba(0,0,0,0.22)',
},


fontFamily: {
'sans': ['Roboto', 'system-ui', 'sans-serif'],
},


borderRadius: {
'material': '4px',
}
}
}
}
</script>



<style>
.fade-in {
animation: fadeIn 0.3s cubic-bezier(0.4, 0.0, 0.2, 1);
}

@keyframes fadeIn {
from { opacity: 0; transform: translateY(16px); }
to { opacity: 1; transform: translateY(0); }
}

.material-card {
transition: box-shadow 0.28s cubic-bezier(0.4, 0.0, 0.2, 1);
}

.material-card:hover {
box-shadow: 0 8px 25px
 rgba(0,0,0,0.15);
}

.material-button {
transition: all 0.15s cubic-bezier(0.4, 0.0, 0.2, 1);
position: relative;
overflow: hidden;
}

.material-button:active {
transform: scale(0.98);
}


.material-fab {
border-radius: 50%;
width: 56px;
height: 56px;
display: flex;
align-items: center;
justify-content: center;
box-shadow: 0 3px 5px -1px rgba(0,0,0,0.2), 0 6px 10px 0 rgba(0,0,0,0.14), 0 1px 18px 0 rgba(0,0,0,0.12);
transition: box-shadow 0.28s cubic-bezier(0.4, 0.0, 0.2, 1);
}

.material-fab:hover {
box-shadow: 0 5px 5px -3px rgba(0,0,0,0.2), 0 8px 10px 1px rgba(0,0,0,0.14), 0 3px 14px 2px rgba(0,0,0,0.12);
}

.progress-ring {
transform: rotate(-90deg);
}

.ripple {
position: relative;
overflow: hidden;
}

.ripple::before {
content: '';
position: absolute;
top: 50%;
left: 50%;
width: 0;
height: 0;
border-radius: 50%;
background: rgba(255, 255, 255, 0.5);
transform: translate(-50%, -50%);
transition: width 0.6s, height 0.6s;
}

.ripple:active::before {
width: 300px;
height: 300px;
}

/* Material Design Typography Scale - Mobile optimized */
.headline-1 { font-size: 3.5rem; font-weight: 300; line-height: 1.167; letter-spacing: -1.5px; }
.headline-2 { font-size: 2.5rem; font-weight: 300; line-height: 1.2; letter-spacing: -0.5px; }
.headline-3 { font-size: 2rem; font-weight: 400; line-height: 1.167; letter-spacing: 0; }
.headline-4 { font-size: 1.75rem; font-weight: 400; line-height: 1.235; letter-spacing: 0.25px; }
.headline-5 { font-size: 1.25rem; font-weight: 400; line-height: 1.334; letter-spacing: 0; }
.headline-6 { font-size: 1.125rem; font-weight: 500; line-height: 1.6; letter-spacing: 0.15px; }

.subtitle-1 { font-size: 1rem; font-weight: 400; line-height: 1.75; letter-spacing: 0.15px; }
.subtitle-2 { font-size: 0.875rem; font-weight: 500; line-height: 1.57; letter-spacing: 0.1px; }

.body-1 { font-size: 1rem; font-weight: 400; line-height: 1.5; letter-spacing: 0.5px; }
.body-2 { font-size: 0.875rem; font-weight: 400; line-height: 1.43; letter-spacing: 0.25px; }

.button-text { font-size: 0.875rem; font-weight: 500; line-height: 1.75; letter-spacing: 1.25px; text-transform: uppercase; }

.caption { font-size: 0.75rem; font-weight: 400; line-height: 1.66; letter-spacing: 0.4px; }

.overline { font-size: 0.75rem; font-weight: 400; line-height: 2.66; letter-spacing: 1px; text-transform: uppercase; }


/* Desktop typography adjustments */
@media (min-width: 768px) {
.headline-1 { font-size: 6rem; }
.headline-2 { font-size: 3.75rem; }
.headline-3 { font-size: 3rem; }
.headline-4 { font-size: 2.125rem; }
.headline-5 { font-size: 1.5rem; }
.headline-6 { font-size: 1.25rem; }
}

/* Mobile menu transitions */
.mobile-menu-enter {
transform: translateX(-100%);
transition: transform 0.3s cubic-bezier(0.4, 0.0, 0.2, 1);
}

.mobile-menu-enter-active {
transform: translateX(0);
}

.mobile-menu-exit {
transform: translateX(0);
transition: transform 0.3s cubic-bezier(0.4, 0.0, 0.2, 1);
}

.mobile-menu-exit-active {
transform: translateX(-100%);
}

/* Dark mode enhancements */
.dark .material-card {
background-color: #1F2937;
border-color: #374151;
}

.dark .material-card:hover {
box-shadow: 0 8px 25px rgba(0,0,0,0.3);
}

/* Ensure minimum touch targets on mobile */
@media (max-width: 768px) {
.touch-target {
min-height: 44px;
min-width: 44px;
}
}

/* Hidden content */
.hidden-content {
    display: none !important;
}

/* Status badges */
.status-badge {
    padding: 5px 12px;
    border-radius: 20px;
    font-size: 0.8rem;
    font-weight: 600;
}

.status-paid {
    background: #d4edda;
    color: #155724;
}

.status-pending {
    background: #fff3cd;
    color: #856404;
}

/* Admin table styles */
.admin-table {
    width: 100%;
    border-collapse: collapse;
}

.admin-table th,
.admin-table td {
    padding: 12px 15px;
    text-align: left;
    border-bottom: 1px solid #eee;
}

.admin-table th {
    background-color: var(--primary);
    color: white;
    font-weight: 600;
}

.admin-table tr:hover {
    background-color: #f8f9fa;
}

.dark .admin-table tr:hover {
    background-color: #374151;
}

.dark .admin-table th {
    background-color: #0a2549;
}

.dark .admin-table td {
    border-bottom-color: #374151;
}

.btn-sm {
    padding: 5px 10px;
    font-size: 0.8rem;
}

.btn-danger {
    background-color: #ef4444;
    color: white;
}

.btn-danger:hover {
    background-color: #dc2626;
}
</style>
</head>




<body class="bg-neutral-50 dark:bg-neutral-900 font-sans transition-colors duration-200">
<!-- Material Design App Bar -->
<header id="mainHeader" class="bg-white dark:bg-neutral-800 shadow-material-2 sticky top-0 z-50">
<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
<div class="flex items-center justify-between h-16">

<!-- Logo & Brand -->
<div class="flex items-center space-x-3 sm:space-x-4">
<div class="flex items-center space-x-2 sm:space-x-3">
<div class="w-8 h-8 sm:w-10 sm:h-10 bg-primary rounded-lg flex items-center justify-center shadow-material-1">
<span class="text-white font-medium text-sm sm:text-lg">R</span>
</div>
<div>
<h1 class="headline-6 text-neutral-800 dark:text-white">Raven</h1>
</div>
</div>
</div>


<!-- Desktop Navigation -->
<nav class="hidden md:flex items-center space-x-1">
<a href="index.html" class="nav-btn px-4 py-2 text-primary font-medium button-text rounded-lg bg-primary/10">Dashboard</a>
<a href="/practice/index.html" class="nav-btn px-4 py-2 text-neutral-600 dark:text-neutral-400 hover:text-primary button-text rounded-lg hover:bg-neutral-100 dark:hover:bg-neutral-700">Practice</a>
<a href="mock-exam.html" class="nav-btn px-4 py-2 text-neutral-600 dark:text-neutral-400 hover:text-primary button-text rounded-lg hover:bg-neutral-100 dark:hover:bg-neutral-700">Mock Exams</a>
<a href="/analytics/analytics.html" class="nav-btn px-4 py-2 text-neutral-600 dark:text-neutral-400 hover:text-primary button-text rounded-lg hover:bg-neutral-100 dark:hover:bg-neutral-700">Analytics</a>
<a href="subjects.html" class="nav-btn px-4 py-2 text-neutral-600 dark:text-neutral-400 hover:text-primary button-text rounded-lg hover:bg-neutral-100 dark:hover:bg-neutral-700">Study</a>
<a href="referral/index.html" class="nav-btn px-4 py-2 text-neutral-600 dark:text-neutral-400 hover:text-primary button-text rounded-lg hover:bg-neutral-100 dark:hover:bg-neutral-700">Refer & Earn</a>

</nav>


<!-- Mobile & Desktop Actions -->
<div class="flex items-center space-x-2 sm:space-x-3">

    <!-- Admin Button (only visible when logged in as admin) -->
<button id="adminBtn" class="hidden material-button touch-target px-3 py-2 bg-warning text-white rounded-lg text-sm" onclick="requestAdminAccess()">
    <span class="material-icons text-sm">admin_panel_settings</span>
</button>


<!-- Logout Button -->
<button id="logoutBtn" class="hidden material-button touch-target px-3 py-2 bg-error text-white rounded-lg text-sm" onclick="logout()">
    Logout
</button>

<!-- Mobile Menu Button -->
<button onclick="toggleMobileMenu()" class="md:hidden material-button touch-target w-10 h-10 bg-neutral-100 dark:bg-neutral-700 rounded-full flex items-center justify-center text-neutral-600 dark:text-neutral-400 hover:bg-neutral-200 dark:hover:bg-neutral-600">
<span class="material-icons text-lg">menu</span>
</button>


<!-- Notifications -->
<button class="material-button touch-target w-8 h-8 sm:w-10 sm:h-10 bg-neutral-100 dark:bg-neutral-700 rounded-full flex items-center justify-center text-neutral-600 dark:text-neutral-400 hover:bg-neutral-200 dark:hover:bg-neutral-600">
<span class="material-icons text-sm sm:text-lg">notifications</span>
</button>


<!-- User Avatar -->
<div id="userAvatar" class="w-8 h-8 sm:w-10 sm:h-10 bg-accent rounded-full flex items-center justify-center shadow-material-1">
<span class="text-white font-medium text-xs sm:text-sm" id="userInitials">DM</span>
</div>
</div>
</div>
</div>
</header>


<!-- Mobile Menu Overlay -->
<div id="mobileMenuOverlay" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden md:hidden" onclick="toggleMobileMenu()"></div>


<!-- Mobile Menu Drawer -->
<nav id="mobileMenu" class="fixed top-0 left-0 h-full w-80 max-w-sm bg-white dark:bg-neutral-800 shadow-material-4 z-50 transform -translate-x-full transition-transform duration-300 md:hidden">
<div class="flex flex-col h-full">


<!-- Mobile Menu Header -->
<div class="flex items-center justify-between p-4 border-b border-neutral-200 dark:border-neutral-700">
<div class="flex items-center space-x-3">
<div class="w-8 h-8 bg-primary rounded-lg flex items-center justify-center shadow-material-1">
<span class="text-white font-medium text-sm">R</span>
</div>
<div>
<h2 class="subtitle-1 text-neutral-800 dark:text-white">Raven</h2>
</div>
</div>
<button onclick="toggleMobileMenu()" class="material-button w-10 h-10 rounded-full flex items-center justify-center text-neutral-600 dark:text-neutral-400 hover:bg-neutral-100 dark:hover:bg-neutral-700">
<span class="material-icons">close</span>
</button>
</div>


<!-- Mobile Menu Items -->
<div class="flex-1 overflow-y-auto p-4">

<div class="space-y-2">
<a href="index.html" class="flex items-center space-x-3 p-3 text-primary bg-primary/10 rounded-lg" onclick="toggleMobileMenu()">
<span class="material-icons">dashboard</span>
<span class="subtitle-1">Dashboard</span>
</a>

<a href="/practice/JAMB/TTS-integrated.html" class="flex items-center space-x-3 p-3 text-neutral-600 dark:text-neutral-400 hover:bg-neutral-100 dark:hover:bg-neutral-700 rounded-lg" onclick="toggleMobileMenu()">
<span class="material-icons">quiz</span>
<span class="subtitle-1">JAMB</span>
</a>

<a href="/practice/ICAN/index.html" class="flex items-center space-x-3 p-3 text-neutral-600 dark:text-neutral-400 hover:bg-neutral-100 dark:hover:bg-neutral-700 rounded-lg" onclick="toggleMobileMenu()">
<span class="material-icons">quiz</span>
<span class="subtitle-1">ICAN</span>
</a>

<a href="/practice/CFA/index.html" class="flex items-center space-x-3 p-3 text-neutral-600 dark:text-neutral-400 hover:bg-neutral-100 dark:hover:bg-neutral-700 rounded-lg" onclick="toggleMobileMenu()">
<span class="material-icons">quiz</span>
<span class="subtitle-1">CFA</span>
</a>

<a href="mock-exams.html" class="flex items-center space-x-3 p-3 text-neutral-600 dark:text-neutral-400 hover:bg-neutral-100 dark:hover:bg-neutral-700 rounded-lg" onclick="toggleMobileMenu()">
<span class="material-icons">assignment</span>
<span class="subtitle-1">Mock Exams</span>
</a>

<a href="/analytics/analytics.html" class="flex items-center space-x-3 p-3 text-neutral-600 dark:text-neutral-400 hover:bg-neutral-100 dark:hover:bg-neutral-700 rounded-lg" onclick="toggleMobileMenu()">
<span class="material-icons">analytics</span>
<span class="subtitle-1">Analytics</span>
</a>

<!-- 
<a href="achievements.html" class="flex items-center space-x-3 p-3 text-neutral-600 dark:text-neutral-400 hover:bg-neutral-100 dark:hover:bg-neutral-700 rounded-lg" onclick="toggleMobileMenu()">
<span class="material-icons">emoji_events</span>
<span class="subtitle-1">Achievements</span>
</a>-->


<a href="subjects.html" class="flex items-center space-x-3 p-3 text-neutral-600 dark:text-neutral-400 hover:bg-neutral-100 dark:hover:bg-neutral-700 rounded-lg" onclick="toggleMobileMenu()">
<span class="material-icons">school</span>
<span class="subtitle-1">Study</span>
</a>


<a href="/referral/index.html" class="flex items-center space-x-3 p-3 text-neutral-600 dark:text-neutral-400 hover:bg-neutral-100 dark:hover:bg-neutral-700 rounded-lg" onclick="toggleMobileMenu()">
<span class="material-icons">contacts</span>
<span class="subtitle-1">Referral</span>
</a>


<!--
<a href="/src/library/index.html" class="flex items-center space-x-3 p-3 text-neutral-600 dark:text-neutral-400 hover:bg-neutral-100 dark:hover:bg-neutral-700 rounded-lg" onclick="toggleMobileMenu()">
<span class="material-icons">bookmarks</span>
<span class="subtitle-1">Library</span>
</a>
-->

</div>
</div>


<!-- Mobile Menu Footer -->
<div class="p-4 border-t border-neutral-200 dark:border-neutral-700">
<div class="flex items-center space-x-3 p-3 bg-accent/10 rounded-lg">

<div class="w-10 h-10 bg-accent rounded-full flex items-center justify-center">
<span class="text-white font-medium text-sm" id="mobileUserInitials">DM</span>
</div>

<div>
<p class="subtitle-2 text-neutral-800 dark:text-white" id="mobileUserName">Demy Michaels</p>
<p class="caption text-neutral-600 dark:text-neutral-400">Student</p>
</div>

</div>
</div>
</nav>



<main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 sm:py-8">

<!-- Landing Page (Initial View - No Auth) -->
<section id="landingSection" class="hidden-content">
    <div class="min-h-screen flex items-center justify-center">
        <div class="material-card bg-white dark:bg-neutral-800 rounded-2xl p-8 max-w-md w-full shadow-material-3 text-center">
            <div class="mb-6">
                <div class="w-20 h-20 bg-primary rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-material-2">
                    <span class="material-icons text-4xl text-white">lock</span>
                </div>
                <h2 class="headline-4 text-neutral-800 dark:text-white mb-2">Welcome to Raven</h2>
                <p class="body-1 text-neutral-600 dark:text-neutral-400">Your gateway to exam success</p>
            </div>
            <div class="space-y-3">
                <button onclick="showSection(loginSection)" class="material-button w-full px-6 py-3 bg-primary text-white rounded-xl shadow-material-1 hover:shadow-material-2 ripple">
                    <span class="button-text">Login</span>
                </button>
                <button onclick="showSection(registerSection)" class="material-button w-full px-6 py-3 border-2 border-primary text-primary rounded-xl hover:bg-primary/10">
                    <span class="button-text">Register</span>
                </button>
            </div>
        </div>
    </div>
</section>

<!-- Login Form -->
<section id="loginSection" class="hidden-content">
    <div class="min-h-screen flex items-center justify-center">
        <div class="material-card bg-white dark:bg-neutral-800 rounded-2xl p-8 max-w-md w-full shadow-material-3">
            <div class="text-center mb-6">
                <div class="w-16 h-16 bg-primary rounded-xl flex items-center justify-center mx-auto mb-4">
                    <span class="material-icons text-3xl text-white">person</span>
                </div>
                <h2 class="headline-4 text-neutral-800 dark:text-white mb-2">Login to Your Account</h2>
                <p class="body-2 text-neutral-600 dark:text-neutral-400">Access your courses and continue learning</p>
            </div>
            <form id="loginForm" class="space-y-4">
                <div>
                    <label class="block subtitle-2 text-neutral-700 dark:text-neutral-300 mb-2">Email Address</label>
                    <input type="email" id="loginEmail" required class="w-full px-4 py-3 border border-neutral-300 dark:border-neutral-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary dark:bg-neutral-700 dark:text-white" placeholder="Enter your email" style="font-size: 16px;">
                </div>
                <div>
                    <label class="block subtitle-2 text-neutral-700 dark:text-neutral-300 mb-2">Password</label>
                    <input type="password" id="loginPassword" required class="w-full px-4 py-3 border border-neutral-300 dark:border-neutral-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary dark:bg-neutral-700 dark:text-white" placeholder="Enter your password" style="font-size: 16px;">
                </div>
                <button type="submit" class="material-button w-full px-6 py-3 bg-primary text-white rounded-xl shadow-material-1 hover:shadow-material-2 ripple">
                    <span class="button-text">Login</span>
                </button>
            </form>
            <div class="text-center mt-4">
                <p class="body-2 text-neutral-600 dark:text-neutral-400">Don't have an account? <a href="#" onclick="showSection(registerSection); return false;" class="text-primary font-medium">Register here</a></p>
            </div>
        </div>
    </div>
</section>

<!-- Register Form -->
<section id="registerSection" class="hidden-content">
    <div class="min-h-screen flex items-center justify-center">
        <div class="material-card bg-white dark:bg-neutral-800 rounded-2xl p-8 max-w-md w-full shadow-material-3">
            <div class="text-center mb-6">
                <div class="w-16 h-16 bg-accent rounded-xl flex items-center justify-center mx-auto mb-4">
                    <span class="material-icons text-3xl text-white">person_add</span>
                </div>
                <h2 class="headline-4 text-neutral-800 dark:text-white mb-2">Create an Account</h2>
                <p class="body-2 text-neutral-600 dark:text-neutral-400">Join thousands of students learning with us</p>
            </div>
            <form id="registerForm" class="space-y-4">
                <div>
                    <label class="block subtitle-2 text-neutral-700 dark:text-neutral-300 mb-2">Full Name</label>
                    <input type="text" id="registerName" required class="w-full px-4 py-3 border border-neutral-300 dark:border-neutral-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent dark:bg-neutral-700 dark:text-white" placeholder="Enter your full name" style="font-size: 16px;">
                </div>
                <div>
                    <label class="block subtitle-2 text-neutral-700 dark:text-neutral-300 mb-2">Email Address</label>
                    <input type="email" id="registerEmail" required class="w-full px-4 py-3 border border-neutral-300 dark:border-neutral-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent dark:bg-neutral-700 dark:text-white" placeholder="Enter your email" style="font-size: 16px;">
                </div>
                <div>
                    <label class="block subtitle-2 text-neutral-700 dark:text-neutral-300 mb-2">Password</label>
                    <input type="password" id="registerPassword" required class="w-full px-4 py-3 border border-neutral-300 dark:border-neutral-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent dark:bg-neutral-700 dark:text-white" placeholder="Create a password" style="font-size: 16px;">
                </div>
                <div>
                    <label class="block subtitle-2 text-neutral-700 dark:text-neutral-300 mb-2">Confirm Password</label>
                    <input type="password" id="registerConfirmPassword" required class="w-full px-4 py-3 border border-neutral-300 dark:border-neutral-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent dark:bg-neutral-700 dark:text-white" placeholder="Confirm your password" style="font-size: 16px;">
                </div>
                <button type="submit" class="material-button w-full px-6 py-3 bg-accent text-white rounded-xl shadow-material-1 hover:shadow-material-2 ripple">
                    <span class="button-text">Register</span>
                </button>
            </form>
            <div class="text-center mt-4">
                <p class="body-2 text-neutral-600 dark:text-neutral-400">Already have an account? <a href="#" onclick="showSection(loginSection); return false;" class="text-accent font-medium">Login here</a></p>
            </div>
        </div>
    </div>
</section>

<!-- Payment Page -->
<section id="paymentSection" class="hidden-content">
    <div class="min-h-screen flex items-center justify-center py-8">
        <div class="material-card bg-white dark:bg-neutral-800 rounded-2xl p-8 max-w-lg w-full shadow-material-3">
            <div class="text-center mb-6">
                <div class="w-16 h-16 bg-warning rounded-xl flex items-center justify-center mx-auto mb-4">
                    <span class="material-icons text-3xl text-white">workspace_premium</span>
                </div>
                <h2 class="headline-4 text-neutral-800 dark:text-white mb-2">Unlock All Courses</h2>
                <p class="body-2 text-neutral-600 dark:text-neutral-400">Choose a plan that works for you</p>
            </div>

            <div class="material-card bg-gradient-to-br from-primary to-accent rounded-xl p-6 text-white mb-6 relative overflow-hidden">
                <div class="absolute top-0 right-0 w-20 h-20 bg-white/10 rounded-full -mr-10 -mt-10"></div>
                <div class="relative z-10">
                    <div class="flex items-center justify-center mb-4">
                        <span class="material-icons text-4xl">verified</span>
                    </div>
                    <h3 class="headline-5 text-center mb-2">Premium Access</h3>
                    <div class="text-center mb-4">
                        <span class="headline-3">N5000</span>
                        <span class="body-1">/month</span>
                    </div>
                    <ul class="space-y-2 mb-6">
                        <li class="flex items-center space-x-2">
                            <span class="material-icons text-sm">check_circle</span>
                            <span class="body-2">Access to all courses</span>
                        </li>
                        <li class="flex items-center space-x-2">
                            <span class="material-icons text-sm">check_circle</span>
                            <span class="body-2">Interactive quizzes</span>
                        </li>
                        <li class="flex items-center space-x-2">
                            <span class="material-icons text-sm">check_circle</span>
                            <span class="body-2">Progress tracking</span>
                        </li>
                        <li class="flex items-center space-x-2">
                            <span class="material-icons text-sm">check_circle</span>
                            <span class="body-2">Mock exams</span>
                        </li>
                        <li class="flex items-center space-x-2">
                            <span class="material-icons text-sm">check_circle</span>
                            <span class="body-2">24/7 Support</span>
                        </li>
                    </ul>
                    <button id="payButton" class="material-button w-full px-6 py-3 bg-white text-primary rounded-xl shadow-material-2 hover:shadow-material-3 ripple">
                        <span class="button-text">Subscribe Now</span>
                    </button>
                </div>
            </div>

            <div class="text-center">
                <p class="body-2 text-neutral-600 dark:text-neutral-400">Already subscribed? <a href="#" onclick="showSection(loginSection); return false;" class="text-primary font-medium">Login here</a></p>
            </div>
        </div>
    </div>
</section>

<!-- Admin Panel -->
<section id="adminSection" class="hidden-content">
    <div class="mb-6">
        <div class="bg-gradient-to-r from-warning to-warning/80 rounded-2xl p-6 text-white shadow-material-3">
            <h2 class="headline-4 mb-2">Admin Panel</h2>
            <p class="subtitle-1">Manage registered users and view analytics</p>
        </div>
    </div>

    <!-- Stats Grid -->
    <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
        <div class="material-card bg-white dark:bg-neutral-800 rounded-xl p-6 shadow-material-1">
            <div class="flex items-center space-x-3 mb-2">
                <div class="w-12 h-12 bg-primary/10 rounded-xl flex items-center justify-center">
                    <span class="material-icons text-primary">people</span>
                </div>
                <div>
                    <p class="caption text-neutral-600 dark:text-neutral-400">Total Users</p>
                    <p class="headline-5 text-neutral-800 dark:text-white" id="adminTotalUsers">0</p>
                </div>
            </div>
        </div>

        <div class="material-card bg-white dark:bg-neutral-800 rounded-xl p-6 shadow-material-1">
            <div class="flex items-center space-x-3 mb-2">
                <div class="w-12 h-12 bg-success/10 rounded-xl flex items-center justify-center">
                    <span class="material-icons text-success">attach_money</span>
                </div>
                <div>
                    <p class="caption text-neutral-600 dark:text-neutral-400">Paid Users</p>
                    <p class="headline-5 text-neutral-800 dark:text-white" id="adminPaidUsers">0</p>
                </div>
            </div>
        </div>

        <div class="material-card bg-white dark:bg-neutral-800 rounded-xl p-6 shadow-material-1">
            <div class="flex items-center space-x-3 mb-2">
                <div class="w-12 h-12 bg-accent/10 rounded-xl flex items-center justify-center">
                    <span class="material-icons text-accent">trending_up</span>
                </div>
                <div>
                    <p class="caption text-neutral-600 dark:text-neutral-400">Conversion Rate</p>
                    <p class="headline-5 text-neutral-800 dark:text-white" id="adminConversionRate">0%</p>
                </div>
            </div>
        </div>

        <div class="material-card bg-white dark:bg-neutral-800 rounded-xl p-6 shadow-material-1">
            <div class="flex items-center space-x-3 mb-2">
                <div class="w-12 h-12 bg-warning/10 rounded-xl flex items-center justify-center">
                    <span class="material-icons text-warning">schedule</span>
                </div>
                <div>
                    <p class="caption text-neutral-600 dark:text-neutral-400">Active Today</p>
                    <p class="headline-5 text-neutral-800 dark:text-white" id="adminActiveToday">0</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Progress Bar -->
    <div class="material-card bg-white dark:bg-neutral-800 rounded-xl p-6 shadow-material-1 mb-6">
        <div class="flex justify-between items-center mb-2">
            <h3 class="subtitle-1 text-neutral-800 dark:text-white">Testing Progress</h3>
            <span class="caption text-neutral-600 dark:text-neutral-400" id="progressText">0/100 users</span>
        </div>
        <div class="w-full bg-neutral-200 dark:bg-neutral-700 rounded-full h-3">
            <div id="userProgress" class="bg-gradient-to-r from-primary to-accent h-3 rounded-full transition-all duration-300" style="width: 0%"></div>
        </div>
    </div>

    <!-- Controls -->
    <div class="flex flex-wrap gap-3 mb-6">
        <button onclick="loadUsers()" class="material-button px-6 py-3 bg-primary text-white rounded-xl shadow-material-1 hover:shadow-material-2 ripple">
            <span class="flex items-center space-x-2">
                <span class="material-icons">refresh</span>
                <span class="button-text">Refresh</span>
            </span>
        </button>
        <button onclick="exportToCSV()" class="material-button px-6 py-3 bg-success text-white rounded-xl shadow-material-1 hover:shadow-material-2 ripple">
            <span class="flex items-center space-x-2">
                <span class="material-icons">download</span>
                <span class="button-text">Export CSV</span>
            </span>
        </button>
        <button onclick="showSection(dashboardSection)" class="material-button px-6 py-3 border-2 border-neutral-300 dark:border-neutral-600 text-neutral-700 dark:text-neutral-300 rounded-xl hover:bg-neutral-50 dark:hover:bg-neutral-700">
            <span class="flex items-center space-x-2">
                <span class="material-icons">arrow_back</span>
                <span class="button-text">Back to Dashboard</span>
            </span>
        </button>
    </div>

    <!-- Users Table -->
    <div class="material-card bg-white dark:bg-neutral-800 rounded-xl shadow-material-1 overflow-hidden">
        <div class="p-6">
            <h3 class="headline-6 text-neutral-800 dark:text-white mb-4">Registered Users</h3>
            <div class="overflow-x-auto">
                <table class="admin-table">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Email</th>
                            <th>Registration Date</th>
                            <th>Payment Status</th>
                            <th>Last Login</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="usersTableBody">
                        <!-- Users will be populated here -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</section>

<!-- Dashboard Page (Original Content) -->
<section id="dashboardSection" class="hidden-content">
<!-- Hero Banner with Material Design -->
<div class="bg-gradient-to-r from-primary to-primary-700 rounded-xl sm:rounded-2xl p-4 sm:p-8 text-white mb-6 sm:mb-8 shadow-material-3 relative overflow-hidden">
<div class="relative z-10">
<div class="flex items-center justify-between">
<div class="max-w-2xl">

<h2 class="headline-4 mb-2 sm:mb-4">Welcome back, <span id="dashboardUserName">Student</span>!</h2>

<p class="subtitle-1 text-primary-100 mb-4 sm:mb-6">Ready to ace your next exam? Continue your preparation journey with our professional-grade platform.</p>

<button onclick="startQuickPractice()" class="material-button px-4 sm:px-6 py-2 sm:py-3 bg-accent text-white rounded-lg shadow-material-2 hover:shadow-material-3 ripple touch-target">
<span class="button-text">Start Quick Practice</span>

</button>
</div>
<div class="hidden lg:block">
<div class="w-32 h-32 bg-white/10 rounded-full flex items-center justify-center backdrop-blur-sm">
<span class="material-icons text-5xl text-white">school</span>
</div>
</div>
</div>
</div>

<!-- Decorative elements -->
<div class="absolute top-0 right-0 w-40 h-40 bg-white/5 rounded-full -mr-20 -mt-20"></div>
<div class="absolute bottom-0 left-0 w-24 h-24 bg-white/5 rounded-full -ml-12 -mb-12"></div>
</div>

<!-- Material Design Stats Cards -->
<div class="grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-6 mb-6 sm:mb-8">
<div class="material-card bg-white dark:bg-neutral-800 rounded-xl sm:rounded-2xl p-3 sm:p-6 shadow-material-1">
<div class="flex flex-col sm:flex-row sm:items-center sm:justify-between mb-2 sm:mb-4">
<div class="w-8 h-8 sm:w-12 sm:h-12 bg-data-50 dark:bg-data-500 rounded-lg sm:rounded-xl flex items-center justify-center mb-2 sm:mb-0">
<span class="material-icons text-data-500 dark:text-white text-sm sm:text-base">quiz</span>
</div>
<div class="text-left sm:text-right">
<p class="overline text-neutral-600 dark:text-neutral-400 text-xs">Total Questions</p>
<p class="headline-5 text-neutral-800 dark:text-white">1,247</p>
</div>
</div>
<div class="flex items-center space-x-2">
<span class="caption text-success bg-success/10 px-2 py-1 rounded-full text-xs">+124 this week</span>
</div>
</div>

<div class="material-card bg-white dark:bg-neutral-800 rounded-xl sm:rounded-2xl p-3 sm:p-6 shadow-material-1">
<div class="flex flex-col sm:flex-row sm:items-center sm:justify-between mb-2 sm:mb-4">
<div class="w-8 h-8 sm:w-12 sm:h-12 bg-success/10 rounded-lg sm:rounded-xl flex items-center justify-center mb-2 sm:mb-0">
<span class="material-icons text-success text-sm sm:text-base">check_circle</span>
</div>


<div class="text-left sm:text-right">
<p class="overline text-neutral-600 dark:text-neutral-400 text-xs">Correct Answers</p>
<p class="headline-5 text-neutral-800 dark:text-white">891</p>
</div>
</div>
<div class="flex items-center space-x-2">
<span class="caption text-success bg-success/10 px-2 py-1 rounded-full text-xs">71% accuracy</span>
</div>
</div>

<div class="material-card bg-white dark:bg-neutral-800 rounded-xl sm:rounded-2xl p-3 sm:p-6 shadow-material-1">
<div class="flex flex-col sm:flex-row sm:items-center sm:justify-between mb-2 sm:mb-4">
<div class="w-8 h-8 sm:w-12 sm:h-12 bg-warning/10 rounded-lg sm:rounded-xl flex items-center justify-center mb-2 sm:mb-0">
<span class="material-icons text-warning text-sm sm:text-base">local_fire_department</span>
</div>


<div class="text-left sm:text-right">
<p class="overline text-neutral-600 dark:text-neutral-400 text-xs">Study Streak</p>
<p class="headline-5 text-neutral-800 dark:text-white">23 days</p>
</div>
</div>
<div class="flex items-center space-x-2">
<span class="caption text-warning bg-warning/10 px-2 py-1 rounded-full text-xs">Keep it up!</span>
</div>
</div>

<div class="material-card bg-white dark:bg-neutral-800 rounded-xl sm:rounded-2xl p-3 sm:p-6 shadow-material-1">
<div class="flex flex-col sm:flex-row sm:items-center sm:justify-between mb-2 sm:mb-4">
<div class="w-8 h-8 sm:w-12 sm:h-12 bg-accent/10 rounded-lg sm:rounded-xl flex items-center justify-center mb-2 sm:mb-0">
<span class="material-icons text-accent text-sm sm:text-base">assignment</span>
</div>

<div class="text-left sm:text-right">
<p class="overline text-neutral-600 dark:text-neutral-400 text-xs">Mock Exams</p>
<p class="headline-5 text-neutral-800 dark:text-white">12</p>
</div>


</div>
<div class="flex items-center space-x-2">
<span class="caption text-neutral-600 dark:text-neutral-400 text-xs">Best: 285/400</span>
</div>
</div>


</div>

<!-- Subject Progress & Quick Actions with Material Design -->
<div class="grid grid-cols-1 lg:grid-cols-3 gap-6 sm:gap-8">

<!-- Subject Progress -->
<div class="lg:col-span-2">
<div class="material-card bg-white dark:bg-neutral-800 rounded-xl sm:rounded-2xl p-4 sm:p-6 shadow-material-1">
<h3 class="headline-6 mb-4 sm:mb-6 text-neutral-800 dark:text-white">Subject Progress</h3>
<div class="space-y-3 sm:space-y-4">
<div class="material-card bg-neutral-50 dark:bg-neutral-700 rounded-lg sm:rounded-xl p-3 sm:p-5 shadow-material-1">
<div class="flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-3 sm:space-y-0">
<div class="flex items-center space-x-3 sm:space-x-4">
<div class="w-10 h-10 sm:w-12 sm:h-12 bg-data-500 rounded-lg sm:rounded-xl flex items-center justify-center shadow-material-1">
<span class="material-icons text-white text-sm sm:text-base">calculate</span>
</div>
<div>
<h4 class="subtitle-1 text-neutral-800 dark:text-white">Mathematics</h4>
<p class="body-2 text-neutral-600 dark:text-neutral-400">245 questions completed</p>
</div>
</div>
<div class="flex items-center space-x-3 sm:space-x-4">
<div class="w-full sm:w-32">
<div class="flex justify-between mb-2">
<span class="caption text-neutral-600 dark:text-neutral-400">Progress</span>
<span class="caption font-medium text-neutral-800 dark:text-white">78%</span>
</div>
<div class="w-full bg-neutral-200 dark:bg-neutral-600 rounded-full h-2">
<div class="bg-data-500 h-2 rounded-full" style="width: 78%"></div>
</div>
</div>
<span class="caption bg-success/10 text-success px-3 py-1 rounded-full font-medium whitespace-nowrap">Strong</span>
</div>
</div>
</div>

<div class="material-card bg-neutral-50 dark:bg-neutral-700 rounded-lg sm:rounded-xl p-3 sm:p-5 shadow-material-1">
<div class="flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-3 sm:space-y-0">
<div class="flex items-center space-x-3 sm:space-x-4">
<div class="w-10 h-10 sm:w-12 sm:h-12 bg-accent rounded-lg sm:rounded-xl flex items-center justify-center shadow-material-1">
<span class="material-icons text-white text-sm sm:text-base">translate</span>
</div>
<div>
<h4 class="subtitle-1 text-neutral-800 dark:text-white">English Language</h4>
<p class="body-2 text-neutral-600 dark:text-neutral-400">189 questions completed</p>
</div>
</div>
<div class="flex items-center space-x-3 sm:space-x-4">
<div class="w-full sm:w-32">
<div class="flex justify-between mb-2">
<span class="caption text-neutral-600 dark:text-neutral-400">Progress</span>
<span class="caption font-medium text-neutral-800 dark:text-white">65%</span>
</div>
<div class="w-full bg-neutral-200 dark:bg-neutral-600 rounded-full h-2">
<div class="bg-accent h-2 rounded-full" style="width: 65%"></div>
</div>
</div>
<span class="caption bg-warning/10 text-warning px-3 py-1 rounded-full font-medium whitespace-nowrap">Good</span>
</div>
</div>
</div>

<div class="material-card bg-neutral-50 dark:bg-neutral-700 rounded-lg sm:rounded-xl p-3 sm:p-5 shadow-material-1">
<div class="flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-3 sm:space-y-0">
<div class="flex items-center space-x-3 sm:space-x-4">
<div class="w-10 h-10 sm:w-12 sm:h-12 bg-warning rounded-lg sm:rounded-xl flex items-center justify-center shadow-material-1">
<span class="material-icons text-white text-sm sm:text-base">tungsten</span>
</div>
<div>
<h4 class="subtitle-1 text-neutral-800 dark:text-white">Physics</h4>
<p class="body-2 text-neutral-600 dark:text-neutral-400">134 questions completed</p>
</div>
</div>
<div class="flex items-center space-x-3 sm:space-x-4">
<div class="w-full sm:w-32">
<div class="flex justify-between mb-2">
<span class="caption text-neutral-600 dark:text-neutral-400">Progress</span>
<span class="caption font-medium text-neutral-800 dark:text-white">45%</span>
</div>
<div class="w-full bg-neutral-200 dark:bg-neutral-600 rounded-full h-2">
<div class="bg-warning h-2 rounded-full" style="width: 45%"></div>
</div>
</div>
<span class="caption bg-warning/10 text-warning px-3 py-1 rounded-full font-medium whitespace-nowrap">Practice</span>
</div>
</div>
</div>


<div class="material-card bg-neutral-50 dark:bg-neutral-700 rounded-lg sm:rounded-xl p-3 sm:p-5 shadow-material-1">
<div class="flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-3 sm:space-y-0">
<div class="flex items-center space-x-3 sm:space-x-4">
<div class="w-10 h-10 sm:w-12 sm:h-12 bg-warning rounded-lg sm:rounded-xl flex items-center justify-center shadow-material-1">
<span class="material-icons text-white text-sm sm:text-base">tungsten</span>
</div>
<div>
<h4 class="subtitle-1 text-neutral-800 dark:text-white">Biology</h4>
<p class="body-2 text-neutral-600 dark:text-neutral-400">100 questions completed</p>
</div>
</div>
<div class="flex items-center space-x-3 sm:space-x-4">
<div class="w-full sm:w-32">
<div class="flex justify-between mb-2">
<span class="caption text-neutral-600 dark:text-neutral-400">Progress</span>
<span class="caption font-medium text-neutral-800 dark:text-white">45%</span>
</div>
<div class="w-full bg-neutral-200 dark:bg-neutral-600 rounded-full h-2">
<div class="bg-warning h-2 rounded-full" style="width: 45%"></div>
</div>
</div>
<span class="caption bg-warning/10 text-warning px-3 py-1 rounded-full font-medium whitespace-nowrap">Practice</span>
</div>
</div>
</div>


<div class="material-card bg-neutral-50 dark:bg-neutral-700 rounded-lg sm:rounded-xl p-3 sm:p-5 shadow-material-1">
<div class="flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-3 sm:space-y-0">
<div class="flex items-center space-x-3 sm:space-x-4">
<div class="w-10 h-10 sm:w-12 sm:h-12 bg-primary rounded-lg sm:rounded-xl flex items-center justify-center shadow-material-1">
<span class="material-icons text-white text-sm sm:text-base">science</span>
</div>
<div>
<h4 class="subtitle-1 text-neutral-800 dark:text-white">Chemistry</h4>
<p class="body-2 text-neutral-600 dark:text-neutral-400">156 questions completed</p>
</div>
</div>
<div class="flex items-center space-x-3 sm:space-x-4">
<div class="w-full sm:w-32">
<div class="flex justify-between mb-2">
<span class="caption text-neutral-600 dark:text-neutral-400">Progress</span>
<span class="caption font-medium text-neutral-800 dark:text-white">52%</span>
</div>
<div class="w-full bg-neutral-200 dark:bg-neutral-600 rounded-full h-2">
<div class="bg-primary h-2 rounded-full" style="width: 52%"></div>
</div>
</div>
<span class="caption bg-premium/20 text-premium-700 px-3 py-1 rounded-full font-medium whitespace-nowrap">Practice</span>
</div>
</div>
</div>
</div>
</div>
</div>



<!-- Quick Actions & Insights -->
<div class="space-y-4 sm:space-y-6">
<!-- Study Reminder Card -->
<div class="material-card bg-premium-50 dark:bg-premium-900/20 border border-premium-200 dark:border-premium-800 rounded-xl sm:rounded-2xl p-4 sm:p-6 shadow-material-1">
<div class="flex items-center space-x-3 mb-3 sm:mb-4">
<span class="material-icons text-premium-600 dark:text-premium-400">schedule</span>
<h4 class="subtitle-1 text-premium-800 dark:text-premium-200">Study Reminder</h4>
</div>
<p class="body-2 text-premium-700 dark:text-premium-300 mb-3 sm:mb-4">Physics needs attention. Try smart learning!</p>

<a href="/practice2.html" class="material-button w-full px-4 py-3 bg-premium-600 text-white rounded-xl shadow-material-1 hover:shadow-material-2 ripple block text-center touch-target">

    <span class="button-text">Start Learning</span>
</a>
</div>


<!-- Quick Actions -->
<div class="material-card bg-white dark:bg-neutral-800 rounded-xl sm:rounded-2xl p-4 sm:p-6 shadow-material-1">
<h4 class="subtitle-1 mb-3 sm:mb-4 text-neutral-800 dark:text-white">Quick Actions</h4>
<div class="space-y-3">

<button onclick="startQuickPractice()" class="material-button w-full flex items-center space-x-3 p-3 sm:p-4 bg-accent text-white rounded-xl shadow-material-1 hover:shadow-material-2 ripple touch-target">
<span class="material-icons">flash_on</span>
<span class="button-text">Quick Practice</span>
</button>

<a href="mock-exam.html" class="material-button w-full flex items-center space-x-3 p-3 sm:p-4 border border-neutral-300 dark:border-neutral-600 text-neutral-700 dark:text-neutral-300 rounded-xl hover:bg-neutral-50 dark:hover:bg-neutral-700 touch-target">
<span class="material-icons">assignment</span>
<span class="button-text">Take Mock Exam</span>
</a>

<a href="subjects.html" class="material-button w-full flex items-center space-x-3 p-3 sm:p-4 border border-neutral-300 dark:border-neutral-600 text-neutral-700 dark:text-neutral-300 rounded-xl hover:bg-neutral-50 dark:hover:bg-neutral-700 touch-target">
<span class="material-icons">school</span>
<span class="button-text">Interactive Learning</span>
</a>

</div>
</div>

<!-- Achievements -->
<div class="material-card bg-white dark:bg-neutral-800 rounded-xl sm:rounded-2xl p-4 sm:p-6 shadow-material-1">
<h4 class="subtitle-1 mb-3 sm:mb-4 text-neutral-800 dark:text-white">Recent Achievements</h4>
<div class="space-y-3">
<div class="flex items-center space-x-3">
<div class="w-8 h-8 bg-warning/10 rounded-full flex items-center justify-center">
<span class="material-icons text-warning text-sm">emoji_events</span>
</div>
<span class="body-2 text-neutral-600 dark:text-neutral-400">Mathematics Master</span>
</div>

<div class="flex items-center space-x-3">

<div class="w-8 h-8 bg-data-50 rounded-full flex items-center justify-center">

    <span class="material-icons text-data-500 text-sm">star</span>

</div>
<span class="body-2 text-neutral-600 dark:text-neutral-400">21-Day Streak</span>
</div>
<div class="flex items-center space-x-3">
<div class="w-8 h-8 bg-success/10 rounded-full flex items-center justify-center">

    <span class="material-icons text-success text-sm">verified</span>
</div>

<span class="body-2 text-neutral-600 dark:text-neutral-400">First Mock Exam</span>
</div>
</div>
</div>
</div>
</div>
</section>

</main>

<!-- Material Design Floating Action Button -->
<a href="practice.html" id="fabButton" class="material-fab fixed bottom-4 right-4 sm:bottom-6 sm:right-6 bg-accent text-white shadow-material-3 hover:shadow-material-4 hidden">
<span class="material-icons">quiz</span>
</a>

<script>
// Global variables
let allUsers = JSON.parse(localStorage.getItem('raven_users')) || [];
let currentUser = null;

// DOM Elements
const landingSection = document.getElementById('landingSection');
const loginSection = document.getElementById('loginSection');
const registerSection = document.getElementById('registerSection');
const paymentSection = document.getElementById('paymentSection');
const dashboardSection = document.getElementById('dashboardSection');
const adminSection = document.getElementById('adminSection');
const mainHeader = document.getElementById('mainHeader');
const fabButton = document.getElementById('fabButton');
const adminBtn = document.getElementById('adminBtn');
const logoutBtn = document.getElementById('logoutBtn');

// Show/Hide Sections
function showSection(section) {
    // Hide all sections
    landingSection.classList.add('hidden-content');
    loginSection.classList.add('hidden-content');
    registerSection.classList.add('hidden-content');
    paymentSection.classList.add('hidden-content');
    dashboardSection.classList.add('hidden-content');
    adminSection.classList.add('hidden-content');

    // Show the selected section
    section.classList.remove('hidden-content');

    // Show/hide header and FAB based on section
    if (section === landingSection || section === loginSection || section === registerSection || section === paymentSection) {
        mainHeader.style.display = 'none';
        fabButton.classList.add('hidden');
    } else {
        mainHeader.style.display = 'block';
        if (section === dashboardSection) {
            fabButton.classList.remove('hidden');
        } else {
            fabButton.classList.add('hidden');
        }
    }

    // Scroll to top
    window.scrollTo(0, 0);
}

// Login Form Handler
document.getElementById('loginForm').addEventListener('submit', (e) => {
    e.preventDefault();
    const email = document.getElementById('loginEmail').value;
    const password = document.getElementById('loginPassword').value;

    const user = allUsers.find(u => u.email === email && u.password === password);

    if (user) {
        // Update last login
        user.lastLogin = new Date().toLocaleDateString();
        localStorage.setItem('raven_users', JSON.stringify(allUsers));

        // Set current user
        localStorage.setItem('currentUserEmail', email);
        currentUser = user;

        if (user.hasPaid) {
            updateUserDisplay(user);
            showSection(dashboardSection);
            showMaterialToast('Welcome back! ', 'success');
        } else {
            showSection(paymentSection);
        }
    } else {
        showMaterialToast('Invalid email or password!', 'error');
    }
});

// Register Form Handler
document.getElementById('registerForm').addEventListener('submit', (e) => {
    e.preventDefault();
    const name = document.getElementById('registerName').value;
    const email = document.getElementById('registerEmail').value;
    const password = document.getElementById('registerPassword').value;
    const confirmPassword = document.getElementById('registerConfirmPassword').value;

    if (password !== confirmPassword) {
        showMaterialToast('Passwords do not match!', 'error');
        return;
    }

    // Check if user already exists
    if (allUsers.find(user => user.email === email)) {
        showMaterialToast('User with this email already exists!', 'error');
        return;
    }

    // Create user object
    const newUser = {
        id: allUsers.length > 0 ? Math.max(...allUsers.map(u => u.id)) + 1 : 1,
        name: name,
        email: email,
        password: password,
        registrationDate: new Date().toLocaleDateString(),
        hasPaid: false,
        lastLogin: null,
        courses: []
    };

    // Add to users array
    allUsers.push(newUser);
    localStorage.setItem('raven_users', JSON.stringify(allUsers));

    // Set as current user
    localStorage.setItem('currentUserEmail', email);
    currentUser = newUser;

    // Show payment section after registration
    showSection(paymentSection);
    showMaterialToast('Account created successfully! ', 'success');
});

// Payment Handler
document.getElementById('payButton').addEventListener('click', () => {
    const payButton = document.getElementById('payButton');

    // Show loading state
    payButton.innerHTML = '<span class="button-text">Processing...</span>';
    payButton.disabled = true;

    // Simulate API call to payment processor
    setTimeout(() => {
        const userEmail = localStorage.getItem('currentUserEmail');
        const user = allUsers.find(u => u.email === userEmail);

        if (user) {
            user.hasPaid = true;
            localStorage.setItem('raven_users', JSON.stringify(allUsers));
            currentUser = user;
        }

        updateUserDisplay(user);
        showSection(dashboardSection);
        showMaterialToast('Payment successful! Welcome to Raven Premium ', 'success');

        // Reset payment button
        payButton.innerHTML = '<span class="button-text">Subscribe Now</span>';
        payButton.disabled = false;
    }, 2000);
});

// Update user display
function updateUserDisplay(user) {
    const initials = user.name.split(' ').map(n => n[0]).join('').substring(0, 2).toUpperCase();
    document.getElementById('userInitials').textContent = initials;
    document.getElementById('mobileUserInitials').textContent = initials;
    document.getElementById('mobileUserName').textContent = user.name;
    document.getElementById('dashboardUserName').textContent = user.name.split(' ')[0];

    // Show logout and admin buttons
    logoutBtn.classList.remove('hidden');
    adminBtn.classList.remove('hidden');
}

// Logout functionality
function logout() {
    localStorage.removeItem('currentUserEmail');
    currentUser = null;
    logoutBtn.classList.add('hidden');
    adminBtn.classList.add('hidden');
    showSection(landingSection);
    showMaterialToast('Logged out successfully', 'info');
}

// Admin Access
function requestAdminAccess() {
    // Create custom modal for password input
    const modal = document.createElement('div');
    modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
    modal.innerHTML = `
        <div class="material-card bg-white dark:bg-neutral-800 rounded-2xl p-6 max-w-sm w-full mx-4 shadow-material-4">
            <h3 class="headline-6 text-neutral-800 dark:text-white mb-4">Admin Access</h3>
            <input type="password" id="adminPasswordInput" placeholder="Enter admin password" class="w-full px-4 py-3 border border-neutral-300 dark:border-neutral-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-warning dark:bg-neutral-700 dark:text-white mb-4" style="font-size: 16px;">
            <div class="flex space-x-3">
                <button onclick="this.closest('.fixed').remove()" class="flex-1 material-button px-4 py-2 border border-neutral-300 dark:border-neutral-600 text-neutral-700 dark:text-neutral-300 rounded-lg hover:bg-neutral-50 dark:hover:bg-neutral-700">
                    <span class="button-text">Cancel</span>
                </button>
                <button onclick="checkAdminPassword()" class="flex-1 material-button px-4 py-2 bg-warning text-white rounded-lg shadow-material-1 hover:shadow-material-2 ripple">
                    <span class="button-text">Access</span>
                </button>
            </div>
        </div>
    `;
    document.body.appendChild(modal);
    document.getElementById('adminPasswordInput').focus();
}

function checkAdminPassword() {
    const password = document.getElementById('adminPasswordInput').value;
    // In a real app, this would be hashed and checked securely
    if (password === 'admin123') {
        document.querySelector('.fixed.inset-0').remove();
        loadUsers();
        showSection(adminSection);
        showMaterialToast('Admin access granted', 'success');
    } else {
        showMaterialToast('Invalid admin password!', 'error');
    }
}

// Load users into admin table
function loadUsers() {
    allUsers = JSON.parse(localStorage.getItem('raven_users')) || [];
    const usersTableBody = document.getElementById('usersTableBody');
    const totalUsers = document.getElementById('adminTotalUsers');
    const paidUsers = document.getElementById('adminPaidUsers');
    const conversionRate = document.getElementById('adminConversionRate');
    const activeToday = document.getElementById('adminActiveToday');
    const userProgress = document.getElementById('userProgress');
    const progressText = document.getElementById('progressText');

    // Update stats
    totalUsers.textContent = allUsers.length;
    const paidCount = allUsers.filter(user => user.hasPaid).length;
    paidUsers.textContent = paidCount;
    conversionRate.textContent = allUsers.length > 0 ? ((paidCount / allUsers.length) * 100).toFixed(1) + '%' : '0%';

    const today = new Date().toLocaleDateString();
    const activeCount = allUsers.filter(user => user.lastLogin === today).length;
    activeToday.textContent = activeCount;

    // Update progress bar
    const progressPercent = (allUsers.length / 100) * 100;
    userProgress.style.width = `${Math.min(progressPercent, 100)}%`;
    progressText.textContent = `${allUsers.length}/100 users registered`;

    // Clear table
    usersTableBody.innerHTML = '';

    // Populate table
    if (allUsers.length === 0) {
        usersTableBody.innerHTML = '<tr><td colspan="6" class="text-center py-8 text-neutral-600 dark:text-neutral-400">No users registered yet</td></tr>';
    } else {
        allUsers.forEach((user, index) => {
            const row = document.createElement('tr');
            row.innerHTML = `
                <td class="text-neutral-800 dark:text-white">${user.name || 'N/A'}</td>
                <td class="text-neutral-600 dark:text-neutral-400">${user.email}</td>
                <td class="text-neutral-600 dark:text-neutral-400">${user.registrationDate || 'Unknown'}</td>
                <td>
                    <span class="status-badge ${user.hasPaid ? 'status-paid' : 'status-pending'}">
                        ${user.hasPaid ? ' Paid' : ' Pending'}
                    </span>
                </td>
                <td class="text-neutral-600 dark:text-neutral-400">${user.lastLogin || 'Never'}</td>
                <td>
                    <button onclick="viewUserDetails(${index})" class="material-button btn-sm px-3 py-1 bg-primary text-white rounded-lg mr-2">
                        <span class="material-icons text-sm">visibility</span>
                    </button>
                    <button onclick="togglePayment(${index})" class="material-button btn-sm px-3 py-1 ${user.hasPaid ? 'bg-error' : 'bg-success'} text-white rounded-lg">
                        <span class="material-icons text-sm">${user.hasPaid ? 'cancel' : 'check_circle'}</span>
                    </button>
                </td>
            `;
            usersTableBody.appendChild(row);
        });
    }
}

// View user details
function viewUserDetails(index) {
    const user = allUsers[index];
    const modal = document.createElement('div');
    modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
    modal.innerHTML = `
        <div class="material-card bg-white dark:bg-neutral-800 rounded-2xl p-6 max-w-md w-full mx-4 shadow-material-4">
            <div class="flex items-center justify-between mb-4">
                <h3 class="headline-6 text-neutral-800 dark:text-white">User Details</h3>
                <button onclick="this.closest('.fixed').remove()" class="material-button w-8 h-8 rounded-full flex items-center justify-center text-neutral-600 dark:text-neutral-400 hover:bg-neutral-100 dark:hover:bg-neutral-700">
                    <span class="material-icons">close</span>
                </button>
            </div>
            <div class="space-y-3">
                <div class="flex items-center space-x-3 p-3 bg-neutral-50 dark:bg-neutral-700 rounded-lg">
                    <span class="material-icons text-primary">person</span>
                    <div>
                        <p class="caption text-neutral-600 dark:text-neutral-400">Name</p>
                        <p class="subtitle-1 text-neutral-800 dark:text-white">${user.name}</p>
                    </div>
                </div>
                <div class="flex items-center space-x-3 p-3 bg-neutral-50 dark:bg-neutral-700 rounded-lg">
                    <span class="material-icons text-accent">email</span>
                    <div>
                        <p class="caption text-neutral-600 dark:text-neutral-400">Email</p>
                        <p class="subtitle-1 text-neutral-800 dark:text-white">${user.email}</p>
                    </div>
                </div>
                <div class="flex items-center space-x-3 p-3 bg-neutral-50 dark:bg-neutral-700 rounded-lg">
                    <span class="material-icons text-data-500">calendar_today</span>
                    <div>
                        <p class="caption text-neutral-600 dark:text-neutral-400">Registered</p>
                        <p class="subtitle-1 text-neutral-800 dark:text-white">${user.registrationDate}</p>
                    </div>
                </div>
                <div class="flex items-center space-x-3 p-3 bg-neutral-50 dark:bg-neutral-700 rounded-lg">
                    <span class="material-icons ${user.hasPaid ? 'text-success' : 'text-warning'}">
                        ${user.hasPaid ? 'check_circle' : 'schedule'}
                    </span>
                    <div>
                        <p class="caption text-neutral-600 dark:text-neutral-400">Payment Status</p>
                        <p class="subtitle-1 text-neutral-800 dark:text-white">${user.hasPaid ? 'Paid' : 'Pending'}</p>
                    </div>
                </div>
                <div class="flex items-center space-x-3 p-3 bg-neutral-50 dark:bg-neutral-700 rounded-lg">
                    <span class="material-icons text-primary">login</span>
                    <div>
                        <p class="caption text-neutral-600 dark:text-neutral-400">Last Login</p>
                        <p class="subtitle-1 text-neutral-800 dark:text-white">${user.lastLogin || 'Never'}</p>
                    </div>
                </div>
            </div>
        </div>
    `;
    document.body.appendChild(modal);
}

// Toggle payment status
function togglePayment(index) {
    const user = allUsers[index];
    const action = user.hasPaid ? 'revoke' : 'approve';

    const modal = document.createElement('div');
    modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
    modal.innerHTML = `
        <div class="material-card bg-white dark:bg-neutral-800 rounded-2xl p-6 max-w-sm w-full mx-4 shadow-material-4">
            <h3 class="headline-6 text-neutral-800 dark:text-white mb-4">Confirm Action</h3>
            <p class="body-1 text-neutral-600 dark:text-neutral-400 mb-6">Are you sure you want to ${action} payment access for ${user.name}?</p>
            <div class="flex space-x-3">
                <button onclick="this.closest('.fixed').remove()" class="flex-1 material-button px-4 py-2 border border-neutral-300 dark:border-neutral-600 text-neutral-700 dark:text-neutral-300 rounded-lg hover:bg-neutral-50 dark:hover:bg-neutral-700">
                    <span class="button-text">Cancel</span>
                </button>
                <button onclick="confirmTogglePayment(${index})" class="flex-1 material-button px-4 py-2 ${user.hasPaid ? 'bg-error' : 'bg-success'} text-white rounded-lg shadow-material-1 hover:shadow-material-2 ripple">
                    <span class="button-text">Confirm</span>
                </button>
            </div>
        </div>
    `;
    document.body.appendChild(modal);
}

function confirmTogglePayment(index) {
    allUsers[index].hasPaid = !allUsers[index].hasPaid;
    localStorage.setItem('raven_users', JSON.stringify(allUsers));
    loadUsers();
    document.querySelector('.fixed.inset-0').remove();
    showMaterialToast(`Payment access ${allUsers[index].hasPaid ? 'approved' : 'revoked'} successfully`, 'success');
}

// Export to CSV
function exportToCSV() {
    const headers = ['Name', 'Email', 'Registration Date', 'Payment Status', 'Last Login'];
    const csvData = [
        headers.join(','),
        ...allUsers.map(user => [
            `"${user.name || ''}"`,
            `"${user.email}"`,
            `"${user.registrationDate || ''}"`,
            `"${user.hasPaid ? 'Paid' : 'Pending'}"`,
            `"${user.lastLogin || 'Never'}"`
        ].join(','))
    ].join('\n');

    const blob = new Blob([csvData], { type: 'text/csv' });
    const url = window.URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = `raven_users_${new Date().toISOString().split('T')[0]}.csv`;
    a.click();
    window.URL.revokeObjectURL(url);

    showMaterialToast('User data exported successfully! ', 'success');
}

// Check if user is already logged in on page load
window.addEventListener('DOMContentLoaded', () => {
    const userEmail = localStorage.getItem('currentUserEmail');

    if (userEmail) {
        const user = allUsers.find(u => u.email === userEmail);

        if (user) {
            currentUser = user;
            if (user.hasPaid) {
                updateUserDisplay(user);
                showSection(dashboardSection);
            } else {
                showSection(paymentSection);
            }
        } else {
            showSection(landingSection);
        }
    } else {
        showSection(landingSection);
    }
});

// Dark mode detection with Material Design transitions
if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
document.documentElement.classList.add('dark');
}
window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
if (event.matches) {
document.documentElement.classList.add('dark');
} else {
document.documentElement.classList.remove('dark');
}
});

// Mobile menu functionality
function toggleMobileMenu() {
const mobileMenu = document.getElementById('mobileMenu');
const overlay = document.getElementById('mobileMenuOverlay');
const isOpen = !mobileMenu.classList.contains('-translate-x-full');

if (isOpen) {

// Close menu
mobileMenu.classList.add('-translate-x-full');
overlay.classList.add('hidden');
document.body.classList.remove('overflow-hidden');
} else {

// Open menu
mobileMenu.classList.remove('-translate-x-full');
overlay.classList.remove('hidden');
document.body.classList.add('overflow-hidden');
}
}

// Close mobile menu when clicking outside
document.addEventListener('click', function(event) {
const mobileMenu = document.getElementById('mobileMenu');
const menuButton = event.target.closest('[onclick="toggleMobileMenu()"]');

if (!mobileMenu.contains(event.target) && !menuButton && !mobileMenu.classList.contains('-translate-x-full')) {
toggleMobileMenu();
}
});

// Handle window resize
window.addEventListener('resize', function() {
if (window.innerWidth >= 768) {
const mobileMenu = document.getElementById('mobileMenu');
const overlay = document.getElementById('mobileMenuOverlay');
mobileMenu.classList.add('-translate-x-full');
overlay.classList.add('hidden');
document.body.classList.remove('overflow-hidden');
}
});

// Enhanced quick practice function
function startQuickPractice() {
window.location.href = '/practice/index.html';
}

// Material Design Toast System
function showMaterialToast(message, type = 'info') {
const toastContainer = document.getElementById('toast-container') || createToastContainer();

const toast = document.createElement('div');
const iconMap = {
success: 'check_circle',
error: 'error',
warning: 'warning',
info: 'info'
};

const colorMap = {
success: 'bg-success text-white',
error: 'bg-error text-white',
warning: 'bg-warning text-white',
info: 'bg-accent text-white'
};

toast.className = `material-card flex items-center space-x-3 px-4 sm:px-6 py-3 sm:py-4 rounded-xl sm:rounded-2xl shadow-material-3 ${colorMap[type]} transform translate-y-2 opacity-0 transition-all duration-300 mb-4`;

toast.innerHTML = `
<span class="material-icons">${iconMap[type]}</span>
<span class="subtitle-2 flex-1">${message}</span>
<button onclick="this.parentElement.remove()" class="material-icons hover:bg-white/10 rounded-full p-1 touch-target">close</button>
`;

toastContainer.appendChild(toast);

// Animate in
setTimeout(() => {
toast.classList.remove('translate-y-2', 'opacity-0');
}, 100);

// Auto remove after 3 seconds
setTimeout(() => {
if (toast.parentElement) {
toast.classList.add('translate-y-2', 'opacity-0');
setTimeout(() => toast.remove(), 300);
}
}, 3000);
}

function createToastContainer() {
const container = document.createElement('div');
container.id = 'toast-container';
container.className = 'fixed bottom-4 left-4 sm:bottom-6 sm:left-6 z-50 max-w-xs sm:max-w-sm';
document.body.appendChild(container);
return container;
}
</script>
</body>
</html>